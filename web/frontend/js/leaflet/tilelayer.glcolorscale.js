this.L=this.L||{},this.L.TileLayer=this.L.TileLayer||{},this.L.TileLayer.GLColorScale=function(e){"use strict";var io=Math.sqrt,ro=Math.abs,oo=Math.floor,so=Math.ceil,lo=Math.min,fo=Math.max,uo=String.fromCharCode;function t(e,t){function n(){this.constructor=e}co(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function n(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{l(a.next(e))}catch(t){r(t)}}function s(e){try{l(a["throw"](e))}catch(t){r(t)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,s)}l((a=a.apply(e,t||[])).next())})}function a(e,n){function a(e){return function(t){return i([e,t])}}function i(t){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,s&&(l=2&t[0]?s["return"]:t[0]?s["throw"]||((l=s["return"])&&l.call(s),0):s.next)&&!(l=l.call(s,t[1])).done)return l;switch((s=0,l)&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return r.label++,{value:t[1],done:!1};case 5:r.label++,s=t[1],t=[0];continue;case 7:t=r.ops.pop(),r.trys.pop();continue;default:if((l=r.trys,!(l=0<l.length&&l[l.length-1]))&&(6===t[0]||2===t[0])){r=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){r.label=t[1];break}if(6===t[0]&&r.label<l[1]){r.label=l[1],l=t;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(t);break}l[2]&&r.ops.pop(),r.trys.pop();continue;}t=n.call(e,r)}catch(n){t=[6,n],s=0}finally{o=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},o,s,l,d;return d={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d}function i(e){var t=yo.call(e,vo),n=e[vo];try{e[vo]=void 0;var a=!0}catch(t){}var i=xo.call(e);return a&&(t?e[vo]=n:delete e[vo]),i}function r(e){return So.call(e)}function o(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ko&&ko in Object(e)?i(e):r(e)}function s(e){return null!=e&&"object"==typeof e}function l(e){return"symbol"==typeof e||s(e)&&o(e)=="[object Symbol]"}function d(e){return"number"==typeof e?e:l(e)?To:+e}function f(e,t){for(var n=-1,a=null==e?0:e.length,i=Array(a);++n<a;)i[n]=t(e[n],n,e);return i}function u(e){if("string"==typeof e)return e;if(Eo(e))return f(e,u)+"";if(l(e))return Co?Co.call(e):"";var t=e+"";return"0"==t&&1/e==-Ao?"-0":t}function c(e,t){return function(n,a){var i;if(void 0===n&&void 0===a)return t;if(void 0!==n&&(i=n),void 0!==a){if(void 0===i)return a;"string"==typeof n||"string"==typeof a?(n=u(n),a=u(a)):(n=d(n),a=d(a)),i=e(n,a)}return i}}function p(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function h(e){if("number"==typeof e)return e;if(l(e))return Lo;if(p(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=p(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(zo,"");var n=Do.test(e);return n||Ro.test(e)?No(e.slice(2),n?2:8):jo.test(e)?Lo:+e}function m(e){if(!e)return 0===e?e:0;if(e=h(e),e===Fo||e===-Fo){var t=0>e?-1:1;return 1.7976931348623157e+308*t}return e===e?e:0}function g(e){var t=m(e),n=t%1;return t===t?n?t-n:t:0}function b(e){return e}function _(e){if(!p(e))return!1;var t=o(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"}function y(e){return!!Po&&Po in e}function x(e){if(null!=e){try{return Vo.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function v(e){if(!p(e)||y(e))return!1;var t=_(e)?Xo:Go;return t.test(x(e))}function w(e,t){return null==e?void 0:e[t]}function S(e,t){var n=w(e,t);return v(n)?n:void 0}function k(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);}var n=Jo(e.prototype),a=e.apply(n,t);return p(a)?a:n}}function T(e,t,n){function a(){var t=this&&this!==go&&this instanceof a?r:e;return t.apply(i?n:this,arguments)}var i=t&1,r=k(e);return a}function E(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2]);}return e.apply(t,n)}function A(e,t,n,a){for(var i=-1,r=e.length,o=n.length,s=-1,l=t.length,d=es(r-o,0),f=Array(l+d),u=!a;++s<l;)f[s]=t[s];for(;++i<o;)(u||i<r)&&(f[n[i]]=e[i]);for(;d--;)f[s++]=e[i++];return f}function B(e,t,n,a){for(var i=-1,r=e.length,o=-1,s=n.length,l=-1,d=t.length,f=ts(r-s,0),u=Array(f+d),c=!a;++i<f;)u[i]=e[i];for(var p=i;++l<d;)u[p+l]=t[l];for(;++o<s;)(c||i<r)&&(u[p+n[o]]=e[i++]);return u}function C(e,t){for(var n=e.length,a=0;n--;)e[n]===t&&++a;return a}function I(){}function z(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function j(){}function D(e){for(var t=e.name+"",n=as[t],a=rs.call(as,t)?n.length:0;a--;){var i=n[a],r=i.func;if(null==r||r==e)return i.name}return t}function R(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function N(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t}function F(e){if(e instanceof z)return e.clone();var t=new R(e.__wrapped__,e.__chain__);return t.__actions__=N(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function O(e){if(s(e)&&!Eo(e)&&!(e instanceof z)){if(e instanceof R)return e;if(ss.call(e,"__wrapped__"))return F(e)}return new R(e)}function P(e){var t=D(e),n=O[t];if("function"!=typeof n||!(t in z.prototype))return!1;if(e===n)return!0;var a=ns(n);return!!a&&e===a[0]}function M(e){var t=0,n=0;return function(){var a=ls(),i=16-(a-n);if(n=a,!(0<i))t=0;else if(800<=++t)return arguments[0];return e.apply(void 0,arguments)}}function V(e){var t=e.match(fs);return t?t[1].split(us):[]}function W(e,t){var n=t.length;if(!n)return e;var a=n-1;return t[a]=(1<n?"& ":"")+t[a],t=t.join(2<n?", ":" "),e.replace(cs,"{\n/* [wrapped with "+t+"] */\n")}function G(e){return function(){return e}}function H(e,t){for(var n=-1,a=null==e?0:e.length;++n<a&&!(!1===t(e[n],n,e)););return e}function U(e,t,n,a){for(var i=e.length,r=n+(a?1:-1);a?r--:++r<i;)if(t(e[r],r,e))return r;return-1}function Z(e){return e!==e}function X(e,t,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===t)return a;return-1}function K(e,t,n){return t===t?X(e,t,n):U(e,Z,n)}function Y(e,t){var n=null==e?0:e.length;return!!n&&-1<K(e,t,0)}function Q(e,t){return H(gs,function(n){var a="_."+n[0];t&n[1]&&!Y(e,a)&&e.push(a)}),e.sort()}function $(e,t,n){var a=t+"";return ms(e,W(a,Q(V(a),n)))}function J(e,t,n,a,i,r,o,s,l,d){var f=8&t,u=f?o:void 0,c=f?void 0:o,p=f?r:void 0,h=f?void 0:r;t|=f?32:64,t&=~(f?64:32),4&t||(t&=-4);var m=[e,t,i,p,u,h,c,s,l,d],g=n.apply(void 0,m);return P(e)&&ds(g,m),g.placeholder=a,$(g,e,t)}function ee(e){return e.placeholder}function te(e,t){var n=typeof e;return t=null==t?9007199254740991:t,!!t&&("number"==n||"symbol"!=n&&bs.test(e))&&-1<e&&0==e%1&&e<t}function ne(e,t){for(var n=e.length,a=_s(t.length,n),i=N(e);a--;){var r=t[a];e[a]=te(r,n)?i[r]:void 0}return e}function ae(e,t){for(var n=-1,a=e.length,i=0,r=[];++n<a;){var o=e[n];(o===t||o==="__lodash_placeholder__")&&(e[n]="__lodash_placeholder__",r[i++]=n)}return r}function ie(e,t,n,a,i,r,o,s,l,d){function f(){for(var b=arguments.length,_=Array(b),y=b;y--;)_[y]=arguments[y];if(h)var x=ee(f),v=C(_,x);if(a&&(_=A(_,a,i,h)),r&&(_=B(_,r,o,h)),b-=v,h&&b<d){var w=ae(_,x);return J(e,t,ie,f.placeholder,n,_,w,s,l,d-b)}var S=c?n:this,T=p?S[e]:e;return b=_.length,s?_=ne(_,s):m&&1<b&&_.reverse(),u&&l<b&&(_.length=l),this&&this!==go&&this instanceof f&&(T=g||k(T)),T.apply(S,_)}var u=t&128,c=t&1,p=t&2,h=t&24,m=t&512,g=p?void 0:k(e);return f}function re(e,t,n){function a(){for(var r=arguments.length,o=Array(r),s=r,l=ee(a);s--;)o[s]=arguments[s];var d=3>r&&o[0]!==l&&o[r-1]!==l?[]:ae(o,l);if(r-=d.length,r<n)return J(e,t,ie,a.placeholder,void 0,o,d,void 0,void 0,n-r);var f=this&&this!==go&&this instanceof a?i:e;return E(f,this,o)}var i=k(e);return a}function oe(e,t,n,a){function i(){for(var t=-1,s=arguments.length,l=-1,d=a.length,f=Array(d+s),u=this&&this!==go&&this instanceof i?o:e;++l<d;)f[l]=a[l];for(;s--;)f[l++]=arguments[++t];return E(u,r?n:this,f)}var r=t&1,o=k(e);return i}function se(e,t){var n=e[1],a=t[1],i=n|a,r=131>i,o=128==a&&8==n||128==a&&256==n&&e[7].length<=t[8]||384==a&&t[7].length<=t[8]&&8==n;if(!(r||o))return e;1&a&&(e[2]=t[2],i|=1&n?0:4);var s=t[3];if(s){var l=e[3];e[3]=l?A(l,s,t[4]):s,e[4]=l?ae(e[3],"__lodash_placeholder__"):t[4]}return s=t[5],s&&(l=e[5],e[5]=l?B(l,s,t[6]):s,e[6]=l?ae(e[5],"__lodash_placeholder__"):t[6]),s=t[7],s&&(e[7]=s),128&a&&(e[8]=null==e[8]?t[8]:ys(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function le(e,t,n,a,i,r,o,s){var l=2&t;if(!l&&"function"!=typeof e)throw new TypeError("Expected a function");var d=a?a.length:0;if(d||(t&=-97,a=i=void 0),o=void 0===o?o:xs(g(o),0),s=void 0===s?s:g(s),d-=i?i.length:0,64&t){var f=a,u=i;a=i=void 0}var c=l?void 0:ns(e),p=[e,t,n,a,i,f,u,r,o,s];if(c&&se(p,c),e=p[0],t=p[1],n=p[2],a=p[3],i=p[4],s=p[9]=void 0===p[9]?l?0:e.length:xs(p[9]-d,0),!s&&24&t&&(t&=-25),!t||1==t)var h=T(e,t,n);else h=8==t||16==t?re(e,t,s):32!=t&&33!=t||i.length?ie.apply(void 0,p):oe(e,t,n,a);var m=c?Qo:ds;return $(m(h,p),e,t)}function de(e,t,a){return t=a?void 0:t,t=e&&null==t?e.length:t,le(e,128,void 0,void 0,void 0,void 0,t)}function fe(e,t,n){"__proto__"==t&&ps?ps(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ue(e,t){return e===t||e!==e&&t!==t}function ce(e,t,n){var a=e[t];ws.call(e,t)&&ue(a,n)&&(n!==void 0||t in e)||fe(e,t,n)}function pe(e,t,n,a){var i=!n;n||(n={});for(var r=-1,o=t.length;++r<o;){var s=t[r],l=a?a(n[s],e[s],s,n,e):void 0;l===void 0&&(l=e[s]),i?fe(n,s,l):ce(n,s,l)}return n}function he(e,t,n){return t=Ss(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,r=Ss(a.length-t,0),o=Array(r);++i<r;)o[i]=a[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=a[i];return s[t]=n(o),E(e,this,s)}}function me(e,t){return ms(he(e,t,b),e+"")}function ge(e){return"number"==typeof e&&-1<e&&0==e%1&&e<=9007199254740991}function be(e){return null!=e&&ge(e.length)&&!_(e)}function _e(e,t,n){if(!p(n))return!1;var a=typeof t;return!("number"==a?!(be(n)&&te(t,n.length)):!("string"==a&&t in n))&&ue(n[t],e)}function ye(e){return me(function(t,n){var a=-1,i=n.length,r=1<i?n[i-1]:void 0,o=2<i?n[2]:void 0;for(r=3<e.length&&"function"==typeof r?(i--,r):void 0,o&&_e(n[0],n[1],o)&&(r=3>i?void 0:r,i=1),t=Object(t);++a<i;){var s=n[a];s&&e(t,s,a,r)}return t})}function xe(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||ks;return e===n}function ve(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a}function we(e){return s(e)&&o(e)=="[object Arguments]"}function Se(){return!1}function ke(e){return function(t){return e(t)}}function Te(e,t){var n=Eo(e),a=!n&&Bs(e),i=!n&&!a&&Ds(e),r=!n&&!a&&!i&&Ws(e),o=n||a||i||r,s=o?ve(e.length,String):[],l=s.length;for(var d in e)(t||Hs.call(e,d))&&!(o&&("length"==d||i&&("offset"==d||"parent"==d)||r&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||te(d,l)))&&s.push(d);return s}function Ee(e,t){return function(n){return e(t(n))}}function Ae(e){if(!xe(e))return Us(e);var t=[];for(var n in Object(e))Zs.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Be(e){return be(e)?Te(e):Ae(e)}function Ce(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}function Ie(e){if(!p(e))return Ce(e);var t=xe(e),n=[];for(var a in e)("constructor"!=a||!t&&$s.call(e,a))&&n.push(a);return n}function Le(e){return be(e)?Te(e,!0):Ie(e)}function ze(e,t){if(Eo(e))return!1;var n=typeof e;return!!("number"==n||"symbol"==n||"boolean"==n||null==e||l(e))||al.test(e)||!nl.test(e)||null!=t&&e in Object(t)}function je(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function De(e,t){for(var n=e.length;n--;)if(ue(e[n][0],t))return n;return-1}function Re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function Ne(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Fe(e,t){var n=e.__data__;return Ne(t)?n["string"==typeof t?"string":"hash"]:n.map}function Oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function Pe(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var a=arguments,i=t?t.apply(this,a):a[0],r=n.cache;if(r.has(i))return r.get(i);var o=e.apply(this,a);return n.cache=r.set(i,o)||r,o};return n.cache=new(Pe.Cache||Oe),n}function Me(e){return null==e?"":u(e)}function Ve(e,t){return Eo(e)?e:ze(e,t)?[e]:hl(Me(e))}function We(e){if("string"==typeof e||l(e))return e;var t=e+"";return"0"==t&&1/e==-ml?"-0":t}function Ge(e,t){t=Ve(t,e);for(var n=0,a=t.length;null!=e&&n<a;)e=e[We(t[n++])];return n&&n==a?e:void 0}function He(e,t,n){var a=null==e?void 0:Ge(e,t);return a===void 0?n:a}function Ue(e,t){for(var n=-1,a=t.length,i=Array(a);++n<a;)i[n]=null==e?void 0:He(e,t[n]);return i}function qe(e,t){for(var n=-1,a=t.length,i=e.length;++n<a;)e[i+n]=t[n];return e}function Ze(e){return Eo(e)||Bs(e)||!!(gl&&e&&e[gl])}function Xe(e,t,n,a,i){var r=-1,o=e.length;for(n||(n=Ze),i||(i=[]);++r<o;){var s=e[r];0<t&&n(s)?1<t?Xe(s,t-1,n,a,i):qe(i,s):!a&&(i[i.length]=s)}return i}function Ke(e){var t=null==e?0:e.length;return t?Xe(e,1):[]}function Ye(e){return ms(he(e,void 0,Ke),e+"")}function Qe(e){if(!s(e)||o(e)!="[object Object]")return!1;var t=at(e);if(null===t)return!0;var n=vl.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&xl.call(n)==wl}function $e(e){if(!s(e))return!1;var t=o(e);return t=="[object Error]"||t=="[object DOMException]"||"string"==typeof e.message&&"string"==typeof e.name&&!Qe(e)}function Je(e,t){var a;if("function"!=typeof t)throw new TypeError("Expected a function");return e=g(e),function(){return 0<--e&&(a=t.apply(this,arguments)),1>=e&&(t=void 0),a}}function et(e,t,n){var a=-1,i=e.length;0>t&&(t=-t>i?0:i+t),n=n>i?i:n,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var r=Array(i);++a<i;)r[a]=e[a+t];return r}function tt(e,t,n){var a=e.length;return n=void 0===n?a:n,!t&&n>=a?e:et(e,t,n)}function nt(e){return Al.test(e)}function it(e){return e.split("")}function rt(e){return e.match(Ol)||[]}function ot(e){return nt(e)?rt(e):it(e)}function st(e){return function(t){t=Me(t);var n=nt(t)?ot(t):void 0,a=n?n[0]:t.charAt(0),i=n?tt(n,1).join(""):t.slice(1);return a[e]()+i}}function dt(e){return Pl(Me(e).toLowerCase())}function ft(e,t,n,a){var i=-1,r=null==e?0:e.length;for(a&&r&&(n=e[++i]);++i<r;)n=t(n,e[i],i,e);return n}function ut(e){return function(t){return null==e?void 0:e[t]}}function ct(e){return e=Me(e),e&&e.replace(Vl,Ml).replace(Wl,"")}function pt(e){return e.match(Gl)||[]}function ht(e){return Hl.test(e)}function mt(e){return e.match(ud)||[]}function bt(e,t,n){return e=Me(e),t=n?void 0:t,void 0===t?ht(e)?mt(e):pt(e):e.match(t)||[]}function _t(e){return function(t){return ft(bt(ct(t).replace(cd,"")),e,"")}}function yt(e){var t=Math[e];return function(e,n){if(e=h(e),n=null==n?0:hd(g(n),292),n){var a=(Me(e)+"e").split("e"),i=t(a[0]+"e"+(+a[1]+n));return a=(Me(i)+"e").split("e"),+(a[0]+"e"+(+a[1]-n))}return t(e)}}function xt(e){var t=O(e);return t.__chain__=!0,t}function vt(e,t,n){t=(n?_e(e,t,n):void 0===t)?1:bd(g(t),0);var a=null==e?0:e.length;if(!a||1>t)return[];for(var i=0,r=0,o=Array(gd(a/t));i<a;)o[r++]=et(e,i,i+=t);return o}function wt(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function St(e){var t=this.__data__=new Re(e);this.size=t.size}function kt(e,t){return e&&pe(t,Be(t),e)}function Tt(e,t){return e&&pe(t,Le(t),e)}function Et(e,t){if(t)return e.slice();var n=e.length,a=wd?wd(n):new e.constructor(n);return e.copy(a),a}function At(e,t){for(var n=-1,a=null==e?0:e.length,i=0,r=[];++n<a;){var o=e[n];t(o,n,e)&&(r[i++]=o)}return r}function Bt(){return[]}function Ct(e,t){return pe(e,Ed(e),t)}function It(e,t){return pe(e,Bd(e),t)}function Lt(e,t,n){var a=t(e);return Eo(e)?a:qe(a,n(e))}function zt(e){return Lt(e,Be,Ed)}function jt(e){return Lt(e,Le,Bd)}function Dt(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ud.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Rt(e){var t=new e.constructor(e.byteLength);return new qd(t).set(new qd(e)),t}function Nt(e,t){var n=t?Rt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Ft(e){var t=new e.constructor(e.source,Zd.exec(e));return t.lastIndex=e.lastIndex,t}function Ot(e){return Kd?Object(Kd.call(e)):{}}function Pt(e,t){var n=t?Rt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Mt(e,t,n){var a=e.constructor;return"[object ArrayBuffer]"===t?Rt(e):"[object Boolean]"===t||"[object Date]"===t?new a(+e):"[object DataView]"===t?Nt(e,n):"[object Float32Array]"===t||"[object Float64Array]"===t||"[object Int8Array]"===t||"[object Int16Array]"===t||"[object Int32Array]"===t||"[object Uint8Array]"===t||"[object Uint8ClampedArray]"===t||"[object Uint16Array]"===t||"[object Uint32Array]"===t?Pt(e,n):"[object Map]"===t?new a:"[object Number]"===t||"[object String]"===t?new a(e):"[object RegExp]"===t?Ft(e):"[object Set]"===t?new a:"[object Symbol]"===t?Ot(e):void 0}function Vt(e){return"function"!=typeof e.constructor||xe(e)?{}:Jo(at(e))}function Wt(e,t,n,a,i,r){var o=1&t,s=2&t,l;if(n&&(l=i?n(e,a,i,r):n(e)),void 0!==l)return l;if(!p(e))return e;var d=Eo(e);if(!d){var f=Gd(e),u="[object Function]"==f||"[object GeneratorFunction]"==f;if(Ds(e))return Et(e,o);if("[object Object]"!=f&&"[object Arguments]"!=f&&(!u||i)){if(!ef[f])return i?e:{};l=Mt(e,f,o)}else if(l=s||u?{}:Vt(e),!o)return s?It(e,Tt(l,e)):Ct(e,kt(l,e))}else if(l=Dt(e),!o)return N(e,l);r||(r=new St);var c=r.get(e);if(c)return c;if(r.set(e,l),Jd(e))return e.forEach(function(a){l.add(Wt(a,t,n,a,e,r))}),l;if(Qd(e))return e.forEach(function(a,i){l.set(i,Wt(a,t,n,i,e,r))}),l;var h=4&t?s?jt:zt:s?keysIn:Be,m=d?void 0:h(e);return H(m||e,function(a,i){m&&(i=a,a=e[i]),ce(l,i,Wt(a,t,n,i,e,r))}),l}function Gt(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Oe;++t<n;)this.add(e[t])}function Ht(e,t){for(var n=-1,a=null==e?0:e.length;++n<a;)if(t(e[n],n,e))return!0;return!1}function Ut(e,t){return e.has(t)}function qt(e,t,n,a,i,r){var o=1&n,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var d=r.get(e);if(d&&r.get(t))return d==t;var f=-1,u=!0,c=2&n?new Gt:void 0;for(r.set(e,t),r.set(t,e);++f<s;){var p=e[f],h=t[f];if(a)var m=o?a(h,p,f,t,e,r):a(p,h,f,e,t,r);if(void 0!==m){if(m)continue;u=!1;break}if(c){if(!Ht(t,function(e,t){if(!Ut(c,t)&&(p===e||i(p,e,n,a,r)))return c.push(t)})){u=!1;break}}else if(!(p===h||i(p,h,n,a,r))){u=!1;break}}return r["delete"](e),r["delete"](t),u}function Zt(e){var t=-1,n=Array(e.size);return e.forEach(function(e,a){n[++t]=[a,e]}),n}function Xt(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Kt(e,t,n,a,i,r,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!!(e.byteLength==t.byteLength&&r(new qd(e),new qd(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ue(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Zt;case"[object Set]":var l=1&a;if(s||(s=Xt),e.size!=t.size&&!l)return!1;var d=o.get(e);if(d)return d==t;a|=2,o.set(e,t);var f=qt(s(e),s(t),a,i,r,o);return o["delete"](e),f;case"[object Symbol]":if(nf)return nf.call(e)==nf.call(t);}return!1}function Yt(e,t,n,a,i,r){var o=1&n,s=zt(e),l=s.length,d=zt(t),f=d.length;if(l!=f&&!o)return!1;for(var u=l,c;u--;)if(c=s[u],o?!(c in t):!rf.call(t,c))return!1;var p=r.get(e);if(p&&r.get(t))return p==t;var h=!0;r.set(e,t),r.set(t,e);for(var m=o;++u<l;){c=s[u];var g=e[c],b=t[c];if(a)var _=o?a(b,g,c,t,e,r):a(g,b,c,e,t,r);if(void 0===_?!(g===b||i(g,b,n,a,r)):!_){h=!1;break}m||(m="constructor"==c)}if(h&&!m){var y=e.constructor,x=t.constructor;y!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof x&&x instanceof x)&&(h=!1)}return r["delete"](e),r["delete"](t),h}function Qt(e,t,n,a,i,r){var o=Eo(e),s=Eo(t),l=o?"[object Array]":Gd(e),d=s?"[object Array]":Gd(t);l="[object Arguments]"==l?"[object Object]":l,d="[object Arguments]"==d?"[object Object]":d;var f="[object Object]"==l,u="[object Object]"==d,c=l==d;if(c&&Ds(e)){if(!Ds(t))return!1;o=!0,f=!1}if(c&&!f)return r||(r=new St),o||Ws(e)?qt(e,t,n,a,i,r):Kt(e,t,l,n,a,i,r);if(!(1&n)){var p=f&&sf.call(e,"__wrapped__"),h=u&&sf.call(t,"__wrapped__");if(p||h){var m=p?e.value():e,g=h?t.value():t;return r||(r=new St),i(m,g,n,a,r)}}return!!c&&(r||(r=new St),Yt(e,t,n,a,i,r))}function $t(e,t,n,a,i){return!(e!==t)||(null!=e&&null!=t&&(s(e)||s(t))?Qt(e,t,n,a,$t,i):e!==e&&t!==t)}function Jt(e,t,n,a){var i=n.length,r=i,o=!a;if(null==e)return!r;for(e=Object(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<r;){s=n[i];var l=s[0],d=e[l],f=s[1];if(!(o&&s[2])){var u=new St;if(a)var c=a(d,f,l,e,t,u);if(void 0===c?!$t(f,d,3,a,u):!c)return!1}else if(void 0===d&&!(l in e))return!1}return!0}function en(e){return e===e&&!p(e)}function tn(e){for(var t=Be(e),n=t.length;n--;){var a=t[n],i=e[a];t[n]=[a,i,en(i)]}return t}function nn(e,t){return function(n){return null!=n&&n[e]===t&&(t!==void 0||e in Object(n))}}function an(e){var t=tn(e);return 1==t.length&&t[0][2]?nn(t[0][0],t[0][1]):function(n){return n===e||Jt(n,e,t)}}function rn(e,t){return null!=e&&t in Object(e)}function on(e,t,n){t=Ve(t,e);for(var a=-1,i=t.length,r=!1,o;++a<i&&(o=We(t[a]),!!(r=null!=e&&n(e,o)));)e=e[o];return r||++a!=i?r:(i=null==e?0:e.length,!!i&&ge(i)&&te(o,i)&&(Eo(e)||Bs(e)))}function sn(e,t){return null!=e&&on(e,t,rn)}function ln(e,t){return ze(e)&&en(t)?nn(We(e),t):function(n){var a=He(n,e);return a===void 0&&a===t?sn(n,e):$t(t,a,3)}}function dn(e){return function(t){return null==t?void 0:t[e]}}function fn(e){return function(t){return Ge(t,e)}}function un(e){return ze(e)?dn(We(e)):fn(e)}function cn(e){return"function"==typeof e?e:null==e?b:"object"==typeof e?Eo(e)?ln(e[0],e[1]):an(e):un(e)}function pn(e,t,n){var a=n.length;if(null==e)return!a;for(e=Object(e);a--;){var i=n[a],r=t[i],o=e[i];if(o===void 0&&!(i in e)||!r(o))return!1}return!0}function hn(e){var t=Be(e);return function(n){return pn(n,e,t)}}function mn(e,t,n,a){for(var i=-1,r=null==e?0:e.length;++i<r;){var o=e[i];t(a,o,n(o),e)}return a}function gn(e){return function(t,n,a){for(var i=-1,r=Object(t),o=a(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===n(r[l],l,r))break}return t}}function bn(e,t){return e&&lf(e,t,Be)}function _n(e,t){return function(n,a){if(null==n)return n;if(!be(n))return e(n,a);for(var i=n.length,r=t?i:-1,o=Object(n);(t?r--:++r<i)&&!(!1===a(o[r],r,o)););return n}}function yn(e,t,n,a){return df(e,function(e,i,r){t(a,e,n(e),r)}),a}function xn(e,t){return function(n,a){var i=Eo(n)?mn:yn,r=t?t():{};return i(n,e,cn(a,2),r)}}function vn(e,t,n){t=n?void 0:t;var a=le(e,8,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=vn.placeholder,a}function wn(e,t,n){t=n?void 0:t;var a=le(e,16,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=wn.placeholder,a}function Sn(e,t,n){function a(t){var n=_,a=y;return _=y=void 0,c=t,v=e.apply(a,n),v}function i(e){return c=e,w=setTimeout(s,t),m?a(e):v}function r(e){var n=e-S,a=e-c,i=t-n;return g?mf(i,x-a):i}function o(e){var n=e-S,a=e-c;return void 0===S||n>=t||0>n||g&&a>=x}function s(){var e=pf();return o(e)?l(e):void(w=setTimeout(s,r(e)))}function l(e){return(w=void 0,b&&_)?a(e):(_=y=void 0,v)}function d(){void 0!==w&&clearTimeout(w),c=0,_=S=y=w=void 0}function f(){return void 0===w?v:l(pf())}function u(){var e=pf(),n=o(e);if(_=arguments,y=this,S=e,n){if(void 0===w)return i(S);if(g)return w=setTimeout(s,t),a(S)}return void 0===w&&(w=setTimeout(s,t)),v}var c=0,m=!1,g=!1,b=!0,_,y,x,v,w,S;if("function"!=typeof e)throw new TypeError("Expected a function");return t=h(t)||0,p(n)&&(m=!!n.leading,g="maxWait"in n,x=g?hf(h(n.maxWait)||0,t):x,b="trailing"in n?!!n.trailing:b),u.cancel=d,u.flush=f,u}function kn(e,t,n){(n===void 0||ue(e[t],n))&&(n!==void 0||t in e)||fe(e,t,n)}function Tn(e){return s(e)&&be(e)}function En(e,t){return"__proto__"==t?void 0:e[t]}function An(e){return pe(e,Le(e))}function Bn(e,t,n,a,i,r,o){var s=En(e,n),l=En(t,n),d=o.get(l);if(d)return void kn(e,n,d);var f=r?r(s,l,n+"",e,t,o):void 0,u=f===void 0;if(u){var c=Eo(l),h=!c&&Ds(l),m=!c&&!h&&Ws(l);f=l,c||h||m?Eo(s)?f=s:Tn(s)?f=N(s):h?(u=!1,f=Et(l,!0)):m?(u=!1,f=Pt(l,!0)):f=[]:Qe(l)||Bs(l)?(f=s,Bs(s)?f=An(s):(!p(s)||_(s))&&(f=Vt(l))):u=!1}u&&(o.set(l,f),i(f,l,a,r,o),o["delete"](l)),kn(e,n,f)}function Cn(e,t,n,a,i){e===t||lf(t,function(r,o){if(p(r))i||(i=new St),Bn(e,t,o,n,Cn,a,i);else{var s=a?a(En(e,o),r,o+"",e,t,i):void 0;s===void 0&&(s=r),kn(e,o,s)}},Le)}function In(e,t,n,a,i,r){return p(e)&&p(t)&&(r.set(t,e),Cn(e,t,void 0,In,r),r["delete"](t)),e}function Ln(e,t,n){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout(function(){e.apply(void 0,n)},t)}function zn(e,t,n){for(var a=-1,i=null==e?0:e.length;++a<i;)if(n(t,e[a]))return!0;return!1}function jn(e,t,n,a){var i=-1,r=Y,o=!0,s=e.length,l=[],d=t.length;if(!s)return l;n&&(t=f(t,ke(n))),a?(r=zn,o=!1):t.length>=200&&(r=Ut,o=!1,t=new Gt(t));outer:for(;++i<s;){var u=e[i],c=null==n?u:n(u);if(u=a||0!==u?u:0,o&&c===c){for(var p=d;p--;)if(t[p]===c)continue outer;l.push(u)}else r(t,c,a)||l.push(u)}return l}function Dn(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function Rn(e,t,n,a){for(var i=e.length,r=a?i:-1;(a?r--:++r<i)&&t(e[r],r,e););return n?et(e,a?0:r,a?r+1:i):et(e,a?r+1:0,a?i:r)}function Nn(e){return"function"==typeof e?e:b}function Fn(e,t){var n=Eo(e)?H:df;return n(e,Nn(t))}function On(e,t){for(var n=null==e?0:e.length;n--&&!(!1===t(e[n],n,e)););return e}function Pn(e,t){return e&&Af(e,t,Be)}function Mn(e,t){var n=Eo(e)?On:Bf;return n(e,Nn(t))}function Vn(e,t){return f(t,function(t){return[t,e[t]]})}function Wn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Gn(e){return function(t){var n=Gd(t);return"[object Map]"==n?Zt(t):"[object Set]"==n?Wn(t):Vn(t,e(t))}}function Hn(e){return e=Me(e),e&&jf.test(e)?e.replace(zf,Lf):e}function Un(e,t){for(var n=-1,a=null==e?0:e.length;++n<a;)if(!t(e[n],n,e))return!1;return!0}function qn(e,t){var n=!0;return df(e,function(e,a,i){return n=!!t(e,a,i),n}),n}function Zn(e){return e?wt(g(e),0,4294967295):0}function Xn(e,t,n,a){var i=e.length;for(n=g(n),0>n&&(n=-n>i?0:i+n),a=void 0===a||a>i?i:g(a),0>a&&(a+=i),a=n>a?0:Zn(a);n<a;)e[n++]=t;return e}function Kn(e,t){var n=[];return df(e,function(e,a,i){t(e,a,i)&&n.push(e)}),n}function Yn(e){return function(t,n,a){var i=Object(t);if(!be(t)){var r=cn(n,3);t=Be(t),n=function(e){return r(i[e],e,i)}}var o=e(t,n,a);return-1<o?i[r?t[o]:o]:void 0}}function Qn(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var i=null==n?0:g(n);return 0>i&&(i=Nf(a+i,0)),U(e,cn(t,3),i)}function $n(e,t,n){var a;return n(e,function(e,n,i){if(t(e,n,i))return a=n,!1}),a}function Jn(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var i=a-1;return void 0!==n&&(i=g(n),i=0>n?Of(a+i,0):Pf(i,a-1)),U(e,cn(t,3),i,!0)}function ea(e){return e&&e.length?e[0]:void 0}function ta(e,t){var n=-1,a=be(e)?Array(e.length):[];return df(e,function(e,i,r){a[++n]=t(e,i,r)}),a}function na(e,t){var n=Eo(e)?f:ta;return n(e,cn(t,3))}function aa(e,t){return Xe(na(e,t),1)}function ia(e){return Ye(function(t){var n=t.length,a=n,i=R.prototype.thru;for(e&&t.reverse();a--;){var r=t[a];if("function"!=typeof r)throw new TypeError("Expected a function");if(i&&!o&&"wrapper"==D(r))var o=new R([],!0)}for(a=o?a:n;++a<n;){r=t[a];var s=D(r),l="wrapper"==s?ns(r):void 0;o=l&&P(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?o[D(l[0])].apply(o,l[3]):1==r.length&&P(r)?o[s]():o.thru(r)}return function(){var e=arguments,a=e[0];if(o&&1==e.length&&Eo(a))return o.plant(a).value();for(var i=0,r=n?t[i].apply(this,e):a;++i<n;)r=t[i].call(this,r);return r}})}function ra(e,t){return At(t,function(t){return _(e[t])})}function oa(e,t){return e>t}function sa(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=h(t),n=h(n)),e(t,n)}}function la(e,t){return null!=e&&Kf.call(e,t)}function da(e,t,n){return e>=Qf(t,n)&&e<Yf(t,n)}function fa(e){return"string"==typeof e||!Eo(e)&&s(e)&&o(e)=="[object String]"}function ua(e,t){return f(t,function(t){return e[t]})}function ca(e){return null==e?[]:ua(e,Be(e))}function pa(e,t,n){for(var a=n?zn:Y,i=e[0].length,r=e.length,o=r,s=Array(r),l=1/0,d=[];o--;){var u=e[o];o&&t&&(u=f(u,ke(t))),l=$f(u.length,l),s[o]=!n&&(t||120<=i&&120<=u.length)?new Gt(o&&u):void 0}u=e[0];var c=-1,p=s[0];outer:for(;++c<i&&d.length<l;){var h=u[c],m=t?t(h):h;if(h=n||0!==h?h:0,p?!Ut(p,m):!a(d,m,n)){for(o=r;--o;){var g=s[o];if(g?!Ut(g,m):!a(e[o],m,n))continue outer}p&&p.push(m),d.push(h)}}return d}function ha(e){return Tn(e)?e:[]}function ma(e,t,n,a){return bn(e,function(e,i,r){t(a,n(e),i,r)}),a}function ga(e,t){return function(n,a){return ma(n,e,t(a),{})}}function ba(e,t){return 2>t.length?e:Ge(e,et(t,0,-1))}function _a(e,t,n){t=Ve(t,e),e=ba(e,t);var a=null==e?e:e[We(Dn(t))];return null==a?void 0:E(a,e,n)}function ya(e){if(null==e)return!0;if(be(e)&&(Eo(e)||"string"==typeof e||"function"==typeof e.splice||Ds(e)||Ws(e)||Bs(e)))return!e.length;var t=Gd(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(xe(e))return!Ae(e).length;for(var n in e)if(gu.call(e,n))return!1;return!0}function xa(e){return"number"==typeof e&&e==g(e)}function va(e){return"number"==typeof e||s(e)&&o(e)=="[object Number]"}function wa(e){return e===void 0}function Sa(e,t,n){for(var a=n+1;a--;)if(e[a]===t)return a;return a}function ka(e,t){return e<t}function Ta(e,t){var n={};return t=cn(t,3),bn(e,function(e,a,i){fe(n,a,t(e,a,i))}),n}function Ea(e,t,n){for(var a=-1,i=e.length;++a<i;){var r=e[a],o=t(r);if(null!=o&&(s===void 0?o===o&&!l(o):n(o,s)))var s=o,d=r}return d}function Aa(e,t){for(var n=-1,a=e.length,i;++n<a;){var r=t(e[n]);r!==void 0&&(i=i===void 0?r:i+r)}return i}function Ba(e,t){var n=null==e?0:e.length;return n?Aa(e,t)/n:Bu}function Ca(e,t,n){var a=Be(t),i=ra(t,a),r=!(p(n)&&"chain"in n)||!!n.chain,o=_(e);return H(i,function(n){var a=t[n];e[n]=a,o&&(e.prototype[n]=function(){var t=this.__chain__;if(r||t){var n=e(this.__wrapped__),i=n.__actions__=N(this.__actions__);return i.push({func:a,args:arguments,thisArg:e}),n.__chain__=t,n}return a.apply(e,qe([this.value()],arguments))})}),e}function Ia(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2]);}return!e.apply(this,t)}}function La(e){for(var t=[],n;!(n=e.next()).done;)t.push(n.value);return t}function za(e){if(!e)return[];if(be(e))return fa(e)?ot(e):N(e);if(ju&&e[ju])return La(e[ju]());var t=Gd(e),n=t=="[object Map]"?Zt:t=="[object Set]"?Xt:ca;return n(e)}function ja(e,t){var a=e.length;if(a)return t+=0>t?a:0,te(t,a)?e[t]:void 0}function Da(e,t){return t=Ve(t,e),e=ba(e,t),null==e||delete e[We(Dn(t))]}function Ra(e){return Qe(e)?void 0:e}function Na(e,t,n,a){if(!p(e))return e;t=Ve(t,e);for(var i=-1,r=t.length,o=e;null!=o&&++i<r;){var s=We(t[i]),l=n;if(i!=r-1){var d=o[s];l=a?a(d,s,o):void 0,l===void 0&&(l=p(d)?d:te(t[i+1])?[]:{})}ce(o,s,l),o=o[s]}return e}function Fa(e,t,n){for(var a=-1,i=t.length,r={};++a<i;){var o=t[a],s=Ge(e,o);n(s,o)&&Na(r,Ve(o,e),s)}return r}function Oa(e,t){if(null==e)return{};var n=f(jt(e),function(e){return[e]});return t=cn(t),Fa(e,n,function(e,n){return t(e,n[0])})}function Pa(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Ma(e,t){if(e!==t){var n=e!==void 0,a=null===e,i=e===e,r=l(e),o=t!==void 0,s=null===t,d=t===t,f=l(t);if(!s&&!f&&!r&&e>t||r&&o&&d&&!s&&!f||a&&o&&d||!n&&d||!i)return 1;if(!a&&!r&&!f&&e<t||f&&n&&i&&!a&&!r||s&&n&&i||!o&&i||!d)return-1}return 0}function Va(e,t,n){for(var a=-1,i=e.criteria,r=t.criteria,o=i.length,s=n.length;++a<o;){var l=Ma(i[a],r[a]);if(l){if(a>=s)return l;var d=n[a];return l*("desc"==d?-1:1)}}return e.index-t.index}function Wa(e,t,n){var a=-1;t=f(t.length?t:[b],ke(cn));var i=ta(e,function(e){var n=f(t,function(t){return t(e)});return{criteria:n,index:++a,value:e}});return Pa(i,function(e,t){return Va(e,t,n)})}function Ga(e){return Ye(function(t){return t=f(t,ke(cn)),me(function(n){var a=this;return e(t,function(e){return E(e,a,n)})})})}function Ha(e,t){var a="";if(!e||1>t||t>9007199254740991)return a;do t%2&&(a+=e),t=Pu(t/2),t&&(e+=e);while(t);return a}function Ua(e){for(var t=Qu.lastIndex=0;Qu.test(e);)++t;return t}function qa(e){return nt(e)?Ua(e):Mu(e)}function Za(e,t){t=t===void 0?" ":u(t);var n=t.length;if(2>n)return n?Ha(t,e):t;var a=Ha(t,$u(e/qa(t)));return nt(t)?tt(ot(a),0,e).join(""):a.slice(0,e)}function Xa(e,t){return Fa(e,t,function(t,n){return sn(e,n)})}function Ka(e,t,n,a){for(var i=n-1,r=e.length;++i<r;)if(a(e[i],t))return i;return-1}function Ya(e,t,n,a){var i=a?Ka:K,r=-1,o=t.length,s=e;for(e===t&&(t=N(t)),n&&(s=f(e,ke(n)));++r<o;)for(var l=0,d=t[r],u=n?n(d):d;-1<(l=i(s,u,l,a));)s!==e&&oc.call(s,l,1),oc.call(e,l,1);return e}function Qa(e,t){return e&&e.length&&t&&t.length?Ya(e,t):e}function $a(e,t){for(var n=e?t.length:0,a=n-1;n--;){var i=t[n];if(n==a||i!==r){var r=i;te(i)?dc.call(e,i,1):Da(e,i)}}return e}function Ja(e,t){return e+uc(cc()*(t-e+1))}function ei(e,t,n,a){for(var i=-1,r=gc(mc((t-e)/(n||1)),0),o=Array(r);r--;)o[a?r:++i]=e,e+=n;return o}function ti(e){return function(t,n,a){return a&&"number"!=typeof a&&_e(t,n,a)&&(n=a=void 0),t=m(t),void 0===n?(n=t,t=0):n=m(n),a=void 0===a?t<n?1:-1:m(a),ei(t,n,a,e)}}function ni(e,t,n,a,i){return i(e,function(e,i,r){n=a?(a=!1,e):t(n,e,i,r)}),n}function ai(e,t,n,a){var i=null==e?0:e.length;for(a&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function ii(e){return null==e?e:vc.call(e)}function ri(e){var t=e.length;return t?e[Ja(0,t-1)]:void 0}function oi(e){return ri(ca(e))}function si(e,t){var n=-1,a=e.length;for(t=void 0===t?a:t;++n<t;){var i=Ja(n,a-1),r=e[i];e[i]=e[n],e[n]=r}return e.length=t,e}function li(e,t){return si(N(e),wt(t,0,e.length))}function di(e,t){var n=ca(e);return si(n,wt(t,0,n.length))}function fi(e){return si(N(e))}function ui(e){return si(ca(e))}function ci(e,t){var n;return df(e,function(e,a,i){return n=t(e,a,i),!n}),!!n}function pi(e,t,n,a){t=n(t);for(var i=0,r=null==e?0:e.length,o=t!==t,s=null===t,d=l(t),f=void 0===t;i<r;){var u=Tc((i+r)/2),c=n(e[u]),p=c!==void 0,h=null===c,m=c===c,g=l(c);if(o)var b=a||m;else b=f?m&&(a||p):s?m&&p&&(a||!h):d?m&&p&&!h&&(a||!g):!(h||g)&&(a?c<=t:c<t);b?i=u+1:r=u}return Ec(r,4294967294)}function hi(e,t,n){var a=0,i=null==e?a:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;a<i;){var r=a+i>>>1,o=e[r];null!==o&&!l(o)&&(n?o<=t:o<t)?a=r+1:i=r}return i}return pi(e,t,b,n)}function mi(e,t){for(var n=-1,a=e.length,i=0,r=[];++n<a;){var o=e[n],s=t?t(o):o;if(!n||!ue(s,l)){var l=s;r[i++]=0===o?0:o}}return r}function gi(e,t,n,a){return void 0===e||ue(e,Cc[n])&&!Ic.call(a,n)?t:e}function bi(e){return"\\"+Lc[e]}function _i(e,t,n){var a=Rc.imports._.templateSettings||Rc;n&&_e(e,t,n)&&(t=void 0),e=Me(e),t=el({},t,a,gi);var i=el({},t.imports,a.imports,gi),r=Be(i),o=ua(i,r),s=0,l=t.interpolate||Mc,d="__p += '",f=RegExp((t.escape||Mc).source+"|"+l.source+"|"+(l===zc?Pc:Mc).source+"|"+(t.evaluate||Mc).source+"|$","g"),u="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"",c,p;e.replace(f,function(t,n,a,i,r,o){return a||(a=i),d+=e.slice(s,o).replace(Vc,bi),n&&(c=!0,d+="' +\n__e("+n+") +\n'"),r&&(p=!0,d+="';\n"+r+";\n__p += '"),a&&(d+="' +\n((__t = ("+a+")) == null ? '' : __t) +\n'"),s=o+t.length,t}),d+="';\n";var h=t.variable;h||(d="with (obj) {\n"+d+"\n}\n"),d=(p?d.replace(Nc,""):d).replace(Fc,"$1").replace(Oc,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(c?", __e = _.escape":"")+(p?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Sl(function(){return Function(r,u+"return "+d).apply(void 0,o)});if(m.source=d,$e(m))throw m;return m}function yi(e,t,n){var a=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return p(n)&&(a="leading"in n?!!n.leading:a,i="trailing"in n?!!n.trailing:i),Sn(e,t,{leading:a,maxWait:t,trailing:i})}function xi(e,t){return t(e)}function vi(e,t){var n=e;return n instanceof z&&(n=n.value()),ft(t,function(e,t){return t.func.apply(t.thisArg,qe([e],t.args))},n)}function wi(){return vi(this.__wrapped__,this.__actions__)}function Si(e,t){for(var n=e.length;n--&&-1<K(t,e[n],0););return n}function ki(e,t){for(var n=-1,a=e.length;++n<a&&-1<K(t,e[n],0););return n}function Ti(e,t){var n=30,a="...";if(p(t)){var i="separator"in t?t.separator:i;n="length"in t?g(t.length):n,a="omission"in t?u(t.omission):a}e=Me(e);var r=e.length;if(nt(e)){var o=ot(e);r=o.length}if(n>=r)return e;var s=n-qa(a);if(1>s)return a;var l=o?tt(o,0,s).join(""):e.slice(0,s);if(void 0===i)return l+a;if(o&&(s+=l.length-s),xu(i)){if(e.slice(s).search(i)){var d=l,f;for(i.global||(i=RegExp(i.source,Me(Uc.exec(i))+"g")),i.lastIndex=0;f=i.exec(d);)var c=f.index;l=l.slice(0,void 0===c?s:c)}}else if(e.indexOf(u(i),s)!=s){var h=l.lastIndexOf(i);-1<h&&(l=l.slice(0,h))}return l+a}function Ei(e,t,n){var a=-1,i=Y,r=e.length,o=!0,s=[],l=s;if(n)o=!1,i=zn;else if(r>=200){var d=t?null:Kc(e);if(d)return Xt(d);o=!1,i=Ut,l=new Gt}else l=t?[]:s;outer:for(;++a<r;){var f=e[a],u=t?t(f):f;if(f=n||0!==f?f:0,o&&u===u){for(var c=l.length;c--;)if(l[c]===u)continue outer;t&&l.push(u),s.push(f)}else i(l,u,n)||(l!==s&&l.push(u),s.push(f))}return s}function Ai(e){var t=++Jc;return Me(e)+t}function Bi(e){if(!(e&&e.length))return[];var t=0;return e=At(e,function(e){if(Tn(e))return t=ep(e.length,t),!0}),ve(t,function(t){return f(e,dn(t))})}function Ci(e,t){if(!(e&&e.length))return[];var n=Bi(e);return null==t?n:f(n,function(e){return E(t,void 0,e)})}function Ii(e,t,n,a){return Na(e,t,n(Ge(e,t)),a)}function Li(e,t,n){var a=e.length;if(2>a)return a?Ei(e[0]):[];for(var i=-1,r=Array(a);++i<a;)for(var o=e[i],s=-1;++s<a;)s!=i&&(r[i]=jn(r[i]||o,e[s],t,n));return Ei(Xe(r,1),t,n)}function zi(e,t,n){for(var a=-1,i=e.length,r=t.length,o={};++a<i;){var s=a<r?t[a]:void 0;n(o,e[a],s)}return o}function ji(e,t,n){for(var a=-1,i=n.length;++a<i;){var r=n[a],o=r.size;switch(r.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=xp(t,e+o);break;case"takeRight":e=yp(e,t-o);}}return{start:e,end:t}}function Di(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function Ri(e,t){return t={exports:{}},e(t,t.exports),t.exports}function Ni(e){for(var t=e.length;0<=--t;)e[t]=0}function Fi(e,t,n,a,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=a,this.max_length=i,this.has_stree=e&&e.length}function Oi(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Pi(e){return 256>e?Xp[e]:Xp[256+(e>>>7)]}function Mi(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=255&t>>>8}function Vi(e,t,n){e.bi_valid>16-n?(e.bi_buf|=65535&t<<e.bi_valid,Mi(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=65535&t<<e.bi_valid,e.bi_valid+=n)}function Wi(e,t,n){Vi(e,n[2*t],n[2*t+1])}function Gi(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(0<--t);return n>>>1}function Hi(e){16===e.bi_valid?(Mi(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function Ui(e,t){var a=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,d=t.stat_desc.max_length,u=0,c,p,g,b,_,y;for(b=0;b<=15;b++)e.bl_count[b]=0;for(a[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;573>c;c++)(p=e.heap[c],b=a[2*a[2*p+1]+1]+1,b>d&&(b=d,u++),a[2*p+1]=b,!(p>i))&&(e.bl_count[b]++,_=0,p>=l&&(_=s[p-l]),y=a[2*p],e.opt_len+=y*(b+_),o&&(e.static_len+=y*(r[2*p+1]+_)));if(0!==u){do{for(b=d-1;0===e.bl_count[b];)b--;e.bl_count[b]--,e.bl_count[b+1]+=2,e.bl_count[d]--,u-=2}while(0<u);for(b=d;0!==b;b--)for(p=e.bl_count[b];0!==p;)(g=e.heap[--c],!(g>i))&&(a[2*g+1]!==b&&(e.opt_len+=(b-a[2*g+1])*a[2*g],a[2*g+1]=b),p--)}}function qi(e,t,a){var i=Array(16),r=0,o,s;for(o=1;o<=15;o++)i[o]=r=r+a[o-1]<<1;for(s=0;s<=t;s++){var l=e[2*s+1];0!==l&&(e[2*s]=Gi(i[l]++,l))}}function Zi(){var e=Array(16),t,a,i,r,o;for(i=0,r=0;r<28;r++)for(Yp[r]=i,t=0;t<1<<Wp[r];t++)Kp[i++]=r;for(Kp[i-1]=r,o=0,r=0;16>r;r++)for(Qp[r]=o,t=0;t<1<<Gp[r];t++)Xp[o++]=r;for(o>>=7;r<30;r++)for(Qp[r]=o<<7,t=0;t<1<<Gp[r]-7;t++)Xp[256+o++]=r;for(a=0;a<=15;a++)e[a]=0;for(t=0;143>=t;)qp[2*t+1]=8,t++,e[8]++;for(;255>=t;)qp[2*t+1]=9,t++,e[9]++;for(;279>=t;)qp[2*t+1]=7,t++,e[7]++;for(;287>=t;)qp[2*t+1]=8,t++,e[8]++;for(qi(qp,287,e),t=0;t<30;t++)Zp[2*t+1]=5,Zp[2*t]=Gi(t,5);ih=new Fi(qp,Wp,257,286,15),rh=new Fi(Zp,Gp,0,30,15),oh=new Fi([],Hp,0,19,7)}function Xi(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Ki(e){8<e.bi_valid?Mi(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Yi(e,t,n,a){Ki(e),a&&(Mi(e,n),Mi(e,~n)),zp.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function Qi(e,t,n,a){var i=2*t,r=2*n;return e[i]<e[r]||e[i]===e[r]&&a[t]<=a[n]}function $i(e,t,n){for(var a=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&Qi(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Qi(t,a,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=a}function Ji(e,t,n){var a=0,i,r,o,s;if(0!==e.last_lit)do i=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],r=e.pending_buf[e.l_buf+a],a++,0===i?Wi(e,r,t):(o=Kp[r],Wi(e,o+256+1,t),s=Wp[o],0!==s&&(r-=Yp[o],Vi(e,r,s)),i--,o=Pi(i),Wi(e,o,n),s=Gp[o],0!==s&&(i-=Qp[o],Vi(e,i,s)));while(a<e.last_lit);Wi(e,256,t)}function er(e,t){var a=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,o=t.stat_desc.elems,s=-1,l,d,f;for(e.heap_len=0,e.heap_max=573,l=0;l<o;l++)0===a[2*l]?a[2*l+1]=0:(e.heap[++e.heap_len]=s=l,e.depth[l]=0);for(;2>e.heap_len;)f=e.heap[++e.heap_len]=2>s?++s:0,a[2*f]=1,e.depth[f]=0,e.opt_len--,r&&(e.static_len-=i[2*f+1]);for(t.max_code=s,l=e.heap_len>>1;1<=l;l--)$i(e,a,l);f=o;do l=e.heap[1],e.heap[1]=e.heap[e.heap_len--],$i(e,a,1),d=e.heap[1],e.heap[--e.heap_max]=l,e.heap[--e.heap_max]=d,a[2*f]=a[2*l]+a[2*d],e.depth[f]=(e.depth[l]>=e.depth[d]?e.depth[l]:e.depth[d])+1,a[2*l+1]=a[2*d+1]=f,e.heap[1]=f++,$i(e,a,1);while(2<=e.heap_len);e.heap[--e.heap_max]=e.heap[1],Ui(e,t),qi(a,s,e.bl_count)}function tr(e,t,a){var i=-1,r=t[1],o=0,s=7,l=4,d,f;for(0===r&&(s=138,l=3),t[2*(a+1)+1]=65535,d=0;d<=a;d++){if(f=r,r=t[2*(d+1)+1],++o<s&&f===r)continue;else o<l?e.bl_tree[2*f]+=o:0===f?10>=o?e.bl_tree[34]++:e.bl_tree[36]++:(f!==i&&e.bl_tree[2*f]++,e.bl_tree[32]++);o=0,i=f,0===r?(s=138,l=3):f===r?(s=6,l=3):(s=7,l=4)}}function nr(e,t,a){var i=-1,r=t[1],o=0,s=7,l=4,d,f;for(0===r&&(s=138,l=3),d=0;d<=a;d++){if(f=r,r=t[2*(d+1)+1],++o<s&&f===r)continue;else if(o<l)do Wi(e,f,e.bl_tree);while(0!=--o);else 0===f?10>=o?(Wi(e,17,e.bl_tree),Vi(e,o-3,3)):(Wi(e,18,e.bl_tree),Vi(e,o-11,7)):(f!==i&&(Wi(e,f,e.bl_tree),o--),Wi(e,16,e.bl_tree),Vi(e,o-3,2));o=0,i=f,0===r?(s=138,l=3):f===r?(s=6,l=3):(s=7,l=4)}}function ar(e){var t;for(tr(e,e.dyn_ltree,e.l_desc.max_code),tr(e,e.dyn_dtree,e.d_desc.max_code),er(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*Up[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function ir(e,t,n,a){var i;for(Vi(e,t-257,5),Vi(e,n-1,5),Vi(e,a-4,4),i=0;i<a;i++)Vi(e,e.bl_tree[2*Up[i]+1],3);nr(e,e.dyn_ltree,t-1),nr(e,e.dyn_dtree,n-1)}function rr(e){var t=4093624447,a;for(a=0;31>=a;a++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*a])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(a=32;a<256;a++)if(0!==e.dyn_ltree[2*a])return 1;return 0}function or(e){$p||(Zi(),$p=!0),e.l_desc=new Oi(e.dyn_ltree,ih),e.d_desc=new Oi(e.dyn_dtree,rh),e.bl_desc=new Oi(e.bl_tree,oh),e.bi_buf=0,e.bi_valid=0,Xi(e)}function sr(e,t,n,a){Vi(e,0+(a?1:0),3),Yi(e,t,n,!0)}function lr(e,t){return e.msg=ah[t],t}function dr(e){return(e<<1)-(4<e?9:0)}function fr(e){for(var t=e.length;0<=--t;)e[t]=0}function ur(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out);0===n||(zp.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function cr(e,t){Jp._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ur(e.strm)}function pr(e,t){e.pending_buf[e.pending++]=t}function hr(e,t){e.pending_buf[e.pending++]=255&t>>>8,e.pending_buf[e.pending++]=255&t}function mr(e,t,n,a){var i=e.avail_in;return(i>a&&(i=a),0===i)?0:(e.avail_in-=i,zp.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=eh(e.adler,t,i,n):2===e.state.wrap&&(e.adler=nh(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function gr(e,t){var n=e.max_chain_length,a=e.strstart,i=e.prev_length,r=e.nice_match,o=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,s=e.window,l=e.w_mask,d=e.prev,f=e.strstart+258,u=s[a+i-1],c=s[a+i],p,h;e.prev_length>=e.good_match&&(n>>=2),r>e.lookahead&&(r=e.lookahead);do{if(p=t,s[p+i]!==c||s[p+i-1]!==u||s[p]!==s[a]||s[++p]!==s[a+1])continue;a+=2,p++;do;while(s[++a]===s[++p]&&s[++a]===s[++p]&&s[++a]===s[++p]&&s[++a]===s[++p]&&s[++a]===s[++p]&&s[++a]===s[++p]&&s[++a]===s[++p]&&s[++a]===s[++p]&&a<f);if(h=258-(f-a),a=f-258,h>i){if(e.match_start=t,i=h,h>=r)break;u=s[a+i-1],c=s[a+i]}}while((t=d[t&l])>o&&0!=--n);return i<=e.lookahead?i:e.lookahead}function br(e){var t=e.w_size,a,i,r,o,s;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-262)){zp.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,a=i;do r=e.head[--a],e.head[a]=r>=t?r-t:0;while(--i);i=t,a=i;do r=e.prev[--a],e.prev[a]=r>=t?r-t:0;while(--i);o+=t}if(0===e.strm.avail_in)break;if(i=mr(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=i,3<=e.lookahead+e.insert)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+3-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(3>e.lookahead+e.insert)););}while(262>e.lookahead&&0!==e.strm.avail_in)}function _r(e,t){for(var n,a;;){if(262>e.lookahead){if(br(e),262>e.lookahead&&0===t)return 1;if(0===e.lookahead)break}if(n=0,3<=e.lookahead&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=gr(e,n)),!(3<=e.match_length))a=Jp._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;else if(a=Jp._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&3<=e.lookahead){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;if(a&&(cr(e,!1),0===e.strm.avail_out))return 1}return e.insert=2>e.strstart?e.strstart:2,4===t?(cr(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(cr(e,!1),0===e.strm.avail_out)?1:2}function yr(e,t){for(var n,a,i;;){if(262>e.lookahead){if(br(e),262>e.lookahead&&0===t)return 1;if(0===e.lookahead)break}if(n=0,3<=e.lookahead&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=gr(e,n),5>=e.match_length&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),3<=e.prev_length&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,a=Jp._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,a&&(cr(e,!1),0===e.strm.avail_out))return 1}else if(!e.match_available)e.match_available=1,e.strstart++,e.lookahead--;else if(a=Jp._tr_tally(e,0,e.window[e.strstart-1]),a&&cr(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}return e.match_available&&(a=Jp._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=2>e.strstart?e.strstart:2,4===t?(cr(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(cr(e,!1),0===e.strm.avail_out)?1:2}function xr(e,t){for(var n=e.window,a,i,r,o;;){if(258>=e.lookahead){if(br(e),258>=e.lookahead&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,3<=e.lookahead&&0<e.strstart&&(r=e.strstart-1,i=n[r],i===n[++r]&&i===n[++r]&&i===n[++r])){o=e.strstart+258;do;while(i===n[++r]&&i===n[++r]&&i===n[++r]&&i===n[++r]&&i===n[++r]&&i===n[++r]&&i===n[++r]&&i===n[++r]&&r<o);e.match_length=258-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(3<=e.match_length?(a=Jp._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(a=Jp._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),a&&(cr(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(cr(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(cr(e,!1),0===e.strm.avail_out)?1:2}function vr(e,t){for(var n;;){if(0===e.lookahead&&(br(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=Jp._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(cr(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(cr(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(cr(e,!1),0===e.strm.avail_out)?1:2}function wr(e,t,n,a,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=a,this.func=i}function Sr(e){e.window_size=2*e.w_size,fr(e.head),e.max_lazy_match=sh[e.level].max_lazy,e.good_match=sh[e.level].good_length,e.nice_match=sh[e.level].nice_length,e.max_chain_length=sh[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}function kr(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new zp.Buf16(1146),this.dyn_dtree=new zp.Buf16(122),this.bl_tree=new zp.Buf16(78),fr(this.dyn_ltree),fr(this.dyn_dtree),fr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new zp.Buf16(16),this.heap=new zp.Buf16(573),fr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new zp.Buf16(573),fr(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Tr(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,t=e.state,t.pending=0,t.pending_out=0,0>t.wrap&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=0,Jp._tr_init(t),0):lr(e,-2)}function Er(e){var t=Tr(e);return 0===t&&Sr(e.state),t}function Ar(e,t,n,a,i,r){if(!e)return-2;var o=1;if(-1===t&&(t=6),0>a?(o=0,a=-a):15<a&&(o=2,a-=16),1>i||9<i||8!==n||8>a||15<a||0>t||9<t||0>r||4<r)return lr(e,-2);8===a&&(a=9);var l=new kr;return e.state=l,l.strm=e,l.wrap=o,l.gzhead=null,l.w_bits=a,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new zp.Buf8(2*l.w_size),l.head=new zp.Buf16(l.hash_size),l.prev=new zp.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new zp.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=r,l.method=n,Er(e)}function Br(e,t){var n,a,i,r;if(!e||!e.state||5<t||0>t)return e?lr(e,-2):-2;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||666===a.status&&4!==t)return lr(e,0===e.avail_out?-5:-2);if(a.strm=e,n=a.last_flush,a.last_flush=t,42===a.status)if(2===a.wrap)e.adler=0,pr(a,31),pr(a,139),pr(a,8),a.gzhead?(pr(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),pr(a,255&a.gzhead.time),pr(a,255&a.gzhead.time>>8),pr(a,255&a.gzhead.time>>16),pr(a,255&a.gzhead.time>>24),pr(a,9===a.level?2:2<=a.strategy||2>a.level?4:0),pr(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(pr(a,255&a.gzhead.extra.length),pr(a,255&a.gzhead.extra.length>>8)),a.gzhead.hcrc&&(e.adler=nh(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(pr(a,0),pr(a,0),pr(a,0),pr(a,0),pr(a,0),pr(a,9===a.level?2:2<=a.strategy||2>a.level?4:0),pr(a,3),a.status=113);else{var o=8+(a.w_bits-8<<4)<<8,l=-1;l=2<=a.strategy||2>a.level?0:6>a.level?1:6===a.level?2:3,o|=l<<6,0!==a.strstart&&(o|=32),o+=31-o%31,a.status=113,hr(a,o),0!==a.strstart&&(hr(a,e.adler>>>16),hr(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(i=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&!(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(e.adler=nh(e.adler,a.pending_buf,a.pending-i,i)),ur(e),i=a.pending,a.pending===a.pending_buf_size));)pr(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>i&&(e.adler=nh(e.adler,a.pending_buf,a.pending-i,i)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){i=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(e.adler=nh(e.adler,a.pending_buf,a.pending-i,i)),ur(e),i=a.pending,a.pending===a.pending_buf_size)){r=1;break}r=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,pr(a,r)}while(0!==r);a.gzhead.hcrc&&a.pending>i&&(e.adler=nh(e.adler,a.pending_buf,a.pending-i,i)),0===r&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){i=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(e.adler=nh(e.adler,a.pending_buf,a.pending-i,i)),ur(e),i=a.pending,a.pending===a.pending_buf_size)){r=1;break}r=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,pr(a,r)}while(0!==r);a.gzhead.hcrc&&a.pending>i&&(e.adler=nh(e.adler,a.pending_buf,a.pending-i,i)),0===r&&(a.status=103)}else a.status=103;if(103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&ur(e),a.pending+2<=a.pending_buf_size&&(pr(a,255&e.adler),pr(a,255&e.adler>>8),e.adler=0,a.status=113)):a.status=113),0!==a.pending){if(ur(e),0===e.avail_out)return a.last_flush=-1,0;}else if(0===e.avail_in&&dr(t)<=dr(n)&&4!==t)return lr(e,-5);if(666===a.status&&0!==e.avail_in)return lr(e,-5);if(0!==e.avail_in||0!==a.lookahead||0!==t&&666!==a.status){var d=2===a.strategy?vr(a,t):3===a.strategy?xr(a,t):sh[a.level].func(a,t);if((3===d||4===d)&&(a.status=666),1===d||3===d)return 0===e.avail_out&&(a.last_flush=-1),0;if(2===d&&(1===t?Jp._tr_align(a):5!==t&&(Jp._tr_stored_block(a,0,0,!1),3===t&&(fr(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),ur(e),0===e.avail_out))return a.last_flush=-1,0}return 4===t?0>=a.wrap?1:(2===a.wrap?(pr(a,255&e.adler),pr(a,255&e.adler>>8),pr(a,255&e.adler>>16),pr(a,255&e.adler>>24),pr(a,255&e.total_in),pr(a,255&e.total_in>>8),pr(a,255&e.total_in>>16),pr(a,255&e.total_in>>24)):(hr(a,e.adler>>>16),hr(a,65535&e.adler)),ur(e),0<a.wrap&&(a.wrap=-a.wrap),0===a.pending?1:0):0}function Cr(e,t){if(65534>t&&(e.subarray&&fh||!e.subarray&&dh))return uo.apply(null,zp.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=uo(e[a]);return n}function Ir(e){if(!(this instanceof Ir))return new Ir(e);this.options=zp.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&16>t.windowBits&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new hh,this.strm.avail_out=0;var n=lh.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(ah[n]);if(t.header&&lh.deflateSetHeader(this.strm,t.header),t.dictionary){var a;if(a="string"==typeof t.dictionary?ph.string2buf(t.dictionary):"[object ArrayBuffer]"===mh.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=lh.deflateSetDictionary(this.strm,a),0!==n)throw new Error(ah[n]);this._dict_set=!0}}function Lr(e,t){var n=new Ir(t);if(n.push(e,!0),n.err)throw n.msg||ah[n.err];return n.result}function zr(e){return(255&e>>>24)+(65280&e>>>8)+((65280&e)<<8)+((255&e)<<24)}function jr(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new zp.Buf16(320),this.work=new zp.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Dr(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new zp.Buf32(852),t.distcode=t.distdyn=new zp.Buf32(592),t.sane=1,t.back=-1,0):-2}function Rr(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,Dr(e)):-2}function Nr(e,t){var n,a;return e&&e.state?(a=e.state,0>t?(n=0,t=-t):(n=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||15<t))?-2:(null!==a.window&&a.wbits!==t&&(a.window=null),a.wrap=n,a.wbits=t,Rr(e)):-2}function Fr(e,t){var n,a;return e?(a=new jr,e.state=a,a.window=null,n=Nr(e,t),0!==n&&(e.state=null),n):-2}function Or(e){if(jh){var t;for(Oh=new zp.Buf32(512),Ph=new zp.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(zh(1,e.lens,0,288,Oh,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;zh(2,e.lens,0,32,Ph,0,e.work,{bits:5}),jh=!1}e.lencode=Oh,e.lenbits=9,e.distcode=Ph,e.distbits=5}function Pr(e,t,n,a){var i=e.state,r;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new zp.Buf8(i.wsize)),a>=i.wsize?(zp.arraySet(i.window,t,n-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(r=i.wsize-i.wnext,r>a&&(r=a),zp.arraySet(i.window,t,n-a,r,i.wnext),a-=r,a?(zp.arraySet(i.window,t,n-a,a,0),i.wnext=a,i.whave=i.wsize):(i.wnext+=r,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=r))),0}function Mr(e){if(!(this instanceof Mr))return new Mr(e);this.options=zp.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&16>t.windowBits&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),0<=t.windowBits&&16>t.windowBits&&!(e&&e.windowBits)&&(t.windowBits+=32),15<t.windowBits&&48>t.windowBits&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new hh,this.strm.avail_out=0;var n=Dh.inflateInit2(this.strm,t.windowBits);if(n!==Rh.Z_OK)throw new Error(ah[n]);this.header=new Nh,Dh.inflateGetHeader(this.strm,this.header)}function Vr(e,t){var n=new Mr(t);if(n.push(e,!0),n.err)throw n.msg||ah[n.err];return n.result}function Wr(e){return e.map(function(e){var t=e.color,n=e.offset;return{color:Gr(t),offset:n}})}function Gr(e){if("transparent"===e)return[1,1,1,0];var t=e.match(Uh);if(null===t)throw new Error("'"+e+"' is not a valid RGB color expression.");var n=t[1],a=t[2],i=t[3];return[+n/255,+a/255,+i/255,1]}function Hr(){var e=new Uint8Array([170,187]),t=new Uint16Array(e.buffer);return 48042===t[0]}function Ur(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];return Array(n).fill(void 0).map(function(e,t){return t})}var a=e[0],n=e[1],i=e[2],r=void 0===i?1:i;if(0===r)throw new Error("Argument step must be nonzero.");for(var o=[],s=a;0<r?s<n:s>n;s+=r)o.push(s);return o}function qr(e,t,i){return n(this,void 0,void 0,function(){return a(this,function(){return[2,new Promise(function(t,n){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.addEventListener("load",function(){t(a.response)}),a.addEventListener("error",n),a.send(null)}).then(function(e){return new Uint8Array(Hh(e).data)}).catch(function(){return qh(t,i)})]})})}function Zr(e,t){return[2/e,0,0,0,0,-2/t,0,0,0,0,1,0,-1,1,0,1]}function Xr(e){var t=e[0],n=t.x,a=t.y,i=e[1],r=i.x,o=i.y;return[[n,a],[r,a],[n,o],[r,o]]}function Kr(e){return new Promise(function(t){return setTimeout(t,e)})}function Yr(e,t){var n=e.z-t.z,a=e.x-t.x,i=e.y-t.y;return 0==n?0===a?i:a:n}function Qr(e,t){return e.length===t.length&&e.every(function(e,n){return 0===Yr(e,t[n])})}function $r(e){return e}function Jr(e,t){var n=Object.keys(t).map(function(e){return"#define "+e+" "+t[e]+"\n"}).join("");return n+"\n"+e}function eo(e,t){return{uniforms:{nodataValue:t,littleEndian:Zh,transformMatrix:function(e){var t=e.viewportWidth,n=e.viewportHeight;return Zr(t,n)}},attributes:{position:function(t,n){var a=n.canvasCoordinates,i=a[0],r=a[1],o=[i+e,r+e],s=o[0],l=o[1];return[[i,r],[s,r],[i,l],[s,l]]}},depth:{enable:!1},primitive:"triangle strip",count:4,viewport:function(e,t){var n=t.canvasSize,a=n[0],i=n[1];return{width:a,height:i}}}}function to(e,t){return e(po({},t,{vert:"#define GLSLIFY 1\nuniform mat4 transformMatrix;\n\nattribute vec2 position;\nattribute vec2 texCoord;\n\nvarying vec2 vTexCoord;\n\nvoid main() {\n  vTexCoord = texCoord;\n  gl_Position = transformMatrix * vec4(position, 0.0, 1.0);\n}\n",frag:Jr("#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#define GLSLIFY 1\n#endif\n\n// Denormalize 8-bit color channels to integers in the range 0 to 255.\nivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n  ivec4 bytes = ivec4(inputFloats * 255.0);\n  return (\n    littleEndian\n    ? bytes.abgr\n    : bytes\n  );\n}\n\n// Break the four bytes down into an array of 32 bits.\nvoid bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n  for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n    float acc = float(bytes[channelIndex]);\n    for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n      float powerOfTwo = exp2(float(indexInByte));\n      bool bit = acc >= powerOfTwo;\n      bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n      acc = mod(acc, powerOfTwo);\n    }\n  }\n}\n\n// Compute the exponent of the 32-bit float.\nfloat getExponent(bool bits[32]) {\n  const int startIndex = 1;\n  const int bitStringLength = 8;\n  const int endBeforeIndex = startIndex + bitStringLength;\n  float acc = 0.0;\n  int pow2 = bitStringLength - 1;\n  for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n    acc += float(bits[bitIndex]) * exp2(float(pow2--));\n  }\n  return acc;\n}\n\n// Compute the mantissa of the 32-bit float.\nfloat getMantissa(bool bits[32], bool subnormal) {\n  const int startIndex = 9;\n  const int bitStringLength = 23;\n  const int endBeforeIndex = startIndex + bitStringLength;\n  // Leading/implicit/hidden bit convention:\n  // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n  float acc = float(!subnormal) * exp2(float(bitStringLength));\n  int pow2 = bitStringLength - 1;\n  for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n    acc += float(bits[bitIndex]) * exp2(float(pow2--));\n  }\n  return acc;\n}\n\n// Parse the float from its 32 bits.\nfloat bitsToFloat(bool bits[32]) {\n  float signBit = float(bits[0]) * -2.0 + 1.0;\n  float exponent = getExponent(bits);\n  bool subnormal = abs(exponent - 0.0) < 0.01;\n  float mantissa = getMantissa(bits, subnormal);\n  float exponentBias = 127.0;\n  return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n}\n\n// Decode a 32-bit float from the RGBA color channels of a texel.\nfloat rgbaToFloat(vec4 texelRGBA, bool littleEndian) {\n  ivec4 rgbaBytes = floatsToBytes(texelRGBA, littleEndian);\n  bool bits[32];\n  bytesToBits(rgbaBytes, bits);\n  return bitsToFloat(bits);\n}\n\n#ifndef RELATIVE_TOLERANCE\n#define RELATIVE_TOLERANCE 0.0001\n#endif\n\nbool isCloseEnough(float a, float b) {\n  return abs(a - b) <= max(abs(a), abs(b)) * RELATIVE_TOLERANCE;\n}\n\nstruct ScaleStop {\n  float offset;\n  vec4 color;\n};\n\n#ifndef DEFAULT_COLOR\n#define DEFAULT_COLOR vec4(0.0)\n#endif\n\n#ifndef SCALE_MAX_LENGTH\n#define SCALE_MAX_LENGTH 16\n#endif\n\n#ifndef SENTINEL_MAX_LENGTH\n#define SENTINEL_MAX_LENGTH 16\n#endif\n\nvec4 computeColor(\n  float inputVal,\n  ScaleStop colorScale[SCALE_MAX_LENGTH],\n  ScaleStop sentinelValues[SENTINEL_MAX_LENGTH],\n  int colorScaleLength_0,\n  int sentinelValuesLength_0\n) {\n  // Compare the value against any sentinel values, if defined.\n  if (sentinelValuesLength_0 > 0) {\n    for (int i_0 = 0; i_0 < SENTINEL_MAX_LENGTH; ++i_0) {\n      if (i_0 == sentinelValuesLength_0) {\n        break;\n      }\n      ScaleStop sentinel = sentinelValues[i_0];\n      if (isCloseEnough(inputVal, sentinel.offset)) {\n        return sentinel.color;\n      }\n    }\n  }\n\n  // Do linear interpolation using the color scale, if defined.\n  if (colorScaleLength_0 > 0) {\n    // If value below color scale range, clamp to lowest color stop.\n    if (inputVal < colorScale[0].offset) {\n      return colorScale[0].color;\n    } else {\n      for (int i = 0; i < SCALE_MAX_LENGTH; ++i) {\n        // If value above color scale range, clamp to highest color stop.\n        if (i == colorScaleLength_0) {\n          return colorScale[i - 1].color;\n        } else if (inputVal <= colorScale[i + 1].offset) {\n          float percent = (inputVal - colorScale[i].offset)\n            / (colorScale[i + 1].offset - colorScale[i].offset);\n          return mix(colorScale[i].color, colorScale[i + 1].color, percent);\n        }\n      }\n    }\n  }\n\n  return DEFAULT_COLOR;\n}\n\nuniform ScaleStop colorScale[SCALE_MAX_LENGTH];\nuniform int colorScaleLength;\n\nuniform ScaleStop sentinelValues[SENTINEL_MAX_LENGTH];\nuniform int sentinelValuesLength;\n\nuniform float nodataValue;\nuniform sampler2D texture;\nuniform bool littleEndian;\n\nvarying vec2 vTexCoord;\n\nvoid main() {\n  vec4 rgbaFloats = texture2D(texture, vTexCoord);\n  float pixelFloatValue = rgbaToFloat(rgbaFloats, littleEndian);\n  if (isCloseEnough(pixelFloatValue, nodataValue)) {\n    discard;\n  }\n  gl_FragColor = computeColor(pixelFloatValue, colorScale, sentinelValues, colorScaleLength, sentinelValuesLength);\n}\n",Qh),uniforms:po({},t.uniforms,Kh,Yh,{colorScaleLength:function(e,t){var n=t.colorScale;return n.length},sentinelValuesLength:function(e,t){var n=t.sentinelValues;return n.length},texture:function(e,t){var n=t.texture;return n}}),attributes:po({},t.attributes,{texCoord:function(e,t){var n=t.textureBounds;return Xr(n)}})}))}function no(e,t){return e(po({},t,{vert:"#define GLSLIFY 1\nuniform mat4 transformMatrix;\n\nattribute vec2 position;\nattribute vec2 texCoordA;\nattribute vec2 texCoordB;\n\nvarying vec2 vTexCoordA;\nvarying vec2 vTexCoordB;\n\nvoid main() {\n  vTexCoordA = texCoordA;\n  vTexCoordB = texCoordB;\n  gl_Position = transformMatrix * vec4(position, 0.0, 1.0);\n}\n",frag:Jr("#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#define GLSLIFY 1\n#endif\n\n#define TRANSPARENT vec4(0.0)\n\n// Denormalize 8-bit color channels to integers in the range 0 to 255.\nivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n  ivec4 bytes = ivec4(inputFloats * 255.0);\n  return (\n    littleEndian\n    ? bytes.abgr\n    : bytes\n  );\n}\n\n// Break the four bytes down into an array of 32 bits.\nvoid bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n  for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n    float acc = float(bytes[channelIndex]);\n    for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n      float powerOfTwo = exp2(float(indexInByte));\n      bool bit = acc >= powerOfTwo;\n      bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n      acc = mod(acc, powerOfTwo);\n    }\n  }\n}\n\n// Compute the exponent of the 32-bit float.\nfloat getExponent(bool bits[32]) {\n  const int startIndex = 1;\n  const int bitStringLength = 8;\n  const int endBeforeIndex = startIndex + bitStringLength;\n  float acc = 0.0;\n  int pow2 = bitStringLength - 1;\n  for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n    acc += float(bits[bitIndex]) * exp2(float(pow2--));\n  }\n  return acc;\n}\n\n// Compute the mantissa of the 32-bit float.\nfloat getMantissa(bool bits[32], bool subnormal) {\n  const int startIndex = 9;\n  const int bitStringLength = 23;\n  const int endBeforeIndex = startIndex + bitStringLength;\n  // Leading/implicit/hidden bit convention:\n  // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n  float acc = float(!subnormal) * exp2(float(bitStringLength));\n  int pow2 = bitStringLength - 1;\n  for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n    acc += float(bits[bitIndex]) * exp2(float(pow2--));\n  }\n  return acc;\n}\n\n// Parse the float from its 32 bits.\nfloat bitsToFloat(bool bits[32]) {\n  float signBit = float(bits[0]) * -2.0 + 1.0;\n  float exponent = getExponent(bits);\n  bool subnormal = abs(exponent - 0.0) < 0.01;\n  float mantissa = getMantissa(bits, subnormal);\n  float exponentBias = 127.0;\n  return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n}\n\n// Decode a 32-bit float from the RGBA color channels of a texel.\nfloat rgbaToFloat(vec4 texelRGBA, bool littleEndian) {\n  ivec4 rgbaBytes = floatsToBytes(texelRGBA, littleEndian);\n  bool bits[32];\n  bytesToBits(rgbaBytes, bits);\n  return bitsToFloat(bits);\n}\n\n#ifndef RELATIVE_TOLERANCE\n#define RELATIVE_TOLERANCE 0.0001\n#endif\n\nbool isCloseEnough(float a, float b) {\n  return abs(a - b) <= max(abs(a), abs(b)) * RELATIVE_TOLERANCE;\n}\n\nstruct ScaleStop {\n  float offset;\n  vec4 color;\n};\n\n#ifndef DEFAULT_COLOR\n#define DEFAULT_COLOR vec4(0.0)\n#endif\n\n#ifndef SCALE_MAX_LENGTH\n#define SCALE_MAX_LENGTH 16\n#endif\n\n#ifndef SENTINEL_MAX_LENGTH\n#define SENTINEL_MAX_LENGTH 16\n#endif\n\nvec4 computeColor(\n  float inputVal,\n  ScaleStop colorScale[SCALE_MAX_LENGTH],\n  ScaleStop sentinelValues[SENTINEL_MAX_LENGTH],\n  int colorScaleLength_0,\n  int sentinelValuesLength_0\n) {\n  // Compare the value against any sentinel values, if defined.\n  if (sentinelValuesLength_0 > 0) {\n    for (int i_0 = 0; i_0 < SENTINEL_MAX_LENGTH; ++i_0) {\n      if (i_0 == sentinelValuesLength_0) {\n        break;\n      }\n      ScaleStop sentinel = sentinelValues[i_0];\n      if (isCloseEnough(inputVal, sentinel.offset)) {\n        return sentinel.color;\n      }\n    }\n  }\n\n  // Do linear interpolation using the color scale, if defined.\n  if (colorScaleLength_0 > 0) {\n    // If value below color scale range, clamp to lowest color stop.\n    if (inputVal < colorScale[0].offset) {\n      return colorScale[0].color;\n    } else {\n      for (int i = 0; i < SCALE_MAX_LENGTH; ++i) {\n        // If value above color scale range, clamp to highest color stop.\n        if (i == colorScaleLength_0) {\n          return colorScale[i - 1].color;\n        } else if (inputVal <= colorScale[i + 1].offset) {\n          float percent = (inputVal - colorScale[i].offset)\n            / (colorScale[i + 1].offset - colorScale[i].offset);\n          return mix(colorScale[i].color, colorScale[i + 1].color, percent);\n        }\n      }\n    }\n  }\n\n  return DEFAULT_COLOR;\n}\n\nuniform ScaleStop colorScale[SCALE_MAX_LENGTH];\nuniform int colorScaleLength;\n\nuniform ScaleStop sentinelValues[SENTINEL_MAX_LENGTH];\nuniform int sentinelValuesLength;\n\nuniform float nodataValue;\nuniform sampler2D textureA;\nuniform sampler2D textureB;\nuniform bool littleEndian;\nuniform float interpolationFraction;\n\nvarying vec2 vTexCoordA;\nvarying vec2 vTexCoordB;\n\nbool isSentinelValue(ScaleStop sentinelValues[SENTINEL_MAX_LENGTH], int len, float value) {\n  for (int i = 0; i < SENTINEL_MAX_LENGTH; ++i) {\n    if (i == len) {\n      break;\n    }\n    if (isCloseEnough(sentinelValues[i].offset, value)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nvoid main() {\n  if (interpolationFraction <= 0.0) {\n    vec4 rgbaFloats = texture2D(textureA, vTexCoordA);\n    float pixelFloatValue = rgbaToFloat(rgbaFloats, littleEndian);\n    if (isCloseEnough(pixelFloatValue, nodataValue)) {\n      discard;\n    }\n    gl_FragColor = computeColor(pixelFloatValue, colorScale, sentinelValues, colorScaleLength, sentinelValuesLength);\n  } else if (interpolationFraction >= 1.0) {\n    vec4 rgbaFloats = texture2D(textureB, vTexCoordB);\n    float pixelFloatValue = rgbaToFloat(rgbaFloats, littleEndian);\n    if (isCloseEnough(pixelFloatValue, nodataValue)) {\n      discard;\n    }\n    gl_FragColor = computeColor(pixelFloatValue, colorScale, sentinelValues, colorScaleLength, sentinelValuesLength);\n  } else {\n    vec4 rgbaFloatsA = texture2D(textureA, vTexCoordA);\n    float pixelFloatValueA = rgbaToFloat(rgbaFloatsA, littleEndian);\n    vec4 rgbaFloatsB = texture2D(textureB, vTexCoordB);\n    float pixelFloatValueB = rgbaToFloat(rgbaFloatsB, littleEndian);\n    bool aIsNodata = isCloseEnough(pixelFloatValueA, nodataValue);\n    bool bIsNodata = isCloseEnough(pixelFloatValueB, nodataValue);\n    if (aIsNodata && bIsNodata) {\n      discard;\n    } else if (\n      aIsNodata\n      || bIsNodata\n      || colorScaleLength == 0\n      || isSentinelValue(sentinelValues, sentinelValuesLength, pixelFloatValueA)\n      || isSentinelValue(sentinelValues, sentinelValuesLength, pixelFloatValueB)\n    ) {\n      vec4 colorA = (\n        aIsNodata\n        ? TRANSPARENT\n        : computeColor(pixelFloatValueA, colorScale, sentinelValues, colorScaleLength, sentinelValuesLength)\n      );\n      vec4 colorB = (\n        bIsNodata\n        ? TRANSPARENT\n        : computeColor(pixelFloatValueB, colorScale, sentinelValues, colorScaleLength, sentinelValuesLength)\n      );\n      gl_FragColor = mix(colorA, colorB, interpolationFraction);\n    } else {\n      float interpolated = mix(pixelFloatValueA, pixelFloatValueB, interpolationFraction);\n      gl_FragColor = computeColor(interpolated, colorScale, sentinelValues, colorScaleLength, sentinelValuesLength);\n    }\n  }\n}\n",Qh),uniforms:po({},t.uniforms,Kh,Yh,{colorScaleLength:function(e,t){var n=t.colorScale;return n.length},sentinelValuesLength:function(e,t){var n=t.sentinelValues;return n.length},textureA:function(e,t){var n=t.textureA;return n},textureB:function(e,t){var n=t.textureB;return n},interpolationFraction:function(e,t){var n=t.interpolationFraction;return n}}),attributes:po({},t.attributes,{texCoordA:function(e,t){var n=t.textureBoundsA;return Xr(n)},texCoordB:function(e,t){var n=t.textureBoundsB;return Xr(n)}})}))}function ao(e,t){return e(po({},t,{vert:"#define GLSLIFY 1\nuniform mat4 transformMatrix;\n\nattribute vec2 position;\nattribute vec2 texCoordA;\nattribute vec2 texCoordB;\n\nvarying vec2 vTexCoordA;\nvarying vec2 vTexCoordB;\n\nvoid main() {\n  vTexCoordA = texCoordA;\n  vTexCoordB = texCoordB;\n  gl_Position = transformMatrix * vec4(position, 0.0, 1.0);\n}\n",frag:Jr("#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#define GLSLIFY 1\n#endif\n\n#define TRANSPARENT vec4(0.0)\n\n// Denormalize 8-bit color channels to integers in the range 0 to 255.\nivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n  ivec4 bytes = ivec4(inputFloats * 255.0);\n  return (\n    littleEndian\n    ? bytes.abgr\n    : bytes\n  );\n}\n\n// Break the four bytes down into an array of 32 bits.\nvoid bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n  for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n    float acc = float(bytes[channelIndex]);\n    for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n      float powerOfTwo = exp2(float(indexInByte));\n      bool bit = acc >= powerOfTwo;\n      bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n      acc = mod(acc, powerOfTwo);\n    }\n  }\n}\n\n// Compute the exponent of the 32-bit float.\nfloat getExponent(bool bits[32]) {\n  const int startIndex = 1;\n  const int bitStringLength = 8;\n  const int endBeforeIndex = startIndex + bitStringLength;\n  float acc = 0.0;\n  int pow2 = bitStringLength - 1;\n  for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n    acc += float(bits[bitIndex]) * exp2(float(pow2--));\n  }\n  return acc;\n}\n\n// Compute the mantissa of the 32-bit float.\nfloat getMantissa(bool bits[32], bool subnormal) {\n  const int startIndex = 9;\n  const int bitStringLength = 23;\n  const int endBeforeIndex = startIndex + bitStringLength;\n  // Leading/implicit/hidden bit convention:\n  // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n  float acc = float(!subnormal) * exp2(float(bitStringLength));\n  int pow2 = bitStringLength - 1;\n  for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n    acc += float(bits[bitIndex]) * exp2(float(pow2--));\n  }\n  return acc;\n}\n\n// Parse the float from its 32 bits.\nfloat bitsToFloat(bool bits[32]) {\n  float signBit = float(bits[0]) * -2.0 + 1.0;\n  float exponent = getExponent(bits);\n  bool subnormal = abs(exponent - 0.0) < 0.01;\n  float mantissa = getMantissa(bits, subnormal);\n  float exponentBias = 127.0;\n  return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n}\n\n// Decode a 32-bit float from the RGBA color channels of a texel.\nfloat rgbaToFloat(vec4 texelRGBA, bool littleEndian) {\n  ivec4 rgbaBytes = floatsToBytes(texelRGBA, littleEndian);\n  bool bits[32];\n  bytesToBits(rgbaBytes, bits);\n  return bitsToFloat(bits);\n}\n\n#ifndef RELATIVE_TOLERANCE\n#define RELATIVE_TOLERANCE 0.0001\n#endif\n\nbool isCloseEnough(float a, float b) {\n  return abs(a - b) <= max(abs(a), abs(b)) * RELATIVE_TOLERANCE;\n}\n\nstruct ScaleStop {\n  float offset;\n  vec4 color;\n};\n\n#ifndef DEFAULT_COLOR\n#define DEFAULT_COLOR vec4(0.0)\n#endif\n\n#ifndef SCALE_MAX_LENGTH\n#define SCALE_MAX_LENGTH 16\n#endif\n\n#ifndef SENTINEL_MAX_LENGTH\n#define SENTINEL_MAX_LENGTH 16\n#endif\n\nvec4 computeColor(\n  float inputVal,\n  ScaleStop colorScale[SCALE_MAX_LENGTH],\n  ScaleStop sentinelValues[SENTINEL_MAX_LENGTH],\n  int colorScaleLength,\n  int sentinelValuesLength\n) {\n  // Compare the value against any sentinel values, if defined.\n  if (sentinelValuesLength > 0) {\n    for (int i_0 = 0; i_0 < SENTINEL_MAX_LENGTH; ++i_0) {\n      if (i_0 == sentinelValuesLength) {\n        break;\n      }\n      ScaleStop sentinel = sentinelValues[i_0];\n      if (isCloseEnough(inputVal, sentinel.offset)) {\n        return sentinel.color;\n      }\n    }\n  }\n\n  // Do linear interpolation using the color scale, if defined.\n  if (colorScaleLength > 0) {\n    // If value below color scale range, clamp to lowest color stop.\n    if (inputVal < colorScale[0].offset) {\n      return colorScale[0].color;\n    } else {\n      for (int i = 0; i < SCALE_MAX_LENGTH; ++i) {\n        // If value above color scale range, clamp to highest color stop.\n        if (i == colorScaleLength) {\n          return colorScale[i - 1].color;\n        } else if (inputVal <= colorScale[i + 1].offset) {\n          float percent = (inputVal - colorScale[i].offset)\n            / (colorScale[i + 1].offset - colorScale[i].offset);\n          return mix(colorScale[i].color, colorScale[i + 1].color, percent);\n        }\n      }\n    }\n  }\n\n  return DEFAULT_COLOR;\n}\n\nuniform sampler2D textureA;\nuniform ScaleStop colorScaleA[SCALE_MAX_LENGTH];\nuniform int colorScaleLengthA;\nuniform ScaleStop sentinelValuesA[SENTINEL_MAX_LENGTH];\nuniform int sentinelValuesLengthA;\n\nuniform sampler2D textureB;\nuniform ScaleStop colorScaleB[SCALE_MAX_LENGTH];\nuniform int colorScaleLengthB;\nuniform ScaleStop sentinelValuesB[SENTINEL_MAX_LENGTH];\nuniform int sentinelValuesLengthB;\n\nuniform float nodataValue;\nuniform bool littleEndian;\nuniform float interpolationFraction;\n\nvarying vec2 vTexCoordA;\nvarying vec2 vTexCoordB;\n\nvoid main() {\n  if (interpolationFraction <= 0.0) {\n    vec4 rgbaFloats = texture2D(textureA, vTexCoordA);\n    float pixelFloatValue = rgbaToFloat(rgbaFloats, littleEndian);\n    if (isCloseEnough(pixelFloatValue, nodataValue)) {\n      discard;\n    }\n    gl_FragColor = computeColor(pixelFloatValue, colorScaleA, sentinelValuesA, colorScaleLengthA, sentinelValuesLengthA);\n  } else if (interpolationFraction >= 1.0) {\n    vec4 rgbaFloats = texture2D(textureB, vTexCoordB);\n    float pixelFloatValue = rgbaToFloat(rgbaFloats, littleEndian);\n    if (isCloseEnough(pixelFloatValue, nodataValue)) {\n      discard;\n    }\n    gl_FragColor = computeColor(pixelFloatValue, colorScaleB, sentinelValuesB, colorScaleLengthB, sentinelValuesLengthB);\n  } else {\n    vec4 rgbaFloatsA = texture2D(textureA, vTexCoordA);\n    float pixelFloatValueA = rgbaToFloat(rgbaFloatsA, littleEndian);\n    vec4 rgbaFloatsB = texture2D(textureB, vTexCoordB);\n    float pixelFloatValueB = rgbaToFloat(rgbaFloatsB, littleEndian);\n    vec4 colorA = (\n      isCloseEnough(pixelFloatValueA, nodataValue)\n      ? TRANSPARENT\n      : computeColor(pixelFloatValueA, colorScaleA, sentinelValuesA, colorScaleLengthA, sentinelValuesLengthA)\n    );\n    vec4 colorB = (\n      isCloseEnough(pixelFloatValueB, nodataValue)\n      ? TRANSPARENT\n      : computeColor(pixelFloatValueB, colorScaleB, sentinelValuesB, colorScaleLengthB, sentinelValuesLengthB)\n    );\n    gl_FragColor = mix(colorA, colorB, interpolationFraction);\n  }\n}\n",Qh),uniforms:po({},t.uniforms,Xh(16,"colorScaleA"),Xh(16,"colorScaleB"),Xh(16,"sentinelValuesA"),Xh(16,"sentinelValuesB"),{colorScaleLengthA:function(e,t){var n=t.colorScaleA;return n.length},colorScaleLengthB:function(e,t){var n=t.colorScaleB;return n.length},sentinelValuesLengthA:function(e,t){var n=t.sentinelValuesA;return n.length},sentinelValuesLengthB:function(e,t){var n=t.sentinelValuesB;return n.length},textureA:function(e,t){var n=t.textureA;return n},textureB:function(e,t){var n=t.textureB;return n},interpolationFraction:function(e,t){var n=t.interpolationFraction;return n}}),attributes:po({},t.attributes,{texCoordA:function(e,t){var n=t.textureBoundsA;return Xr(n)},texCoordB:function(e,t){var n=t.textureBoundsB;return Xr(n)}})}))}var co=function(e,t){return co=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},co(e,t)},po=function(){return po=Object.assign||function(e){for(var t=1,a=arguments.length,n;t<a;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},po.apply(this,arguments)},ho="object"==typeof global&&global&&global.Object===Object&&global,mo="object"==typeof self&&self&&self.Object===Object&&self,go=ho||mo||Function("return this")(),bo=go.Symbol,_o=Object.prototype,yo=_o.hasOwnProperty,xo=_o.toString,vo=bo?bo.toStringTag:void 0,wo=Object.prototype,So=wo.toString,ko=bo?bo.toStringTag:void 0,To=0/0,Eo=Array.isArray,Ao=1/0,Bo=bo?bo.prototype:void 0,Co=Bo?Bo.toString:void 0,Io=c(function(e,t){return e+t},0),Lo=0/0,zo=/^\s+|\s+$/g,jo=/^[-+]0x[0-9a-f]+$/i,Do=/^0b[01]+$/i,Ro=/^0o[0-7]+$/i,No=parseInt,Fo=1/0,Oo=go["__core-js_shared__"],Po=function(){var e=/[^.]+$/.exec(Oo&&Oo.keys&&Oo.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Mo=Function.prototype,Vo=Mo.toString,Wo=/[\\^$.*+?()[\]{}|]/g,Go=/^\[object .+?Constructor\]$/,Ho=Function.prototype,Uo=Object.prototype,qo=Ho.toString,Zo=Uo.hasOwnProperty,Xo=RegExp("^"+qo.call(Zo).replace(Wo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ko=S(go,"WeakMap"),Yo=Ko&&new Ko,Qo=Yo?function(e,t){return Yo.set(e,t),e}:b,$o=Object.create,Jo=function(){function e(){}return function(t){if(!p(t))return{};if($o)return $o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),es=fo,ts=fo;z.prototype=Jo(I.prototype),z.prototype.constructor=z;var ns=Yo?function(e){return Yo.get(e)}:j,as={},is=Object.prototype,rs=is.hasOwnProperty;R.prototype=Jo(I.prototype),R.prototype.constructor=R;var os=Object.prototype,ss=os.hasOwnProperty;O.prototype=I.prototype,O.prototype.constructor=O;var ls=Date.now,ds=M(Qo),fs=/\{\n\/\* \[wrapped with (.+)\] \*/,us=/,? & /,cs=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ps=function(){try{var e=S(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),hs=ps?function(e,t){return ps(e,"toString",{configurable:!0,enumerable:!1,value:G(t),writable:!0})}:b,ms=M(hs),gs=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],bs=/^(?:0|[1-9]\d*)$/,_s=lo,ys=lo,xs=fo,vs=Object.prototype,ws=vs.hasOwnProperty,Ss=fo,ks=Object.prototype,Ts=Object.prototype,Es=Ts.hasOwnProperty,As=Ts.propertyIsEnumerable,Bs=we(function(){return arguments}())?we:function(e){return s(e)&&Es.call(e,"callee")&&!As.call(e,"callee")},Cs="object"==typeof exports&&exports&&!exports.nodeType&&exports,Is=Cs&&"object"==typeof module&&module&&!module.nodeType&&module,Ls=Is&&Is.exports===Cs,zs=Ls?go.Buffer:void 0,js=zs?zs.isBuffer:void 0,Ds=js||Se,Rs={};Rs["[object Float32Array]"]=Rs["[object Float64Array]"]=Rs["[object Int8Array]"]=Rs["[object Int16Array]"]=Rs["[object Int32Array]"]=Rs["[object Uint8Array]"]=Rs["[object Uint8ClampedArray]"]=Rs["[object Uint16Array]"]=Rs["[object Uint32Array]"]=!0,Rs["[object Arguments]"]=Rs["[object Array]"]=Rs["[object ArrayBuffer]"]=Rs["[object Boolean]"]=Rs["[object DataView]"]=Rs["[object Date]"]=Rs["[object Error]"]=Rs["[object Function]"]=Rs["[object Map]"]=Rs["[object Number]"]=Rs["[object Object]"]=Rs["[object RegExp]"]=Rs["[object Set]"]=Rs["[object String]"]=Rs["[object WeakMap]"]=!1;var Ns="object"==typeof exports&&exports&&!exports.nodeType&&exports,Fs=Ns&&"object"==typeof module&&module&&!module.nodeType&&module,Os=Fs&&Fs.exports===Ns,Ps=Os&&ho.process,Ms=function(){try{var e=Fs&&Fs.require&&Fs.require("util").types;return e?e:Ps&&Ps.binding&&Ps.binding("util")}catch(t){}}(),Vs=Ms&&Ms.isTypedArray,Ws=Vs?ke(Vs):function(e){return s(e)&&ge(e.length)&&!!Rs[o(e)]},Gs=Object.prototype,Hs=Gs.hasOwnProperty,Us=Ee(Object.keys,Object),qs=Object.prototype,Zs=qs.hasOwnProperty,Xs=Object.prototype,Ks=Xs.hasOwnProperty,Ys=ye(function(e,t){if(xe(t)||be(t))return void pe(t,Be(t),e);for(var n in t)Ks.call(t,n)&&ce(e,n,t[n])}),Qs=Object.prototype,$s=Qs.hasOwnProperty,Js=ye(function(e,t){pe(t,Le(t),e)}),el=ye(function(e,t,n,a){pe(t,Le(t),e,a)}),tl=ye(function(e,t,n,a){pe(t,Be(t),e,a)}),nl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,al=/^\w*$/,il=S(Object,"create"),rl=Object.prototype,ol=rl.hasOwnProperty,sl=Object.prototype,ll=sl.hasOwnProperty;je.prototype.clear=function(){this.__data__=il?il(null):{},this.size=0},je.prototype["delete"]=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},je.prototype.get=function(e){var t=this.__data__;if(il){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return ol.call(t,e)?t[e]:void 0},je.prototype.has=function(e){var t=this.__data__;return il?t[e]!==void 0:ll.call(t,e)},je.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=il&&void 0===t?"__lodash_hash_undefined__":t,this};var dl=Array.prototype,fl=dl.splice;Re.prototype.clear=function(){this.__data__=[],this.size=0},Re.prototype["delete"]=function(e){var t=this.__data__,n=De(t,e);if(0>n)return!1;var a=t.length-1;return n==a?t.pop():fl.call(t,n,1),--this.size,!0},Re.prototype.get=function(e){var t=this.__data__,n=De(t,e);return 0>n?void 0:t[n][1]},Re.prototype.has=function(e){return-1<De(this.__data__,e)},Re.prototype.set=function(e,t){var n=this.__data__,a=De(n,e);return 0>a?(++this.size,n.push([e,t])):n[a][1]=t,this};var ul=S(go,"Map");Oe.prototype.clear=function(){this.size=0,this.__data__={hash:new je,map:new(ul||Re),string:new je}},Oe.prototype["delete"]=function(e){var t=Fe(this,e)["delete"](e);return this.size-=t?1:0,t},Oe.prototype.get=function(e){return Fe(this,e).get(e)},Oe.prototype.has=function(e){return Fe(this,e).has(e)},Oe.prototype.set=function(e,t){var n=Fe(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this};Pe.Cache=Oe;var cl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pl=/\\(\\)?/g,hl=function(e){var t=Pe(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(cl,function(e,n,a,i){t.push(a?i.replace(pl,"$1"):n||e)}),t}),ml=1/0,gl=bo?bo.isConcatSpreadable:void 0,bl=Ye(Ue),at=Ee(Object.getPrototypeOf,Object),_l=Function.prototype,yl=Object.prototype,xl=_l.toString,vl=yl.hasOwnProperty,wl=xl.call(Object),Sl=me(function(e,t){try{return E(e,void 0,t)}catch(t){return $e(t)?t:new Error(t)}}),kl=me(function(e,t,n){var a=1;if(n.length){var i=ae(n,ee(kl));a|=32}return le(e,a,t,n,i)});kl.placeholder={};var Tl=Ye(function(e,t){return H(t,function(t){t=We(t),fe(e,t,kl(e[t],e))}),e}),El=me(function(e,t,n){var a=1|2;if(n.length){var i=ae(n,ee(El));a|=32}return le(t,a,e,n,i)});El.placeholder={};var Al=RegExp("["+"\\u200d"+"\\ud800-\\udfff"+"\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff"+"\\ufe0e\\ufe0f"+"]"),Bl="\\ud800-\\udfff",Cl="["+("\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff")+"]",Il="\\ud83c[\\udffb-\\udfff]",Ll="[^"+Bl+"]",zl="(?:\\ud83c[\\udde6-\\uddff]){2}",jl="[\\ud800-\\udbff][\\udc00-\\udfff]",Dl="(?:"+Cl+"|"+Il+")"+"?",Rl="["+"\\ufe0e\\ufe0f"+"]?",Nl="(?:"+"\\u200d"+"(?:"+[Ll,zl,jl].join("|")+")"+Rl+Dl+")*",Fl="(?:"+[Ll+Cl+"?",Cl,zl,jl,"["+Bl+"]"].join("|")+")",Ol=RegExp(Il+"(?="+Il+")|"+Fl+(Rl+Dl+Nl),"g"),Pl=st("toUpperCase"),Ml=ut({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Vl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wl=RegExp("["+("\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff")+"]","g"),Gl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Hl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ul="\\ud800-\\udfff",ql="\\u2700-\\u27bf",Zl="a-z\\xdf-\\xf6\\xf8-\\xff",Xl="A-Z\\xc0-\\xd6\\xd8-\\xde",Kl="\\xac\\xb1\\xd7\\xf7"+"\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf"+"\\u2000-\\u206f"+" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yl="['\u2019]",Ql="["+Kl+"]",$l="\\d+",Jl="["+Zl+"]",ed="[^"+Ul+Kl+$l+ql+Zl+Xl+"]",td="(?:\\ud83c[\\udde6-\\uddff]){2}",nd="[\\ud800-\\udbff][\\udc00-\\udfff]",ad="["+Xl+"]",id="(?:"+Jl+"|"+ed+")",rd="(?:"+Yl+"(?:d|ll|m|re|s|t|ve))?",od="(?:"+Yl+"(?:D|LL|M|RE|S|T|VE))?",sd="(?:"+("["+("\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff")+"]")+"|"+"\\ud83c[\\udffb-\\udfff]"+")"+"?",ld="["+"\\ufe0e\\ufe0f"+"]?",dd="(?:"+"\\u200d"+"(?:"+["[^"+Ul+"]",td,nd].join("|")+")"+ld+sd+")*",fd="(?:"+["["+ql+"]",td,nd].join("|")+")"+(ld+sd+dd),ud=RegExp([ad+"?"+Jl+"+"+rd+"(?="+[Ql,ad,"$"].join("|")+")","(?:"+ad+"|"+ed+")"+"+"+od+"(?="+[Ql,ad+id,"$"].join("|")+")",ad+"?"+id+"+"+rd,ad+"+"+od,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",$l,fd].join("|"),"g"),cd=RegExp("['\u2019]","g"),pd=_t(function(e,t,n){return t=t.toLowerCase(),e+(n?dt(t):t)}),hd=lo,md=yt("ceil"),gd=so,bd=fo;St.prototype.clear=function(){this.__data__=new Re,this.size=0},St.prototype["delete"]=function(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n},St.prototype.get=function(e){return this.__data__.get(e)},St.prototype.has=function(e){return this.__data__.has(e)},St.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Re){var a=n.__data__;if(!ul||199>a.length)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new Oe(a)}return n.set(e,t),this.size=n.size,this};var _d="object"==typeof exports&&exports&&!exports.nodeType&&exports,yd=_d&&"object"==typeof module&&module&&!module.nodeType&&module,xd=yd&&yd.exports===_d,vd=xd?go.Buffer:void 0,wd=vd?vd.allocUnsafe:void 0,Sd=Object.prototype,kd=Sd.propertyIsEnumerable,Td=Object.getOwnPropertySymbols,Ed=Td?function(e){return null==e?[]:(e=Object(e),At(Td(e),function(t){return kd.call(e,t)}))}:Bt,Ad=Object.getOwnPropertySymbols,Bd=Ad?function(e){for(var t=[];e;)qe(t,Ed(e)),e=at(e);return t}:Bt,Cd=S(go,"DataView"),Id=S(go,"Promise"),Ld=S(go,"Set"),zd="[object Map]",jd="[object Promise]",Dd="[object Set]",Rd="[object WeakMap]",Nd="[object DataView]",Fd=x(Cd),Od=x(ul),Pd=x(Id),Md=x(Ld),Vd=x(Ko),Wd=o;(Cd&&Wd(new Cd(new ArrayBuffer(1)))!=Nd||ul&&Wd(new ul)!=zd||Id&&Wd(Id.resolve())!=jd||Ld&&Wd(new Ld)!=Dd||Ko&&Wd(new Ko)!=Rd)&&(Wd=function(e){var t=o(e),n=t=="[object Object]"?e.constructor:void 0,a=n?x(n):"";if(a)switch(a){case Fd:return Nd;case Od:return zd;case Pd:return jd;case Md:return Dd;case Vd:return Rd;}return t});var Gd=Wd,Hd=Object.prototype,Ud=Hd.hasOwnProperty,qd=go.Uint8Array,Zd=/\w*$/,Xd=bo?bo.prototype:void 0,Kd=Xd?Xd.valueOf:void 0,Yd=Ms&&Ms.isMap,Qd=Yd?ke(Yd):function(e){return s(e)&&Gd(e)=="[object Map]"},$d=Ms&&Ms.isSet,Jd=$d?ke($d):function(e){return s(e)&&Gd(e)=="[object Set]"},ef={};ef["[object Arguments]"]=ef["[object Array]"]=ef["[object ArrayBuffer]"]=ef["[object DataView]"]=ef["[object Boolean]"]=ef["[object Date]"]=ef["[object Float32Array]"]=ef["[object Float64Array]"]=ef["[object Int8Array]"]=ef["[object Int16Array]"]=ef["[object Int32Array]"]=ef["[object Map]"]=ef["[object Number]"]=ef["[object Object]"]=ef["[object RegExp]"]=ef["[object Set]"]=ef["[object String]"]=ef["[object Symbol]"]=ef["[object Uint8Array]"]=ef["[object Uint8ClampedArray]"]=ef["[object Uint16Array]"]=ef["[object Uint32Array]"]=!0,ef["[object Error]"]=ef["[object Function]"]=ef["[object WeakMap]"]=!1;Gt.prototype.add=Gt.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Gt.prototype.has=function(e){return this.__data__.has(e)};var tf=bo?bo.prototype:void 0,nf=tf?tf.valueOf:void 0,af=Object.prototype,rf=af.hasOwnProperty,of=Object.prototype,sf=of.hasOwnProperty,lf=gn(),df=_n(bn),ff=Object.prototype,uf=ff.hasOwnProperty,cf=xn(function(e,t,n){uf.call(e,n)?++e[n]:fe(e,n,1)});vn.placeholder={};wn.placeholder={};var pf=function(){return go.Date.now()},hf=fo,mf=lo,gf=Object.prototype,bf=gf.hasOwnProperty,_f=me(function(e,t){e=Object(e);var n=-1,a=t.length,i=2<a?t[2]:void 0;for(i&&_e(t[0],t[1],i)&&(a=1);++n<a;)for(var r=t[n],o=Le(r),s=-1,l=o.length;++s<l;){var d=o[s],f=e[d];(void 0===f||ue(f,gf[d])&&!bf.call(e,d))&&(e[d]=r[d])}return e}),yf=ye(function(e,t,n,a){Cn(e,t,n,a)}),xf=me(function(e){return e.push(void 0,In),E(yf,void 0,e)}),vf=me(function(e,t){return Ln(e,1,t)}),wf=me(function(e,t,n){return Ln(e,h(t)||0,n)}),Sf=me(function(e,t){return Tn(e)?jn(e,Xe(t,1,Tn,!0)):[]}),kf=me(function(e,t){var n=Dn(t);return Tn(n)&&(n=void 0),Tn(e)?jn(e,Xe(t,1,Tn,!0),cn(n,2)):[]}),Tf=me(function(e,t){var n=Dn(t);return Tn(n)&&(n=void 0),Tn(e)?jn(e,Xe(t,1,Tn,!0),void 0,n):[]}),Ef=c(function(e,t){return e/t},1),Af=gn(!0),Bf=_n(Pn,!0),Cf=Gn(Be),If=Gn(Le),Lf=ut({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),zf=/[&<>"']/g,jf=RegExp(zf.source),Df=/[\\^$.*+?()[\]{}|]/g,Rf=RegExp(Df.source),Nf=fo,Ff=Yn(Qn),Of=fo,Pf=lo,Mf=Yn(Jn),Vf=yt("floor"),Wf=ia(),Gf=ia(!0),Hf=Object.prototype,Uf=Hf.hasOwnProperty,qf=xn(function(e,t,n){Uf.call(e,n)?e[n].push(t):fe(e,n,[t])}),Zf=sa(oa),gt=sa(function(e,t){return e>=t}),Xf=Object.prototype,Kf=Xf.hasOwnProperty,Yf=fo,Qf=lo,$f=lo,Jf=me(function(e){var t=f(e,ha);return t.length&&t[0]===e[0]?pa(t):[]}),eu=me(function(e){var t=Dn(e),n=f(e,ha);return t===Dn(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?pa(n,cn(t,2)):[]}),tu=me(function(e){var t=Dn(e),n=f(e,ha);return t="function"==typeof t?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?pa(n,void 0,t):[]}),nu=Object.prototype,au=nu.toString,iu=ga(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=au.call(t)),e[t]=n},G(b)),ru=Object.prototype,ou=ru.hasOwnProperty,su=ru.toString,lu=ga(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=su.call(t)),ou.call(e,t)?e[t].push(n):e[t]=[n]},cn),du=me(_a),fu=me(function(e,t,n){var a=-1,i=be(e)?Array(e.length):[];return df(e,function(e){i[++a]="function"==typeof t?E(t,e,n):_a(e,t,n)}),i}),uu=Ms&&Ms.isArrayBuffer,cu=uu?ke(uu):function(e){return s(e)&&o(e)=="[object ArrayBuffer]"},pu=Ms&&Ms.isDate,hu=pu?ke(pu):function(e){return s(e)&&o(e)=="[object Date]"},mu=Object.prototype,gu=mu.hasOwnProperty,bu=go.isFinite,_u=Oo?_:Se,yu=Ms&&Ms.isRegExp,xu=yu?ke(yu):function(e){return s(e)&&o(e)=="[object RegExp]"},vu=Array.prototype,wu=vu.join,Su=_t(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),ku=xn(function(e,t,n){fe(e,n,t)}),Tu=_t(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Eu=st("toLowerCase"),Au=sa(ka),lt=sa(function(e,t){return e<=t}),Bu=0/0,Cu=ye(function(e,t,n){Cn(e,t,n)}),Iu=me(function(e,t){return function(n){return _a(n,e,t)}}),Lu=me(function(e,t){return function(n){return _a(e,n,t)}}),zu=c(function(e,t){return e*t},1),ju=bo?bo.iterator:void 0,Du=Ye(function(e,t){var n={};if(null==e)return n;var a=!1;t=f(t,function(t){return t=Ve(t,e),a||(a=1<t.length),t}),pe(e,jt(e),n),a&&(n=Wt(n,1|2|4,Ra));for(var i=t.length;i--;)Da(n,t[i]);return n}),Ru=Ga(f),Nu=me(function(e,t){t=1==t.length&&Eo(t[0])?f(t[0],ke(cn)):f(Xe(t,1),ke(cn));var n=t.length;return me(function(a){for(var i=-1,r=lo(a.length,n);++i<r;)a[i]=t[i].call(this,a[i]);return E(e,this,a)})}),Fu=Ga(Un),Ou=Ga(Ht),Pu=oo,Mu=dn("length"),Vu="\\ud800-\\udfff",Wu="["+("\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff")+"]",Gu="\\ud83c[\\udffb-\\udfff]",Hu="[^"+Vu+"]",Uu="(?:\\ud83c[\\udde6-\\uddff]){2}",qu="[\\ud800-\\udbff][\\udc00-\\udfff]",Zu="(?:"+Wu+"|"+Gu+")"+"?",Xu="["+"\\ufe0e\\ufe0f"+"]?",Ku="(?:"+"\\u200d"+"(?:"+[Hu,Uu,qu].join("|")+")"+Xu+Zu+")*",Yu="(?:"+[Hu+Wu+"?",Wu,Uu,qu,"["+Vu+"]"].join("|")+")",Qu=RegExp(Gu+"(?="+Gu+")|"+Yu+(Xu+Zu+Ku),"g"),$u=so,Ju=/^\s+/,ec=go.parseInt,tc=me(function(e,t){var n=ae(t,ee(tc));return le(e,32,void 0,t,n)});tc.placeholder={};var nc=me(function(e,t){var n=ae(t,ee(nc));return le(e,64,void 0,t,n)});nc.placeholder={};var ac=xn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ic=Ye(function(e,t){return null==e?{}:Xa(e,t)}),rc=Array.prototype,oc=rc.splice,sc=me(Qa),lc=Array.prototype,dc=lc.splice,fc=Ye(function(e,t){var n=null==e?0:e.length,a=Ue(e,t);return $a(e,f(t,function(e){return te(e,n)?+e:e}).sort(Ma)),a}),uc=oo,cc=Math.random,pc=parseFloat,hc=Math.random,mc=so,gc=fo,bc=ti(),_c=ti(!0),yc=Ye(function(e,t){return le(e,256,void 0,void 0,void 0,t)}),xc=Array.prototype,vc=xc.reverse,wc=yt("round"),Sc=_t(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),kc=me(function(e,t){if(null==e)return[];var n=t.length;return 1<n&&_e(e,t[0],t[1])?t=[]:2<n&&_e(t[0],t[1],t[2])&&(t=[t[0]]),Wa(e,Xe(t,1),[])}),Tc=oo,Ec=lo,Ac=_t(function(e,t,n){return e+(n?" ":"")+Pl(t)}),Bc=c(function(e,t){return e-t},0),Cc=Object.prototype,Ic=Cc.hasOwnProperty,Lc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},zc=/<%=([\s\S]+?)%>/g,jc=/<%-([\s\S]+?)%>/g,Dc=/<%([\s\S]+?)%>/g,Rc={escape:jc,evaluate:Dc,interpolate:zc,variable:"",imports:{_:{escape:Hn}}},Nc=/\b__p \+= '';/g,Fc=/\b(__p \+=) '' \+/g,Oc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Mc=/($^)/,Vc=/['\n\r\u2028\u2029\\]/g,Wc=/^\s+|\s+$/g,Gc=/\s+$/,Hc=/^\s+/,Uc=/\w*$/,qc=ut({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":"\"","&#39;":"'"}),Zc=/&(?:amp|lt|gt|quot|#39);/g,Xc=RegExp(Zc.source),Kc=Ld&&1/Xt(new Ld([,-0]))[1]==1/0?function(e){return new Ld(e)}:j,Yc=me(function(e){return Ei(Xe(e,1,Tn,!0))}),Qc=me(function(e){var t=Dn(e);return Tn(t)&&(t=void 0),Ei(Xe(e,1,Tn,!0),cn(t,2))}),$c=me(function(e){var t=Dn(e);return t="function"==typeof t?t:void 0,Ei(Xe(e,1,Tn,!0),void 0,t)}),Jc=0,ep=fo,tp=_t(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),np=me(function(e,t){return Tn(e)?jn(e,t):[]}),ap=Ye(function(e){var t=e.length,n=t?e[0]:0,a=this.__wrapped__,i=function(t){return Ue(t,e)};return 1<t||this.__actions__.length||!(a instanceof z)||!te(n)?this.thru(i):(a=a.slice(n,+n+(t?1:0)),a.__actions__.push({func:xi,args:[i],thisArg:void 0}),new R(a,this.__chain__).thru(function(e){return t&&!e.length&&e.push(void 0),e}))}),ip=me(function(e){return Li(At(e,Tn))}),rp=me(function(e){var t=Dn(e);return Tn(t)&&(t=void 0),Li(At(e,Tn),cn(t,2))}),op=me(function(e){var t=Dn(e);return t="function"==typeof t?t:void 0,Li(At(e,Tn),void 0,t)}),sp=me(Bi),lp=me(function(e){var t=e.length,n=1<t?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Ci(e,n)}),dp={chunk:vt,compact:function(e){for(var t=-1,n=null==e?0:e.length,a=0,i=[];++t<n;){var r=e[t];r&&(i[a++]=r)}return i},concat:function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return qe(Eo(n)?N(n):[n],Xe(t,1))},difference:Sf,differenceBy:kf,differenceWith:Tf,drop:function(e,t,a){var i=null==e?0:e.length;return i?(t=a||void 0===t?1:g(t),et(e,0>t?0:t,i)):[]},dropRight:function(e,t,a){var i=null==e?0:e.length;return i?(t=a||void 0===t?1:g(t),t=i-t,et(e,0,0>t?0:t)):[]},dropRightWhile:function(e,t){return e&&e.length?Rn(e,cn(t,3),!0,!0):[]},dropWhile:function(e,t){return e&&e.length?Rn(e,cn(t,3),!0):[]},fill:function(e,t,n,a){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&_e(e,t,n)&&(n=0,a=i),Xn(e,t,n,a)):[]},findIndex:Qn,findLastIndex:Jn,first:ea,flatten:Ke,flattenDeep:function(e){var t=null==e?0:e.length;return t?Xe(e,1/0):[]},flattenDepth:function(e,t){var n=null==e?0:e.length;return n?(t=void 0===t?1:g(t),Xe(e,t)):[]},fromPairs:function(e){for(var t=-1,n=null==e?0:e.length,a={};++t<n;){var i=e[t];a[i[0]]=i[1]}return a},head:ea,indexOf:function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var i=null==n?0:g(n);return 0>i&&(i=fo(a+i,0)),K(e,t,i)},initial:function(e){var t=null==e?0:e.length;return t?et(e,0,-1):[]},intersection:Jf,intersectionBy:eu,intersectionWith:tu,join:function(e,t){return null==e?"":wu.call(e,t)},last:Dn,lastIndexOf:function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var i=a;return void 0!==n&&(i=g(n),i=0>i?fo(a+i,0):lo(i,a-1)),t===t?Sa(e,t,i):U(e,Z,i,!0)},nth:function(e,t){return e&&e.length?ja(e,g(t)):void 0},pull:sc,pullAll:Qa,pullAllBy:function(e,t,n){return e&&e.length&&t&&t.length?Ya(e,t,cn(n,2)):e},pullAllWith:function(e,t,n){return e&&e.length&&t&&t.length?Ya(e,t,void 0,n):e},pullAt:fc,remove:function(e,t){var n=[];if(!(e&&e.length))return n;var a=-1,i=[],r=e.length;for(t=cn(t,3);++a<r;){var o=e[a];t(o,a,e)&&(n.push(o),i.push(a))}return $a(e,i),n},reverse:ii,slice:function(e,t,n){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&_e(e,t,n)?(t=0,n=a):(t=null==t?0:g(t),n=void 0===n?a:g(n)),et(e,t,n)):[]},sortedIndex:function(e,t){return hi(e,t)},sortedIndexBy:function(e,t,n){return pi(e,t,cn(n,2))},sortedIndexOf:function(e,t){var n=null==e?0:e.length;if(n){var a=hi(e,t);if(a<n&&ue(e[a],t))return a}return-1},sortedLastIndex:function(e,t){return hi(e,t,!0)},sortedLastIndexBy:function(e,t,n){return pi(e,t,cn(n,2),!0)},sortedLastIndexOf:function(e,t){var n=null==e?0:e.length;if(n){var a=hi(e,t,!0)-1;if(ue(e[a],t))return a}return-1},sortedUniq:function(e){return e&&e.length?mi(e):[]},sortedUniqBy:function(e,t){return e&&e.length?mi(e,cn(t,2)):[]},tail:function(e){var t=null==e?0:e.length;return t?et(e,1,t):[]},take:function(e,t,a){return e&&e.length?(t=a||void 0===t?1:g(t),et(e,0,0>t?0:t)):[]},takeRight:function(e,t,a){var i=null==e?0:e.length;return i?(t=a||void 0===t?1:g(t),t=i-t,et(e,0>t?0:t,i)):[]},takeRightWhile:function(e,t){return e&&e.length?Rn(e,cn(t,3),!1,!0):[]},takeWhile:function(e,t){return e&&e.length?Rn(e,cn(t,3)):[]},union:Yc,unionBy:Qc,unionWith:$c,uniq:function(e){return e&&e.length?Ei(e):[]},uniqBy:function(e,t){return e&&e.length?Ei(e,cn(t,2)):[]},uniqWith:function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Ei(e,void 0,t):[]},unzip:Bi,unzipWith:Ci,without:np,xor:ip,xorBy:rp,xorWith:op,zip:sp,zipObject:function(e,t){return zi(e||[],t||[],ce)},zipObjectDeep:function(e,t){return zi(e||[],t||[],Na)},zipWith:lp},fp={countBy:cf,each:Fn,eachRight:Mn,every:function(e,t,n){var a=Eo(e)?Un:qn;return n&&_e(e,t,n)&&(t=void 0),a(e,cn(t,3))},filter:function(e,t){var n=Eo(e)?At:Kn;return n(e,cn(t,3))},find:Ff,findLast:Mf,flatMap:aa,flatMapDeep:function(e,t){return Xe(na(e,t),1/0)},flatMapDepth:function(e,t,n){return n=void 0===n?1:g(n),Xe(na(e,t),n)},forEach:Fn,forEachRight:Mn,groupBy:qf,includes:function(e,t,n,a){e=be(e)?e:ca(e),n=n&&!a?g(n):0;var i=e.length;return 0>n&&(n=fo(i+n,0)),fa(e)?n<=i&&-1<e.indexOf(t,n):!!i&&-1<K(e,t,n)},invokeMap:fu,keyBy:ku,map:na,orderBy:function(e,t,n,a){return null==e?[]:(Eo(t)||(t=null==t?[]:[t]),n=a?void 0:n,Eo(n)||(n=null==n?[]:[n]),Wa(e,t,n))},partition:ac,reduce:function(e,t,n){var a=Eo(e)?ft:ni,i=3>arguments.length;return a(e,cn(t,4),n,i,df)},reduceRight:function(e,t,n){var a=Eo(e)?ai:ni,i=3>arguments.length;return a(e,cn(t,4),n,i,Bf)},reject:function(e,t){var n=Eo(e)?At:Kn;return n(e,Ia(cn(t,3)))},sample:function(e){var t=Eo(e)?ri:oi;return t(e)},sampleSize:function(e,t,a){t=(a?_e(e,t,a):void 0===t)?1:g(t);var i=Eo(e)?li:di;return i(e,t)},shuffle:function(e){var t=Eo(e)?fi:ui;return t(e)},size:function(e){if(null==e)return 0;if(be(e))return fa(e)?qa(e):e.length;var t=Gd(e);return"[object Map]"==t||"[object Set]"==t?e.size:Ae(e).length},some:function(e,t,n){var a=Eo(e)?Ht:ci;return n&&_e(e,t,n)&&(t=void 0),a(e,cn(t,3))},sortBy:kc},up={after:function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=g(e),function(){if(1>--e)return t.apply(this,arguments)}},ary:de,before:Je,bind:kl,bindKey:El,curry:vn,curryRight:wn,debounce:Sn,defer:vf,delay:wf,flip:function(e){return le(e,512)},memoize:Pe,negate:Ia,once:function(e){return Je(2,e)},overArgs:Nu,partial:tc,partialRight:nc,rearg:yc,rest:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=void 0===t?t:g(t),me(e,t)},spread:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=null==t?0:fo(g(t),0),me(function(n){var a=n[t],i=tt(n,0,t);return a&&qe(i,a),E(e,this,i)})},throttle:yi,unary:function(e){return de(e,1)},wrap:function(e,t){return tc(Nn(t),e)}},cp={castArray:function(){if(!arguments.length)return[];var e=arguments[0];return Eo(e)?e:[e]},clone:function(e){return Wt(e,4)},cloneDeep:function(e){return Wt(e,5)},cloneDeepWith:function(e,t){return t="function"==typeof t?t:void 0,Wt(e,5,t)},cloneWith:function(e,t){return t="function"==typeof t?t:void 0,Wt(e,4,t)},conformsTo:function(e,t){return null==t||pn(e,t,Be(t))},eq:ue,gt:Zf,gte:gt,isArguments:Bs,isArray:Eo,isArrayBuffer:cu,isArrayLike:be,isArrayLikeObject:Tn,isBoolean:function(e){return!0===e||!1===e||s(e)&&o(e)=="[object Boolean]"},isBuffer:Ds,isDate:hu,isElement:function(e){return s(e)&&1===e.nodeType&&!Qe(e)},isEmpty:ya,isEqual:function(e,t){return $t(e,t)},isEqualWith:function(e,t,n){n="function"==typeof n?n:void 0;var a=n?n(e,t):void 0;return a===void 0?$t(e,t,void 0,n):!!a},isError:$e,isFinite:function(e){return"number"==typeof e&&bu(e)},isFunction:_,isInteger:xa,isLength:ge,isMap:Qd,isMatch:function(e,t){return e===t||Jt(e,t,tn(t))},isMatchWith:function(e,t,n){return n="function"==typeof n?n:void 0,Jt(e,t,tn(t),n)},isNaN:function(e){return va(e)&&e!=+e},isNative:function(e){if(_u(e))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return v(e)},isNil:function(e){return null==e},isNull:function(e){return null===e},isNumber:va,isObject:p,isObjectLike:s,isPlainObject:Qe,isRegExp:xu,isSafeInteger:function(e){return xa(e)&&e>=-9007199254740991&&e<=9007199254740991},isSet:Jd,isString:fa,isSymbol:l,isTypedArray:Ws,isUndefined:wa,isWeakMap:function(e){return s(e)&&Gd(e)=="[object WeakMap]"},isWeakSet:function(e){return s(e)&&o(e)=="[object WeakSet]"},lt:Au,lte:lt,toArray:za,toFinite:m,toInteger:g,toLength:Zn,toNumber:h,toPlainObject:An,toSafeInteger:function(e){return e?wt(g(e),-9007199254740991,9007199254740991):0===e?e:0},toString:Me},pp={add:Io,ceil:md,divide:Ef,floor:Vf,max:function(e){return e&&e.length?Ea(e,b,oa):void 0},maxBy:function(e,t){return e&&e.length?Ea(e,cn(t,2),oa):void 0},mean:function(e){return Ba(e,b)},meanBy:function(e,t){return Ba(e,cn(t,2))},min:function(e){return e&&e.length?Ea(e,b,ka):void 0},minBy:function(e,t){return e&&e.length?Ea(e,cn(t,2),ka):void 0},multiply:zu,round:wc,subtract:Bc,sum:function(e){return e&&e.length?Aa(e,b):0},sumBy:function(e,t){return e&&e.length?Aa(e,cn(t,2)):0}},hp={clamp:function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=h(n),n=n===n?n:0),void 0!==t&&(t=h(t),t=t===t?t:0),wt(h(e),t,n)},inRange:function(e,t,n){return t=m(t),void 0===n?(n=t,t=0):n=m(n),e=h(e),da(e,t,n)},random:function(e,t,n){if(n&&"boolean"!=typeof n&&_e(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=m(e),void 0===t?(t=e,e=0):t=m(t)),e>t){var a=e;e=t,t=a}if(n||e%1||t%1){var i=hc();return lo(e+i*(t-e+pc("1e-"+((i+"").length-1))),t)}return Ja(e,t)}},mp={assign:Ys,assignIn:Js,assignInWith:el,assignWith:tl,at:bl,create:function(e,t){var n=Jo(e);return null==t?n:kt(n,t)},defaults:_f,defaultsDeep:xf,entries:Cf,entriesIn:If,extend:Js,extendWith:el,findKey:function(e,t){return $n(e,cn(t,3),bn)},findLastKey:function(e,t){return $n(e,cn(t,3),Pn)},forIn:function(e,t){return null==e?e:lf(e,Nn(t),Le)},forInRight:function(e,t){return null==e?e:Af(e,Nn(t),Le)},forOwn:function(e,t){return e&&bn(e,Nn(t))},forOwnRight:function(e,t){return e&&Pn(e,Nn(t))},functions:function(e){return null==e?[]:ra(e,Be(e))},functionsIn:function(e){return null==e?[]:ra(e,Le(e))},get:He,has:function(e,t){return null!=e&&on(e,t,la)},hasIn:sn,invert:iu,invertBy:lu,invoke:du,keys:Be,keysIn:Le,mapKeys:function(e,t){var n={};return t=cn(t,3),bn(e,function(e,a,i){fe(n,t(e,a,i),e)}),n},mapValues:Ta,merge:Cu,mergeWith:yf,omit:Du,omitBy:function(e,t){return Oa(e,Ia(cn(t)))},pick:ic,pickBy:Oa,result:function(e,t,n){t=Ve(t,e);var a=-1,i=t.length;for(i||(i=1,e=void 0);++a<i;){var r=null==e?void 0:e[We(t[a])];r===void 0&&(a=i,r=n),e=_(r)?r.call(e):r}return e},set:function(e,t,n){return null==e?e:Na(e,t,n)},setWith:function(e,t,n,a){return a="function"==typeof a?a:void 0,null==e?e:Na(e,t,n,a)},toPairs:Cf,toPairsIn:If,transform:function(e,t,n){var a=Eo(e),i=a||Ds(e)||Ws(e);if(t=cn(t,4),null==n){var r=e&&e.constructor;n=i?a?new r:[]:p(e)?_(r)?Jo(at(e)):{}:{}}return(i?H:bn)(e,function(e,a,i){return t(n,e,a,i)}),n},unset:function(e,t){return!(null!=e)||Da(e,t)},update:function(e,t,n){return null==e?e:Ii(e,t,Nn(n))},updateWith:function(e,t,n,a){return a="function"==typeof a?a:void 0,null==e?e:Ii(e,t,Nn(n),a)},values:ca,valuesIn:function(e){return null==e?[]:ua(e,Le(e))}},gp={at:ap,chain:xt,commit:function(){return new R(this.value(),this.__chain__)},lodash:O,next:function(){this.__values__===void 0&&(this.__values__=za(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}},plant:function(e){for(var t=this,n,a;t instanceof I;){a=F(t),a.__index__=0,a.__values__=void 0,n?i.__wrapped__=a:n=a;var i=a;t=t.__wrapped__}return i.__wrapped__=e,n},reverse:function(){var e=this.__wrapped__;if(e instanceof z){var t=e;return this.__actions__.length&&(t=new z(this)),t=t.reverse(),t.__actions__.push({func:xi,args:[ii],thisArg:void 0}),new R(t,this.__chain__)}return this.thru(ii)},tap:function(e,t){return t(e),e},thru:xi,toIterator:function(){return this},toJSON:wi,value:wi,valueOf:wi,wrapperChain:function(){return xt(this)}},bp={camelCase:pd,capitalize:dt,deburr:ct,endsWith:function(e,t,n){e=Me(e),t=u(t);var a=e.length;n=void 0===n?a:wt(g(n),0,a);var i=n;return n-=t.length,0<=n&&e.slice(n,i)==t},escape:Hn,escapeRegExp:function(e){return e=Me(e),e&&Rf.test(e)?e.replace(Df,"\\$&"):e},kebabCase:Su,lowerCase:Tu,lowerFirst:Eu,pad:function(e,t,n){e=Me(e),t=g(t);var a=t?qa(e):0;if(!t||a>=t)return e;var i=(t-a)/2;return Za(oo(i),n)+e+Za(so(i),n)},padEnd:function(e,t,n){e=Me(e),t=g(t);var a=t?qa(e):0;return t&&a<t?e+Za(t-a,n):e},padStart:function(e,t,n){e=Me(e),t=g(t);var a=t?qa(e):0;return t&&a<t?Za(t-a,n)+e:e},parseInt:function(e,t,n){return n||null==t?t=0:t&&(t=+t),ec(Me(e).replace(Ju,""),t||0)},repeat:function(e,t,a){return t=(a?_e(e,t,a):void 0===t)?1:g(t),Ha(Me(e),t)},replace:function(){var e=arguments,t=Me(e[0]);return 3>e.length?t:t.replace(e[1],e[2])},snakeCase:Sc,split:function(e,t,n){return(n&&"number"!=typeof n&&_e(e,t,n)&&(t=n=void 0),n=void 0===n?4294967295:n>>>0,!n)?[]:(e=Me(e),e&&("string"==typeof t||null!=t&&!xu(t))&&(t=u(t),!t&&nt(e))?tt(ot(e),0,n):e.split(t,n))},startCase:Ac,startsWith:function(e,t,n){return e=Me(e),n=null==n?0:wt(g(n),0,e.length),t=u(t),e.slice(n,n+t.length)==t},template:_i,templateSettings:Rc,toLower:function(e){return Me(e).toLowerCase()},toUpper:function(e){return Me(e).toUpperCase()},trim:function(e,t,n){if(e=Me(e),e&&(n||void 0===t))return e.replace(Wc,"");if(!e||!(t=u(t)))return e;var a=ot(e),i=ot(t),r=ki(a,i),o=Si(a,i)+1;return tt(a,r,o).join("")},trimEnd:function(e,t,n){if(e=Me(e),e&&(n||void 0===t))return e.replace(Gc,"");if(!e||!(t=u(t)))return e;var a=ot(e),i=Si(a,ot(t))+1;return tt(a,0,i).join("")},trimStart:function(e,t,n){if(e=Me(e),e&&(n||void 0===t))return e.replace(Hc,"");if(!e||!(t=u(t)))return e;var a=ot(e),i=ki(a,ot(t));return tt(a,i).join("")},truncate:Ti,unescape:function(e){return e=Me(e),e&&Xc.test(e)?e.replace(Zc,qc):e},upperCase:tp,upperFirst:Pl,words:bt},_p={attempt:Sl,bindAll:Tl,cond:function(e){var t=null==e?0:e.length;return e=t?f(e,function(e){if("function"!=typeof e[1])throw new TypeError("Expected a function");return[cn(e[0]),e[1]]}):[],me(function(n){for(var a=-1,i;++a<t;)if(i=e[a],E(i[0],this,n))return E(i[1],this,n)})},conforms:function(e){return hn(Wt(e,1))},constant:G,defaultTo:function(e,t){return null==e||e!==e?t:e},flow:Wf,flowRight:Gf,identity:b,iteratee:function(e){return cn("function"==typeof e?e:Wt(e,1))},matches:function(e){return an(Wt(e,1))},matchesProperty:function(e,t){return ln(e,Wt(t,1))},method:Iu,methodOf:Lu,mixin:Ca,noop:j,nthArg:function(e){return e=g(e),me(function(t){return ja(t,e)})},over:Ru,overEvery:Fu,overSome:Ou,property:un,propertyOf:function(e){return function(t){return null==e?void 0:Ge(e,t)}},range:bc,rangeRight:_c,stubArray:Bt,stubFalse:Se,stubObject:function(){return{}},stubString:function(){return""},stubTrue:function(){return!0},times:function(e,t){if(e=g(e),1>e||9007199254740991<e)return[];var a=4294967295,i=lo(e,4294967295);t=Nn(t),e-=4294967295;for(var r=ve(i,t);++a<e;)t(a);return r},toPath:function(e){return Eo(e)?f(e,We):l(e)?[e]:N(hl(Me(e)))},uniqueId:Ai},yp=fo,xp=lo,vp=4294967295,wp=Array.prototype,Sp=Object.prototype,kp=Sp.hasOwnProperty,Tp=bo?bo.iterator:void 0,Ep=lo,Ap=function(e){return function(t,n,a){if(null==a){var i=p(n),r=i&&Be(n),o=r&&r.length&&ra(n,r);(o?o.length:i)||(a=n,n=t,t=this)}return e(t,n,a)}}(Ca);O.after=up.after,O.ary=up.ary,O.assign=mp.assign,O.assignIn=mp.assignIn,O.assignInWith=mp.assignInWith,O.assignWith=mp.assignWith,O.at=mp.at,O.before=up.before,O.bind=up.bind,O.bindAll=_p.bindAll,O.bindKey=up.bindKey,O.castArray=cp.castArray,O.chain=gp.chain,O.chunk=dp.chunk,O.compact=dp.compact,O.concat=dp.concat,O.cond=_p.cond,O.conforms=_p.conforms,O.constant=_p.constant,O.countBy=fp.countBy,O.create=mp.create,O.curry=up.curry,O.curryRight=up.curryRight,O.debounce=up.debounce,O.defaults=mp.defaults,O.defaultsDeep=mp.defaultsDeep,O.defer=up.defer,O.delay=up.delay,O.difference=dp.difference,O.differenceBy=dp.differenceBy,O.differenceWith=dp.differenceWith,O.drop=dp.drop,O.dropRight=dp.dropRight,O.dropRightWhile=dp.dropRightWhile,O.dropWhile=dp.dropWhile,O.fill=dp.fill,O.filter=fp.filter,O.flatMap=fp.flatMap,O.flatMapDeep=fp.flatMapDeep,O.flatMapDepth=fp.flatMapDepth,O.flatten=dp.flatten,O.flattenDeep=dp.flattenDeep,O.flattenDepth=dp.flattenDepth,O.flip=up.flip,O.flow=_p.flow,O.flowRight=_p.flowRight,O.fromPairs=dp.fromPairs,O.functions=mp.functions,O.functionsIn=mp.functionsIn,O.groupBy=fp.groupBy,O.initial=dp.initial,O.intersection=dp.intersection,O.intersectionBy=dp.intersectionBy,O.intersectionWith=dp.intersectionWith,O.invert=mp.invert,O.invertBy=mp.invertBy,O.invokeMap=fp.invokeMap,O.iteratee=_p.iteratee,O.keyBy=fp.keyBy,O.keys=Be,O.keysIn=mp.keysIn,O.map=fp.map,O.mapKeys=mp.mapKeys,O.mapValues=mp.mapValues,O.matches=_p.matches,O.matchesProperty=_p.matchesProperty,O.memoize=up.memoize,O.merge=mp.merge,O.mergeWith=mp.mergeWith,O.method=_p.method,O.methodOf=_p.methodOf,O.mixin=Ap,O.negate=Ia,O.nthArg=_p.nthArg,O.omit=mp.omit,O.omitBy=mp.omitBy,O.once=up.once,O.orderBy=fp.orderBy,O.over=_p.over,O.overArgs=up.overArgs,O.overEvery=_p.overEvery,O.overSome=_p.overSome,O.partial=up.partial,O.partialRight=up.partialRight,O.partition=fp.partition,O.pick=mp.pick,O.pickBy=mp.pickBy,O.property=_p.property,O.propertyOf=_p.propertyOf,O.pull=dp.pull,O.pullAll=dp.pullAll,O.pullAllBy=dp.pullAllBy,O.pullAllWith=dp.pullAllWith,O.pullAt=dp.pullAt,O.range=_p.range,O.rangeRight=_p.rangeRight,O.rearg=up.rearg,O.reject=fp.reject,O.remove=dp.remove,O.rest=up.rest,O.reverse=dp.reverse,O.sampleSize=fp.sampleSize,O.set=mp.set,O.setWith=mp.setWith,O.shuffle=fp.shuffle,O.slice=dp.slice,O.sortBy=fp.sortBy,O.sortedUniq=dp.sortedUniq,O.sortedUniqBy=dp.sortedUniqBy,O.split=bp.split,O.spread=up.spread,O.tail=dp.tail,O.take=dp.take,O.takeRight=dp.takeRight,O.takeRightWhile=dp.takeRightWhile,O.takeWhile=dp.takeWhile,O.tap=gp.tap,O.throttle=up.throttle,O.thru=xi,O.toArray=cp.toArray,O.toPairs=mp.toPairs,O.toPairsIn=mp.toPairsIn,O.toPath=_p.toPath,O.toPlainObject=cp.toPlainObject,O.transform=mp.transform,O.unary=up.unary,O.union=dp.union,O.unionBy=dp.unionBy,O.unionWith=dp.unionWith,O.uniq=dp.uniq,O.uniqBy=dp.uniqBy,O.uniqWith=dp.uniqWith,O.unset=mp.unset,O.unzip=dp.unzip,O.unzipWith=dp.unzipWith,O.update=mp.update,O.updateWith=mp.updateWith,O.values=mp.values,O.valuesIn=mp.valuesIn,O.without=dp.without,O.words=bp.words,O.wrap=up.wrap,O.xor=dp.xor,O.xorBy=dp.xorBy,O.xorWith=dp.xorWith,O.zip=dp.zip,O.zipObject=dp.zipObject,O.zipObjectDeep=dp.zipObjectDeep,O.zipWith=dp.zipWith,O.entries=mp.toPairs,O.entriesIn=mp.toPairsIn,O.extend=mp.assignIn,O.extendWith=mp.assignInWith,Ap(O,O),O.add=pp.add,O.attempt=_p.attempt,O.camelCase=bp.camelCase,O.capitalize=bp.capitalize,O.ceil=pp.ceil,O.clamp=hp.clamp,O.clone=cp.clone,O.cloneDeep=cp.cloneDeep,O.cloneDeepWith=cp.cloneDeepWith,O.cloneWith=cp.cloneWith,O.conformsTo=cp.conformsTo,O.deburr=bp.deburr,O.defaultTo=_p.defaultTo,O.divide=pp.divide,O.endsWith=bp.endsWith,O.eq=cp.eq,O.escape=bp.escape,O.escapeRegExp=bp.escapeRegExp,O.every=fp.every,O.find=fp.find,O.findIndex=dp.findIndex,O.findKey=mp.findKey,O.findLast=fp.findLast,O.findLastIndex=dp.findLastIndex,O.findLastKey=mp.findLastKey,O.floor=pp.floor,O.forEach=fp.forEach,O.forEachRight=fp.forEachRight,O.forIn=mp.forIn,O.forInRight=mp.forInRight,O.forOwn=mp.forOwn,O.forOwnRight=mp.forOwnRight,O.get=mp.get,O.gt=cp.gt,O.gte=cp.gte,O.has=mp.has,O.hasIn=mp.hasIn,O.head=dp.head,O.identity=b,O.includes=fp.includes,O.indexOf=dp.indexOf,O.inRange=hp.inRange,O.invoke=mp.invoke,O.isArguments=cp.isArguments,O.isArray=Eo,O.isArrayBuffer=cp.isArrayBuffer,O.isArrayLike=cp.isArrayLike,O.isArrayLikeObject=cp.isArrayLikeObject,O.isBoolean=cp.isBoolean,O.isBuffer=cp.isBuffer,O.isDate=cp.isDate,O.isElement=cp.isElement,O.isEmpty=cp.isEmpty,O.isEqual=cp.isEqual,O.isEqualWith=cp.isEqualWith,O.isError=cp.isError,O.isFinite=cp.isFinite,O.isFunction=cp.isFunction,O.isInteger=cp.isInteger,O.isLength=cp.isLength,O.isMap=cp.isMap,O.isMatch=cp.isMatch,O.isMatchWith=cp.isMatchWith,O.isNaN=cp.isNaN,O.isNative=cp.isNative,O.isNil=cp.isNil,O.isNull=cp.isNull,O.isNumber=cp.isNumber,O.isObject=p,O.isObjectLike=cp.isObjectLike,O.isPlainObject=cp.isPlainObject,O.isRegExp=cp.isRegExp,O.isSafeInteger=cp.isSafeInteger,O.isSet=cp.isSet,O.isString=cp.isString,O.isSymbol=cp.isSymbol,O.isTypedArray=cp.isTypedArray,O.isUndefined=cp.isUndefined,O.isWeakMap=cp.isWeakMap,O.isWeakSet=cp.isWeakSet,O.join=dp.join,O.kebabCase=bp.kebabCase,O.last=Dn,O.lastIndexOf=dp.lastIndexOf,O.lowerCase=bp.lowerCase,O.lowerFirst=bp.lowerFirst,O.lt=cp.lt,O.lte=cp.lte,O.max=pp.max,O.maxBy=pp.maxBy,O.mean=pp.mean,O.meanBy=pp.meanBy,O.min=pp.min,O.minBy=pp.minBy,O.stubArray=_p.stubArray,O.stubFalse=_p.stubFalse,O.stubObject=_p.stubObject,O.stubString=_p.stubString,O.stubTrue=_p.stubTrue,O.multiply=pp.multiply,O.nth=dp.nth,O.noop=_p.noop,O.now={now:pf}.now,O.pad=bp.pad,O.padEnd=bp.padEnd,O.padStart=bp.padStart,O.parseInt=bp.parseInt,O.random=hp.random,O.reduce=fp.reduce,O.reduceRight=fp.reduceRight,O.repeat=bp.repeat,O.replace=bp.replace,O.result=mp.result,O.round=pp.round,O.sample=fp.sample,O.size=fp.size,O.snakeCase=bp.snakeCase,O.some=fp.some,O.sortedIndex=dp.sortedIndex,O.sortedIndexBy=dp.sortedIndexBy,O.sortedIndexOf=dp.sortedIndexOf,O.sortedLastIndex=dp.sortedLastIndex,O.sortedLastIndexBy=dp.sortedLastIndexBy,O.sortedLastIndexOf=dp.sortedLastIndexOf,O.startCase=bp.startCase,O.startsWith=bp.startsWith,O.subtract=pp.subtract,O.sum=pp.sum,O.sumBy=pp.sumBy,O.template=bp.template,O.times=_p.times,O.toFinite=cp.toFinite,O.toInteger=g,O.toLength=cp.toLength,O.toLower=bp.toLower,O.toNumber=cp.toNumber,O.toSafeInteger=cp.toSafeInteger,O.toString=cp.toString,O.toUpper=bp.toUpper,O.trim=bp.trim,O.trimEnd=bp.trimEnd,O.trimStart=bp.trimStart,O.truncate=bp.truncate,O.unescape=bp.unescape,O.uniqueId=_p.uniqueId,O.upperCase=bp.upperCase,O.upperFirst=bp.upperFirst,O.each=fp.forEach,O.eachRight=fp.forEachRight,O.first=dp.head,Ap(O,function(){var e={};return bn(O,function(t,n){kp.call(O.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),O.VERSION="4.17.11",(O.templateSettings=bp.templateSettings).imports._=O,H(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){O[e].placeholder=O}),H(["drop","take"],function(e,t){z.prototype[e]=function(a){a=void 0===a?1:fo(g(a),0);var i=this.__filtered__&&!t?new z(this):this.clone();return i.__filtered__?i.__takeCount__=Ep(a,i.__takeCount__):i.__views__.push({size:Ep(a,vp),type:e+(0>i.__dir__?"Right":"")}),i},z.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),H(["filter","map","takeWhile"],function(e,t){var n=t+1;z.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:cn(e,3),type:n}),t.__filtered__=t.__filtered__||n==1||n==3,t}}),H(["head","last"],function(e,t){var n="take"+(t?"Right":"");z.prototype[e]=function(){return this[n](1).value()[0]}}),H(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");z.prototype[e]=function(){return this.__filtered__?new z(this):this[n](1)}}),z.prototype.compact=function(){return this.filter(b)},z.prototype.find=function(e){return this.filter(e).head()},z.prototype.findLast=function(e){return this.reverse().find(e)},z.prototype.invokeMap=me(function(e,t){return"function"==typeof e?new z(this):this.map(function(n){return _a(n,e,t)})}),z.prototype.reject=function(e){return this.filter(Ia(cn(e)))},z.prototype.slice=function(e,t){e=g(e);var n=this;return n.__filtered__&&(0<e||0>t)?new z(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(t=g(t),n=0>t?n.dropRight(-t):n.take(t-e)),n)},z.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},z.prototype.toArray=function(){return this.take(vp)},bn(z.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),i=O[a?"take"+("last"==t?"Right":""):t],r=a||/^find/.test(t);i&&(O.prototype[t]=function(){var t=this.__wrapped__,o=a?[1]:arguments,s=t instanceof z,l=o[0],d=s||Eo(t),f=function(e){var t=i.apply(O,qe([e],o));return a&&u?t[0]:t};d&&n&&"function"==typeof l&&1!=l.length&&(s=d=!1);var u=this.__chain__,c=!!this.__actions__.length,p=r&&!u,h=s&&!c;if(!r&&d){t=h?t:new z(this);var m=e.apply(t,o);return m.__actions__.push({func:xi,args:[f],thisArg:void 0}),new R(m,u)}return p&&h?e.apply(this,o):(m=this.thru(f),p?a?m.value()[0]:m.value():m)})}),H(["pop","push","shift","sort","splice","unshift"],function(e){var t=wp[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);O.prototype[e]=function(){var e=arguments;if(a&&!this.__chain__){var i=this.value();return t.apply(Eo(i)?i:[],e)}return this[n](function(n){return t.apply(Eo(n)?n:[],e)})}}),bn(z.prototype,function(e,t){var n=O[t];if(n){var a=n.name+"",i=as[a]||(as[a]=[]);i.push({name:t,func:n})}}),as[ie(void 0,2).name]=[{name:"wrapper",func:void 0}],z.prototype.clone=function(){var e=new z(this.__wrapped__);return e.__actions__=N(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=N(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=N(this.__views__),e},z.prototype.reverse=function(){if(this.__filtered__){var e=new z(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},z.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Eo(e),a=0>t,i=n?e.length:0,r=ji(0,i,this.__views__),o=r.start,s=r.end,l=s-o,d=a?s:o-1,f=this.__iteratees__,u=f.length,c=0,p=lo(l,this.__takeCount__);if(!n||!a&&i==l&&p==l)return vi(e,this.__actions__);var h=[];outer:for(;l--&&c<p;){d+=t;for(var m=-1,g=e[d];++m<u;){var b=f[m],_=b.iteratee,y=b.type,x=_(g);if(y==2)g=x;else if(!x)if(1==y)continue outer;else break outer}h[c++]=g}return h},O.prototype.at=gp.at,O.prototype.chain=gp.wrapperChain,O.prototype.commit=gp.commit,O.prototype.next=gp.next,O.prototype.plant=gp.plant,O.prototype.reverse=gp.reverse,O.prototype.toJSON=O.prototype.valueOf=O.prototype.value=gp.value,O.prototype.first=O.prototype.head,Tp&&(O.prototype[Tp]=gp.toIterator);(function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n?a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i):a.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}})(".gl-tilelayer-tile {\n  -ms-interpolation-mode: nearest-neighbor;\n      image-rendering: -moz-crisp-edges;\n      image-rendering: pixelated;\n  image-rendering: crisp-edges;\n}\n");var Bp=16,Cp=[0,0,0,0],Ip="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window,Lp=Ri(function(e){(function(t,n){e.exports=n()})(Ip,function(){function e(e){return"undefined"==typeof atob?"base64:"+e:atob(e)}function t(e){var t=new Error("(regl) "+e);throw console.error(t),t}function n(e,n){e||t(n)}function a(e){return e?": "+e:""}function i(e,n,i){e in n||t("unknown parameter ("+e+")"+a(i)+". possible values: "+Object.keys(n).join())}function r(e,n,i){0>n.indexOf(e)&&t("invalid value"+a(i)+". must be one of: "+n)}function o(e,t){for(e+="";e.length<t;)e=" "+e;return e}function s(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function l(e,t){this.number=e,this.line=t,this.errors=[]}function d(e,t,n){this.file=e,this.line=t,this.message=n}function f(){var e=new Error,t=(e.stack||e).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);if(n)return n[1];var a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t);return a?a[1]:"unknown"}function u(){var e=new Error,t=(e.stack||e).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);if(n)return n[1];var a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t);return a?a[1]:"unknown"}function c(t,n){var a=t.split("\n"),r=1,o=0,d={unknown:new s,0:new s};d.unknown.name=d[0].name=n||f(),d.unknown.lines.push(new l(0,""));for(var u=0;u<a.length;++u){var c=a[u],p=/^\s*\#\s*(\w+)\s+(.+)\s*$/.exec(c);if(p)switch(p[1]){case"line":var h=/(\d+)(\s+\d+)?/.exec(p[2]);h&&(r=0|h[1],h[2]&&(o=0|h[2],!(o in d)&&(d[o]=new s)));break;case"define":var m=/SHADER_NAME(_B64)?\s+(.*)$/.exec(p[2]);m&&(d[o].name=m[1]?e(m[2]):m[2]);}d[o].lines.push(new l(r++,c))}return Object.keys(d).forEach(function(e){var t=d[e];t.lines.forEach(function(e){t.index[e.number]=e})}),d}function p(e){var t=[];return e.split("\n").forEach(function(e){if(!(5>e.length)){var n=/^ERROR\:\s+(\d+)\:(\d+)\:\s*(.*)$/.exec(e);n?t.push(new d(0|n[1],0|n[2],n[3].trim())):0<e.length&&t.push(new d("unknown",0,e))}}),t}function h(e,t){t.forEach(function(t){var n=e[t.file];if(n){var a=n.index[t.line];if(a)return a.errors.push(t),void(n.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(t)})}function m(e){e._commandRef=f()}function g(e,t,n,a){function i(e){return e?a.id(e):0}function r(e,t){Object.keys(t).forEach(function(t){e[a.id(t)]=!0})}m(e),e._fragId=i(e.static.frag),e._vertId=i(e.static.vert);var o=e._uniformSet={};r(o,t.static),r(o,t.dynamic);var s=e._attributeSet={};r(s,n.static),r(s,n.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic}function b(e,n){var a=u();t(e+" in command "+(n||f())+("unknown"===a?"":" called from "+a))}function _(e,t,n,i){e in t||b("unknown parameter ("+e+")"+a(n)+". possible values: "+Object.keys(t).join(),i||f())}function y(e,t,n,i){typeof e!==t&&b("invalid parameter type"+a(n)+". expected "+t+", got "+typeof e,i||f())}function x(e,t){return 32820===e||32819===e||33635===e?2:34042===e?4:Ne[e]*t}function v(e){return!(e&e-1)&&!!e}function w(e,t){this.id=Oe++,this.type=e,this.data=t}function S(e){return e.replace(/\\/g,"\\\\").replace(/"/g,"\\\"")}function k(e){if(0===e.length)return[];var t=e.charAt(0),n=e.charAt(e.length-1);if(1<e.length&&t===n&&("\""===t||"'"===t))return["\""+S(e.substr(1,e.length-2))+"\""];var a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(a)return k(e.substr(0,a.index)).concat(k(a[1])).concat(k(e.substr(a.index+a[0].length)));var r=e.split(".");if(1===r.length)return["\""+S(e)+"\""];for(var o=[],s=0;s<r.length;++s)o=o.concat(k(r[s]));return o}function T(e){return"["+k(e).join("][")+"]"}function E(){var e={"":0},t=[""];return{id:function(n){var a=e[n];return a?a:(a=e[n]=t.length,t.push(n),a)},str:function(e){return t[e]}}}function A(e,t,n){function a(){var t=window.innerWidth,a=window.innerHeight;if(e!==document.body){var r=e.getBoundingClientRect();t=r.right-r.left,a=r.bottom-r.top}i.width=n*t,i.height=n*a,De(i.style,{width:t+"px",height:a+"px"})}var i=document.createElement("canvas");return De(i.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(i),e===document.body&&(i.style.position="absolute",De(e.style,{margin:0,padding:0})),window.addEventListener("resize",a,!1),a(),{canvas:i,onDestroy:function(){window.removeEventListener("resize",a),e.removeChild(i)}}}function B(e,t){function n(n){try{return e.getContext(n,t)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function C(e){return"string"==typeof e.nodeName&&"function"==typeof e.appendChild&&"function"==typeof e.getBoundingClientRect}function I(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}function z(e){return"string"==typeof e?e.split():(Fe(Array.isArray(e),"invalid extension array"),e)}function j(e){return"string"==typeof e?(Fe("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function D(e){var t=e||{},n={},a=[],i=[],r="undefined"==typeof window?1:window.devicePixelRatio,o=!1,s=function(e){e&&Fe.raise(e)},l=function(){},d,f,u,c;if("string"==typeof t?(Fe("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),d=document.querySelector(t),Fe(d,"invalid query string for element")):"object"==typeof t?C(t)?d=t:I(t)?(c=t,u=c.canvas):(Fe.constructor(t),"gl"in t?c=t.gl:"canvas"in t?u=j(t.canvas):"container"in t&&(f=j(t.container)),"attributes"in t&&(n=t.attributes,Fe.type(n,"object","invalid context attributes")),"extensions"in t&&(a=z(t.extensions)),"optionalExtensions"in t&&(i=z(t.optionalExtensions)),"onDone"in t&&(Fe.type(t.onDone,"function","invalid or missing onDone callback"),s=t.onDone),"profile"in t&&(o=!!t.profile),"pixelRatio"in t&&(r=+t.pixelRatio,Fe(0<r,"invalid pixel ratio"))):Fe.raise("invalid arguments to regl"),d&&("canvas"===d.nodeName.toLowerCase()?u=d:f=d),!c){if(!u){Fe("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var p=A(f||document.body,s,r);if(!p)return null;u=p.canvas,l=p.onDestroy}c=B(u,n)}return c?{gl:c,canvas:u,container:f,extensions:a,optionalExtensions:i,pixelRatio:r,profile:o,onDone:s,onDestroy:l}:(l(),s("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function R(e,t){function n(t){Fe.type(t,"string","extension name must be string");var n=t.toLowerCase(),i;try{i=a[n]=e.getExtension(n)}catch(t){}return!!i}for(var a={},r=0,o;r<t.extensions.length;++r)if(o=t.extensions[r],!n(o))return t.onDestroy(),t.onDone("\""+o+"\" extension is not supported by the current WebGL context, try upgrading your system or a different browser"),null;return t.optionalExtensions.forEach(n),{extensions:a,restore:function(){Object.keys(a).forEach(function(e){if(a[e]&&!n(e))throw new Error("(regl): error restoring extension "+e)})}}}function N(e,t){for(var n=Array(e),a=0;a<e;++a)n[a]=t(a);return n}function F(e){for(var t=16;t<=268435456;t*=16)if(e<=t)return t;return 0}function O(e){var t,n;return t=(65535<e)<<4,e>>>=t,n=(255<e)<<3,e>>>=n,t|=n,n=(15<e)<<2,e>>>=n,t|=n,n=(3<e)<<1,e>>>=n,t|=n,t|e>>1}function P(){function e(e){var t=F(e),n=a[O(t)>>2];return 0<n.length?n.pop():new ArrayBuffer(t)}function t(e){a[O(e.byteLength)>>2].push(e)}var a=N(8,function(){return[]});return{alloc:e,free:t,allocType:function(t,a){var n=null;switch(t){case 5120:n=new Int8Array(e(a),0,a);break;case 5121:n=new Uint8Array(e(a),0,a);break;case 5122:n=new Int16Array(e(2*a),0,a);break;case 5123:n=new Uint16Array(e(2*a),0,a);break;case 5124:n=new Int32Array(e(4*a),0,a);break;case 5125:n=new Uint32Array(e(4*a),0,a);break;case 5126:n=new Float32Array(e(4*a),0,a);break;default:return null;}return n.length===a?n:n.subarray(0,a)},freeType:function(e){t(e.buffer)}}}function M(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||je(e.data))}function V(e,t,n){for(var a=0;a<t;++a)n[a]=e[a]}function W(e,t,n,a){for(var r=0,o=0,s;o<t;++o){s=e[o];for(var l=0;l<n;++l)a[r++]=s[l]}}function G(e,t,n,a,r,o){for(var s=o,l=0,d;l<t;++l){d=e[l];for(var f=0,u;f<n;++f){u=d[f];for(var c=0;c<a;++c)r[s++]=u[c]}}}function H(e,t,a,r,o){for(var s=1,l=a+1;l<t.length;++l)s*=t[l];var d=t[a];if(4==t.length-a){var n=t[a+1],f=t[a+2],u=t[a+3];for(l=0;l<d;++l)G(e[l],n,f,u,r,o),o+=s}else for(l=0;l<d;++l)H(e[l],t,a+1,r,o),o+=s}function U(e){return 0|$e[Object.prototype.toString.call(e)]}function q(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function Z(e,t,n,a,r,o,s){for(var l=0,d=0;d<n;++d)for(var f=0;f<a;++f)e[l++]=t[r*d+o*f+s]}function X(e,t,n,a){function i(t){this.id=l++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,n.profile&&(this.stats={size:0})}function r(t,n,a){t.byteLength=n.byteLength,e.bufferData(t.type,n,a)}function o(e,t,n,a,o,s){var l;if(e.usage=n,Array.isArray(t)){if(e.dtype=a||5126,0<t.length){var d;if(Array.isArray(t[0])){l=nt(t);for(var f=1,u=1;u<l.length;++u)f*=l[u];e.dimension=f,d=tt(t,l,e.dtype),r(e,d,n),s?e.persistentData=d:We.freeType(d)}else if("number"==typeof t[0]){e.dimension=o;var c=We.allocType(e.dtype,t.length);q(c,t),r(e,c,n),s?e.persistentData=c:We.freeType(c)}else je(t[0])?(e.dimension=t[0].length,e.dtype=a||U(t[0])||5126,d=tt(t,[t.length,t[0].length],e.dtype),r(e,d,n),s?e.persistentData=d:We.freeType(d)):Fe.raise("invalid buffer data")}}else if(je(t))e.dtype=a||U(t),e.dimension=o,r(e,t,n),s&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(M(t)){l=t.shape;var p=t.stride,h=t.offset,m=0,g=0,b=0,_=0;1===l.length?(m=l[0],g=1,b=p[0],_=0):2===l.length?(m=l[0],g=l[1],b=p[0],_=p[1]):Fe.raise("invalid shape"),e.dtype=a||U(t.data)||5126,e.dimension=g;var y=We.allocType(e.dtype,m*g);Z(y,t.data,m,g,b,_,h),r(e,y,n),s?e.persistentData=y:We.freeType(y)}else Fe.raise("invalid buffer data")}function s(n){t.bufferCount--;for(var r=0,o;r<a.state.length;++r)o=a.state[r],o.buffer===n&&(e.disableVertexAttribArray(r),o.buffer=null);var s=n.buffer;Fe(s,"buffer must not be deleted already"),e.deleteBuffer(s),n.buffer=null,delete d[n.id]}var l=0,d={};i.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},i.prototype.destroy=function(){s(this)};var f=[];return n.profile&&(t.getTotalBufferSize=function(){var e=0;return Object.keys(d).forEach(function(t){e+=d[t].stats.size}),e}),{create:function(a,r,l,f){function u(t){var a=35044,i=null,r=0,s=0,l=1;return Array.isArray(t)||je(t)||M(t)?i=t:"number"==typeof t?r=0|t:t&&(Fe.type(t,"object","buffer arguments must be an object, a number or an array"),"data"in t&&(Fe(null===i||Array.isArray(i)||je(i)||M(i),"invalid data for buffer"),i=t.data),"usage"in t&&(Fe.parameter(t.usage,et,"invalid buffer usage"),a=et[t.usage]),"type"in t&&(Fe.parameter(t.type,Je,"invalid buffer type"),s=Je[t.type]),"dimension"in t&&(Fe.type(t.dimension,"number","invalid dimension"),l=0|t.dimension),"length"in t&&(Fe.nni(r,"buffer length must be a nonnegative integer"),r=0|t.length)),p.bind(),i?o(p,i,a,s,l,f):(r&&e.bufferData(p.type,r,a),p.dtype=s||5121,p.usage=a,p.dimension=l,p.byteLength=r),n.profile&&(p.stats.size=p.byteLength*at[p.dtype]),u}function c(t,n){Fe(n+t.byteLength<=p.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+p.byteLength),e.bufferSubData(p.type,n,t)}t.bufferCount++;var p=new i(r);return d[p.id]=p,l||u(a),u._reglType="buffer",u._buffer=p,u.subdata=function(e,t){var n=0|(t||0),a;if(p.bind(),je(e))c(e,n);else if(Array.isArray(e)){if(0<e.length)if("number"==typeof e[0]){var i=We.allocType(p.dtype,e.length);q(i,e),c(i,n),We.freeType(i)}else if(Array.isArray(e[0])||je(e[0])){a=nt(e);var r=tt(e,a,p.dtype);c(r,n),We.freeType(r)}else Fe.raise("invalid buffer data");}else if(M(e)){a=e.shape;var o=e.stride,s=0,l=0,d=0,f=0;1===a.length?(s=a[0],l=1,d=o[0],f=0):2===a.length?(s=a[0],l=a[1],d=o[0],f=o[1]):Fe.raise("invalid shape");var h=Array.isArray(e.data)?p.dtype:U(e.data),m=We.allocType(h,s*l);Z(m,e.data,s,l,d,f,e.offset),c(m,n),We.freeType(m)}else Fe.raise("invalid data for buffer subdata");return u},n.profile&&(u.stats=p.stats),u.destroy=function(){s(p)},u},createStream:function(e,t){var n=f.pop();return n||(n=new i(e)),n.bind(),o(n,t,35040,0,1,!1),n},destroyStream:function(e){f.push(e)},clear:function(){Ye(d).forEach(s),f.forEach(s)},getBuffer:function(e){return e&&e._buffer instanceof i?e._buffer:null},restore:function(){Ye(d).forEach(function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)})},_initBuffer:o}}function K(e,t,n,a){function i(e){this.id=l++,s[this.id]=this,this.buffer=e,this.primType=4,this.vertCount=0,this.type=0}function r(a,i,r,o,s,l,d){if(a.buffer.bind(),i){var f=d;d||je(i)&&(!M(i)||je(i.data))||(f=t.oes_element_index_uint?5125:5123),n._initBuffer(a.buffer,i,r,f,3)}else e.bufferData(34963,l,r),a.buffer.dtype=u||5121,a.buffer.usage=r,a.buffer.dimension=3,a.buffer.byteLength=l;var u=d;if(!d){switch(a.buffer.dtype){case 5121:case 5120:u=5121;break;case 5123:case 5122:u=5123;break;case 5125:case 5124:u=5125;break;default:Fe.raise("unsupported type for element array");}a.buffer.dtype=u}a.type=u,Fe(5125!==u||!!t.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var c=s;0>c&&(c=a.buffer.byteLength,5123===u?c>>=1:5125===u&&(c>>=2)),a.vertCount=c;var p=o;if(0>o){p=4;var h=a.buffer.dimension;1===h&&(p=0),2===h&&(p=1),3===h&&(p=4)}a.primType=p}function o(e){a.elementsCount--,Fe(null!==e.buffer,"must not double destroy elements"),delete s[e.id],e.buffer.destroy(),e.buffer=null}var s={},l=0,d={uint8:5121,uint16:5123};t.oes_element_index_uint&&(d.uint32=5125),i.prototype.bind=function(){this.buffer.bind()};var f=[];return{create:function(e){function t(e){if(!e)s(),l.primType=4,l.vertCount=0,l.type=5121;else if("number"==typeof e)s(e),l.primType=4,l.vertCount=0|e,l.type=5121;else{var n=null,a=35044,i=-1,o=-1,f=0,u=0;Array.isArray(e)||je(e)||M(e)?n=e:(Fe.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,Fe(Array.isArray(n)||je(n)||M(n),"invalid data for element buffer")),"usage"in e&&(Fe.parameter(e.usage,et,"invalid element buffer usage"),a=et[e.usage]),"primitive"in e&&(Fe.parameter(e.primitive,it,"invalid element buffer primitive"),i=it[e.primitive]),"count"in e&&(Fe("number"==typeof e.count&&0<=e.count,"invalid vertex count for elements"),o=0|e.count),"type"in e&&(Fe.parameter(e.type,d,"invalid buffer type"),u=d[e.type]),"length"in e?f=0|e.length:(f=o,5123===u||5122===u?f*=2:(5125===u||5124===u)&&(f*=4))),r(l,n,a,i,o,f,u)}return t}var s=n.create(null,34963,!0),l=new i(s._buffer);return a.elementsCount++,t(e),t._reglType="elements",t._elements=l,t.subdata=function(e,n){return s.subdata(e,n),t},t.destroy=function(){o(l)},t},createStream:function(e){var t=f.pop();return t||(t=new i(n.create(null,34963,!0,!1)._buffer)),r(t,e,35040,-1,-1,0,0),t},destroyStream:function(e){f.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof i?e._elements:null},clear:function(){Ye(s).forEach(o)}}}function Y(e){for(var t=We.allocType(5123,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(e[n]===1/0)t[n]=31744;else if(e[n]===-Infinity)t[n]=64512;else{rt[0]=e[n];var a=ot[0],r=a>>>31<<15,o=(a<<1>>>24)-127,s=a>>13&1023;if(-24>o)t[n]=r;else if(-14>o){t[n]=r+(s+1024>>-14-o)}else t[n]=15<o?r+31744:r+(o+15<<10)+s}return t}function Q(e){return Array.isArray(e)||je(e)}function $(e){return"[object "+e+"]"}function J(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function ee(e){if(!Array.isArray(e))return!1;var t=e.length;return!!(0!==t&&Q(e[0]))}function te(e){return Object.prototype.toString.call(e)}function ne(e){return te(e)===gt}function ae(e){return te(e)===bt}function ie(e){return te(e)===_t}function re(e){return te(e)===yt}function oe(e){return te(e)===xt}function se(e){if(!e)return!1;var t=te(e);return!!(0<=vt.indexOf(t))||J(e)||ee(e)||M(e)}function le(e){return 0|$e[Object.prototype.toString.call(e)]}function de(e,t){var a=t.length;switch(e.type){case 5121:case 5123:case 5125:case 5126:var n=We.allocType(e.type,a);n.set(t),e.data=n;break;case 36193:e.data=Y(t);break;default:Fe.raise("unsupported texture type, must specify a typed array");}}function fe(e,t){return We.allocType(e.type===36193?5126:e.type,t)}function ue(e,t){e.type===36193?(e.data=Y(t),We.freeType(t)):e.data=t}function ce(e,t,n,a,r,o){for(var s=e.width,l=e.height,d=e.channels,f=fe(e,s*l*d),u=0,c=0;c<l;++c)for(var h=0;h<s;++h)for(var m=0;m<d;++m)f[u++]=t[n*h+a*c+r*m+o];ue(e,f)}function pe(e,t,n,a,i,r){var o;if(o="undefined"==typeof St[e]?mt[e]*wt[t]:St[e],r&&(o*=6),i){for(var l=0,d=n;1<=d;)l+=o*d*d,d/=2;return l}return o*n*a}function he(e,t,r,o,s,l,d){function f(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function u(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function p(e,n){if("object"==typeof n&&n){if("premultiplyAlpha"in n&&(Fe.type(n.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=n.premultiplyAlpha),"flipY"in n&&(Fe.type(n.flipY,"boolean","invalid texture flip"),e.flipY=n.flipY),"alignment"in n&&(Fe.oneOf(n.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=n.alignment),"colorSpace"in n&&(Fe.parameter(n.colorSpace,W,"invalid colorSpace"),e.colorSpace=W[n.colorSpace]),"type"in n){var a=n.type;Fe(t.oes_texture_float||"float"!==a&&"float32"!==a,"you must enable the OES_texture_float extension in order to use floating point textures."),Fe(t.oes_texture_half_float||"half float"!==a&&"float16"!==a,"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Fe(t.webgl_depth_texture||"uint16"!==a&&"uint32"!==a&&"depth stencil"!==a,"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Fe.parameter(a,G,"invalid texture type"),e.type=G[a]}var i=e.width,o=e.height,s=e.channels,l=!1;"shape"in n?(Fe(Array.isArray(n.shape)&&2<=n.shape.length,"shape must be an array"),i=n.shape[0],o=n.shape[1],3===n.shape.length&&(s=n.shape[2],Fe(0<s&&4>=s,"invalid number of channels"),l=!0),Fe(0<=i&&i<=r.maxTextureSize,"invalid width"),Fe(0<=o&&o<=r.maxTextureSize,"invalid height")):("radius"in n&&(i=o=n.radius,Fe(0<=i&&i<=r.maxTextureSize,"invalid radius")),"width"in n&&(i=n.width,Fe(0<=i&&i<=r.maxTextureSize,"invalid width")),"height"in n&&(o=n.height,Fe(0<=o&&o<=r.maxTextureSize,"invalid height")),"channels"in n&&(s=n.channels,Fe(0<s&&4>=s,"invalid number of channels"),l=!0)),e.width=0|i,e.height=0|o,e.channels=0|s;var d=!1;if("format"in n){var f=n.format;Fe(t.webgl_depth_texture||"depth"!==f&&"depth stencil"!==f,"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Fe.parameter(f,H,"invalid texture format");var u=e.internalformat=H[f];e.format=he[u],f in G&&!("type"in n)&&(e.type=G[f]),f in U&&(e.compressed=!0),d=!0}!l&&d?e.channels=mt[e.format]:l&&!d?e.channels!==ht[e.format]&&(e.format=e.internalformat=ht[e.channels]):d&&l&&Fe(e.channels===mt[e.format],"number of channels inconsistent with specified format")}}function h(t){e.pixelStorei(37440,t.flipY),e.pixelStorei(37441,t.premultiplyAlpha),e.pixelStorei(37443,t.colorSpace),e.pixelStorei(3317,t.unpackAlignment)}function m(){f.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function g(e,t){var a=null;if(se(t)?a=t:t&&(Fe.type(t,"object","invalid pixel data type"),p(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),se(t.data)&&(a=t.data)),Fe(!e.compressed||a instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),t.copy){Fe(!a,"can not specify copy and data field for the same texture");var i=s.viewportWidth,o=s.viewportHeight;e.width=e.width||i-e.xOffset,e.height=e.height||o-e.yOffset,e.needsCopy=!0,Fe(0<=e.xOffset&&e.xOffset<i&&0<=e.yOffset&&e.yOffset<o&&0<e.width&&e.width<=i&&0<e.height&&e.height<=o,"copy texture read out of bounds")}else if(!a)e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;else if(je(a))e.channels=e.channels||4,e.data=a,"type"in t||5121!==e.type||(e.type=le(a));else if(J(a))e.channels=e.channels||4,de(e,a),e.alignment=1,e.needsFree=!0;else if(M(a)){var l=a.data;Array.isArray(l)||5121!==e.type||(e.type=le(l));var d=a.shape,f=a.stride,u,m,g,b,_,y;3===d.length?(g=d[2],y=f[2]):(Fe(2===d.length,"invalid ndarray pixel data, must be 2 or 3D"),g=1,y=1),u=d[0],m=d[1],b=f[0],_=f[1],e.alignment=1,e.width=u,e.height=m,e.channels=g,e.format=e.internalformat=ht[g],e.needsFree=!0,ce(e,l,b,_,y,a.offset)}else if(ne(a)||ae(a))e.element=ne(a)?a:a.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(ie(a))e.element=a,e.width=a.width,e.height=a.height,e.channels=4;else if(re(a))e.element=a,e.width=a.naturalWidth,e.height=a.naturalHeight,e.channels=4;else if(oe(a))e.element=a,e.width=a.videoWidth,e.height=a.videoHeight,e.channels=4;else if(ee(a)){var x=e.width||a[0].length,v=e.height||a.length,h=e.channels;h=Q(a[0][0])?h||a[0][0].length:h||1;for(var w=Qe.shape(a),S=1,k=0;k<w.length;++k)S*=w[k];var T=fe(e,S);Qe.flatten(a,w,"",T),ue(e,T),e.alignment=1,e.width=x,e.height=v,e.channels=h,e.format=e.internalformat=ht[h],e.needsFree=!0}5126===e.type?Fe(0<=r.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===e.type&&Fe(0<=r.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function b(t,n,a){var i=t.element,r=t.data,s=t.internalformat,l=t.format,d=t.type,f=t.width,u=t.height,c=t.channels;if(h(t),i)e.texImage2D(n,a,l,l,d,i);else if(t.compressed)e.compressedTexImage2D(n,a,s,f,u,0,r);else if(t.needsCopy)o(),e.copyTexImage2D(n,a,l,t.xOffset,t.yOffset,f,u,0);else{var p=!r;p&&(r=We.zero.allocType(d,f*u*c)),e.texImage2D(n,a,l,f,u,0,l,d,r),p&&r&&We.zero.freeType(r)}}function _(t,n,a,i,r){var s=t.element,l=t.data,d=t.internalformat,f=t.format,u=t.type,c=t.width,p=t.height;h(t),s?e.texSubImage2D(n,r,a,i,f,u,s):t.compressed?e.compressedTexSubImage2D(n,r,a,i,d,c,p,l):t.needsCopy?(o(),e.copyTexSubImage2D(n,r,a,i,t.xOffset,t.yOffset,c,p)):e.texSubImage2D(n,r,a,i,c,p,f,u,l)}function v(){return me.pop()||new m}function w(e){e.needsFree&&We.freeType(e.data),m.call(e),me.push(e)}function S(){f.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function k(e,t,n){var a=e.images[0]=v();e.mipmask=1,a.width=e.width=t,a.height=e.height=n,a.channels=e.channels=4}function T(e,t){var n=null;if(se(t))n=e.images[0]=v(),u(n,e),g(n,t),e.mipmask=1;else if(p(e,t),Array.isArray(t.mipmap))for(var a=t.mipmap,r=0;r<a.length;++r)n=e.images[r]=v(),u(n,e),n.width>>=r,n.height>>=r,g(n,a[r]),e.mipmask|=1<<r;else n=e.images[0]=v(),u(n,e),g(n,t),e.mipmask=1;u(e,e.images[0]),(e.compressed&&33776===e.internalformat||33777===e.internalformat||33778===e.internalformat||33779===e.internalformat)&&Fe(0==e.width%4&&0==e.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function E(e,t){for(var n=e.images,a=0;a<n.length;++a){if(!n[a])return;b(n[a],t,a)}}function A(){var e=ge.pop()||new S;f.call(e),e.mipmask=0;for(var t=0;16>t;++t)e.images[t]=null;return e}function B(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&w(t[n]),t[n]=null;ge.push(e)}function C(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function I(e,t){if("min"in t){var n=t.min;Fe.parameter(n,V),e.minFilter=V[n],0<=pt.indexOf(e.minFilter)&&!("faces"in t)&&(e.genMipmaps=!0)}if("mag"in t){var a=t.mag;Fe.parameter(a,P),e.magFilter=P[a]}var i=e.wrapS,o=e.wrapT;if("wrap"in t){var s=t.wrap;"string"==typeof s?(Fe.parameter(s,O),i=o=O[s]):Array.isArray(s)&&(Fe.parameter(s[0],O),Fe.parameter(s[1],O),i=O[s[0]],o=O[s[1]])}else{if("wrapS"in t){var l=t.wrapS;Fe.parameter(l,O),i=O[l]}if("wrapT"in t){var d=t.wrapT;Fe.parameter(d,O),o=O[d]}}if(e.wrapS=i,e.wrapT=o,"anisotropic"in t){var f=t.anisotropic;Fe("number"==typeof f&&1<=f&&f<=r.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic}if("mipmap"in t){var u=!1;switch(typeof t.mipmap){case"string":Fe.parameter(t.mipmap,F,"invalid mipmap hint"),e.mipmapHint=F[t.mipmap],e.genMipmaps=!0,u=!0;break;case"boolean":u=e.genMipmaps=t.mipmap;break;case"object":Fe(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,u=!0;break;default:Fe.raise("invalid mipmap type");}u&&!("min"in t)&&(e.minFilter=9984)}}function z(n,a){e.texParameteri(a,10241,n.minFilter),e.texParameteri(a,10240,n.magFilter),e.texParameteri(a,10242,n.wrapS),e.texParameteri(a,10243,n.wrapT),t.ext_texture_filter_anisotropic&&e.texParameteri(a,34046,n.anisotropic),n.genMipmaps&&(e.hint(33170,n.mipmapHint),e.generateMipmap(a))}function j(t){f.call(this),this.mipmask=0,this.internalformat=6408,this.id=be++,this.refCount=1,this.target=t,this.texture=e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new C,d.profile&&(this.stats={size:0})}function D(t){e.activeTexture(33984),e.bindTexture(t.target,t.texture)}function R(){var t=xe[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(3553,null)}function N(t){var n=t.texture;Fe(n,"must not double destroy texture");var a=t.unit,i=t.target;0<=a&&(e.activeTexture(33984+a),e.bindTexture(i,null),xe[a]=null),e.deleteTexture(n),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete _e[t.id],l.textureCount--}var F={"don't care":4352,"dont care":4352,nice:4354,fast:4353},O={repeat:10497,clamp:33071,mirror:33648},P={nearest:9728,linear:9729},V=De({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},P),W={none:0,browser:37444},G={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},H={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},U={};t.ext_srgb&&(H.srgb=35904,H.srgba=35906),t.oes_texture_float&&(G.float32=G.float=5126),t.oes_texture_half_float&&(G.float16=G["half float"]=36193),t.webgl_depth_texture&&(De(H,{depth:6402,"depth stencil":34041}),De(G,{uint16:5123,uint32:5125,"depth stencil":34042})),t.webgl_compressed_texture_s3tc&&De(U,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),t.webgl_compressed_texture_atc&&De(U,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),t.webgl_compressed_texture_pvrtc&&De(U,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),t.webgl_compressed_texture_etc1&&(U["rgb etc1"]=36196);var q=Array.prototype.slice.call(e.getParameter(34467));Object.keys(U).forEach(function(e){var t=U[e];0<=q.indexOf(t)&&(H[e]=t)});var Z=Object.keys(H);r.textureFormats=Z;var X=[];Object.keys(H).forEach(function(e){var t=H[e];X[t]=e});var K=[];Object.keys(G).forEach(function(e){var t=G[e];K[t]=e});var Y=[];Object.keys(P).forEach(function(e){var t=P[e];Y[t]=e});var $=[];Object.keys(V).forEach(function(e){var t=V[e];$[t]=e});var te=[];Object.keys(O).forEach(function(e){var t=O[e];te[t]=e});var he=Z.reduce(function(e,t){var n=H[t];return e[n]=6409===n||6406===n||6409===n||6410===n||6402===n||34041===n?n:32855===n||0<=t.indexOf("rgba")?6408:6407,e},{}),me=[],ge=[],be=0,_e={},ye=r.maxTextureUnits,xe=Array(ye).map(function(){return null});return De(j.prototype,{bind:function(){var t=this;t.bindCount+=1;var n=t.unit;if(0>n){for(var a=0,r;a<ye;++a){if(r=xe[a],r){if(0<r.bindCount)continue;r.unit=-1}xe[a]=t,n=a;break}n>=ye&&Fe.raise("insufficient number of texture units"),d.profile&&l.maxTextureUnits<n+1&&(l.maxTextureUnits=n+1),t.unit=n,e.activeTexture(33984+n),e.bindTexture(t.target,t.texture)}return n},unbind:function(){this.bindCount-=1},decRef:function(){0>=--this.refCount&&N(this)}}),d.profile&&(l.getTotalTextureSize=function(){var e=0;return Object.keys(_e).forEach(function(t){e+=_e[t].stats.size}),e}),{create2D:function(t,n){function o(e,t){var n=s.texInfo;C.call(n);var a=A();return"number"==typeof e?"number"==typeof t?k(a,0|e,0|t):k(a,0|e,0|e):e?(Fe.type(e,"object","invalid arguments to regl.texture"),I(n,e),T(a,e)):k(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),s.mipmask=a.mipmask,u(s,a),Fe.texture2D(n,a,r),s.internalformat=a.internalformat,o.width=a.width,o.height=a.height,D(s),E(a,3553),z(n,3553),R(),B(a),d.profile&&(s.stats.size=pe(s.internalformat,s.type,a.width,a.height,n.genMipmaps,!1)),o.format=X[s.internalformat],o.type=K[s.type],o.mag=Y[n.magFilter],o.min=$[n.minFilter],o.wrapS=te[n.wrapS],o.wrapT=te[n.wrapT],o}var s=new j(3553);return _e[s.id]=s,l.textureCount++,o(t,n),o.subimage=function(e,t,n,a){Fe(!!e,"must specify image data");var i=0|t,r=0|n,l=0|a,d=v();return u(d,s),d.width=0,d.height=0,g(d,e),d.width=d.width||(s.width>>l)-i,d.height=d.height||(s.height>>l)-r,Fe(s.type===d.type&&s.format===d.format&&s.internalformat===d.internalformat,"incompatible format for texture.subimage"),Fe(0<=i&&0<=r&&i+d.width<=s.width&&r+d.height<=s.height,"texture.subimage write out of bounds"),Fe(s.mipmask&1<<l,"missing mipmap data"),Fe(d.data||d.element||d.needsCopy,"missing image data"),D(s),_(d,3553,i,r,l),R(),w(d),o},o.resize=function(t,n){var a=0|t,r=0|n||a;if(a===s.width&&r===s.height)return o;o.width=s.width=a,o.height=s.height=r,D(s);for(var l=s.channels,f=s.type,u=0,c;s.mipmask>>u;++u){var p=a>>u,h=r>>u;if(!p||!h)break;c=We.zero.allocType(f,p*h*l),e.texImage2D(3553,u,s.format,p,h,0,s.format,s.type,c),c&&We.zero.freeType(c)}return R(),d.profile&&(s.stats.size=pe(s.internalformat,s.type,a,r,!1,!1)),o},o._reglType="texture2d",o._texture=s,d.profile&&(o.stats=s.stats),o.destroy=function(){s.decRef()},o},createCube:function(t,n,a,i,o,s){function f(e,t,n,a,o,l){var m=c.texInfo,g;for(C.call(m),g=0;6>g;++g)h[g]=A();if("number"==typeof e||!e){var b=0|e||1;for(g=0;6>g;++g)k(h[g],b,b)}else if("object"!=typeof e)Fe.raise("invalid arguments to cube map");else if(t)T(h[0],e),T(h[1],t),T(h[2],n),T(h[3],a),T(h[4],o),T(h[5],l);else if(I(m,e),p(c,e),"faces"in e){var s=e.faces;for(Fe(Array.isArray(s)&&6===s.length,"cube faces must be a length 6 array"),g=0;6>g;++g)Fe("object"==typeof s[g]&&!!s[g],"invalid input for cube map face"),u(h[g],c),T(h[g],s[g])}else for(g=0;6>g;++g)T(h[g],e);for(u(c,h[0]),r.npotTextureCube||Fe(st(c.width)&&st(c.height),"your browser does not support non power or two texture dimensions"),c.mipmask=m.genMipmaps?(h[0].width<<1)-1:h[0].mipmask,Fe.textureCube(c,m,h,r),c.internalformat=h[0].internalformat,f.width=h[0].width,f.height=h[0].height,D(c),g=0;6>g;++g)E(h[g],34069+g);for(z(m,34067),R(),d.profile&&(c.stats.size=pe(c.internalformat,c.type,f.width,f.height,m.genMipmaps,!0)),f.format=X[c.internalformat],f.type=K[c.type],f.mag=Y[m.magFilter],f.min=$[m.minFilter],f.wrapS=te[m.wrapS],f.wrapT=te[m.wrapT],g=0;6>g;++g)B(h[g]);return f}var c=new j(34067);_e[c.id]=c,l.cubeCount++;var h=[,,,,,,];return f(t,n,a,i,o,s),f.subimage=function(e,t,n,a,i){Fe(!!t,"must specify image data"),Fe("number"==typeof e&&e===(0|e)&&0<=e&&6>e,"invalid face");var r=0|n,o=0|a,s=0|i,l=v();return u(l,c),l.width=0,l.height=0,g(l,t),l.width=l.width||(c.width>>s)-r,l.height=l.height||(c.height>>s)-o,Fe(c.type===l.type&&c.format===l.format&&c.internalformat===l.internalformat,"incompatible format for texture.subimage"),Fe(0<=r&&0<=o&&r+l.width<=c.width&&o+l.height<=c.height,"texture.subimage write out of bounds"),Fe(c.mipmask&1<<s,"missing mipmap data"),Fe(l.data||l.element||l.needsCopy,"missing image data"),D(c),_(l,34069+e,r,o,s),R(),w(l),f},f.resize=function(t){var n=0|t;if(n!==c.width){f.width=c.width=n,f.height=c.height=n,D(c);for(var a=0;6>a;++a)for(var r=0;c.mipmask>>r;++r)e.texImage2D(34069+a,r,c.format,n>>r,n>>r,0,c.format,c.type,null);return R(),d.profile&&(c.stats.size=pe(c.internalformat,c.type,f.width,f.height,!1,!0)),f}},f._reglType="textureCube",f._texture=c,d.profile&&(f.stats=c.stats),f.destroy=function(){c.decRef()},f},clear:function(){for(var t=0;t<ye;++t)e.activeTexture(33984+t),e.bindTexture(3553,null),xe[t]=null;Ye(_e).forEach(N),l.cubeCount=0,l.textureCount=0},getTexture:function(){return null},restore:function(){for(var t=0,n;t<ye;++t)n=xe[t],n&&(n.bindCount=0,n.unit=-1,xe[t]=null);Ye(_e).forEach(function(t){t.texture=e.createTexture(),e.bindTexture(t.target,t.texture);for(var n=0;32>n;++n)if(0!=(t.mipmask&1<<n))if(3553===t.target)e.texImage2D(3553,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);else for(var a=0;6>a;++a)e.texImage2D(34069+a,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);z(t.texInfo,t.target)})}}}function me(e,t,n){return Dt[e]*t*n}function ge(e,t,n,a,i,r){function o(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var a=0,i=0;t?(a=t.width,i=t.height):n&&(a=n.width,i=n.height),this.width=a,this.height=i}function s(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function l(e,t,n){if(e)if(e.texture){var a=e.texture._texture,i=fo(1,a.width),r=fo(1,a.height);Fe(i===t&&r===n,"inconsistent width/height for supplied texture"),a.refCount+=1}else{var o=e.renderbuffer._renderbuffer;Fe(o.width===t&&o.height===n,"inconsistent width/height for renderbuffer"),o.refCount+=1}}function d(t,n){n&&(n.texture?e.framebufferTexture2D(36160,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(36160,t,36161,n.renderbuffer._renderbuffer.renderbuffer))}function f(e){var t=3553,n=null,a=null,i=e;"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target)),Fe.type(i,"function","invalid attachment data");var r=i._reglType;return"texture2d"===r?(n=i,Fe(3553===t)):"textureCube"===r?(n=i,Fe(34069<=t&&34075>t,"invalid cube map target")):"renderbuffer"===r?(a=i,t=36161):Fe.raise("invalid regl object for attachment"),new o(t,n,a)}function u(e,t,n,r,s){if(n){var l=a.create2D({width:e,height:t,format:r,type:s});return l._texture.refCount=0,new o(3553,l,null)}var d=i.create({width:e,height:t,format:r});return d._renderbuffer.refCount=0,new o(36161,null,d)}function c(e){return e&&(e.texture||e.renderbuffer)}function p(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n),e.width=t,e.height=n)}function h(){this.id=k++,T[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function m(e){e.colorAttachments.forEach(s),s(e.depthAttachment),s(e.stencilAttachment),s(e.depthStencilAttachment)}function g(t){var n=t.framebuffer;Fe(n,"must not double destroy framebuffer"),e.deleteFramebuffer(n),t.framebuffer=null,r.framebufferCount--,delete T[t.id]}function _(t){var a;e.bindFramebuffer(36160,t.framebuffer);var r=t.colorAttachments;for(a=0;a<r.length;++a)d(36064+a,r[a]);for(a=r.length;a<n.maxColorAttachments;++a)e.framebufferTexture2D(36160,36064+a,3553,null,0);e.framebufferTexture2D(36160,33306,3553,null,0),e.framebufferTexture2D(36160,36096,3553,null,0),e.framebufferTexture2D(36160,36128,3553,null,0),d(36096,t.depthAttachment),d(36128,t.stencilAttachment),d(33306,t.depthStencilAttachment);var o=e.checkFramebufferStatus(36160);e.isContextLost()||o===36053||Fe.raise("framebuffer configuration not supported, status = "+Wt[o]),e.bindFramebuffer(36160,x.next?x.next.framebuffer:null),x.cur=x.next,e.getError()}function y(e,a){function o(e,a){var r;Fe(x.next!==s,"can not update framebuffer which is currently in use");var d=0,p=0,h=!0,g=!0,b=null,y=!0,k="rgba",T="uint8",E=1,A=null,B=null,C=null,I=!1;if("number"==typeof e)d=0|e,p=0|a||d;else if(!e)d=p=1;else{Fe.type(e,"object","invalid arguments for framebuffer");var z=e;if("shape"in z){var j=z.shape;Fe(Array.isArray(j)&&2<=j.length,"invalid shape for framebuffer"),d=j[0],p=j[1]}else"radius"in z&&(d=p=z.radius),"width"in z&&(d=z.width),"height"in z&&(p=z.height);("color"in z||"colors"in z)&&(b=z.color||z.colors,Array.isArray(b)&&Fe(1===b.length||t.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in z&&(E=0|z.colorCount,Fe(0<E,"invalid color buffer count")),"colorTexture"in z&&(y=!!z.colorTexture,k="rgba4"),"colorType"in z&&(T=z.colorType,y?(Fe(t.oes_texture_float||"float"!==T&&"float32"!==T,"you must enable OES_texture_float in order to use floating point framebuffer objects"),Fe(t.oes_texture_half_float||"half float"!==T&&"float16"!==T,"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===T||"float16"===T?(Fe(t.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),k="rgba16f"):("float"===T||"float32"===T)&&(Fe(t.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),k="rgba32f"),Fe.oneOf(T,S,"invalid color type")),"colorFormat"in z&&(k=z.colorFormat,0<=v.indexOf(k)?y=!0:0<=w.indexOf(k)?y=!1:y?Fe.oneOf(z.colorFormat,v,"invalid color format for texture"):Fe.oneOf(z.colorFormat,w,"invalid color format for renderbuffer"))),("depthTexture"in z||"depthStencilTexture"in z)&&(I=!!(z.depthTexture||z.depthStencilTexture),Fe(!I||t.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in z&&("boolean"==typeof z.depth?h=z.depth:(A=z.depth,g=!1)),"stencil"in z&&("boolean"==typeof z.stencil?g=z.stencil:(B=z.stencil,h=!1)),"depthStencil"in z&&("boolean"==typeof z.depthStencil?h=g=z.depthStencil:(C=z.depthStencil,h=!1,g=!1))}var D=null,R=null,N=null,F=null;if(Array.isArray(b))D=b.map(f);else if(b)D=[f(b)];else for(D=Array(E),r=0;r<E;++r)D[r]=u(d,p,y,k,T);Fe(t.webgl_draw_buffers||1>=D.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Fe(D.length<=n.maxColorAttachments,"too many color attachments, not supported"),d=d||D[0].width,p=p||D[0].height,A?R=f(A):h&&!g&&(R=u(d,p,I,"depth","uint32")),B?N=f(B):g&&!h&&(N=u(d,p,!1,"stencil","uint8")),C?F=f(C):!A&&!B&&g&&h&&(F=u(d,p,I,"depth stencil","depth stencil")),Fe(1>=!!A+!!B+!!C,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var O=null;for(r=0;r<D.length;++r)if(l(D[r],d,p),Fe(!D[r]||D[r].texture&&0<=Ot.indexOf(D[r].texture._texture.format)||D[r].renderbuffer&&0<=Vt.indexOf(D[r].renderbuffer._renderbuffer.format),"framebuffer color attachment "+r+" is invalid"),D[r]&&D[r].texture){var P=Pt[D[r].texture._texture.format]*Mt[D[r].texture._texture.type];null===O?O=P:Fe(O===P,"all color attachments much have the same number of bits per pixel.")}return l(R,d,p),Fe(!R||R.texture&&6402===R.texture._texture.format||R.renderbuffer&&33189===R.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object"),l(N,d,p),Fe(!N||N.renderbuffer&&36168===N.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object"),l(F,d,p),Fe(!F||F.texture&&34041===F.texture._texture.format||F.renderbuffer&&34041===F.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object"),m(s),s.width=d,s.height=p,s.colorAttachments=D,s.depthAttachment=R,s.stencilAttachment=N,s.depthStencilAttachment=F,o.color=D.map(c),o.depth=c(R),o.stencil=c(N),o.depthStencil=c(F),o.width=s.width,o.height=s.height,_(s),o}var s=new h;return r.framebufferCount++,o(e,a),De(o,{resize:function(e,t){Fe(x.next!==s,"can not resize a framebuffer which is currently in use");var n=fo(0|e,1),a=fo(0|t||n,1);if(n===s.width&&a===s.height)return o;for(var r=s.colorAttachments,l=0;l<r.length;++l)p(r[l],n,a);return p(s.depthAttachment,n,a),p(s.stencilAttachment,n,a),p(s.depthStencilAttachment,n,a),s.width=o.width=n,s.height=o.height=a,_(s),o},_reglType:"framebuffer",_framebuffer:s,destroy:function(){g(s),m(s)},use:function(e){x.setFBO({framebuffer:o},e)}})}var x={cur:null,next:null,dirty:!1,setFBO:null},v=["rgba"],w=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&w.push("srgba"),t.ext_color_buffer_half_float&&w.push("rgba16f","rgb16f"),t.webgl_color_buffer_float&&w.push("rgba32f");var S=["uint8"];t.oes_texture_half_float&&S.push("half float","float16"),t.oes_texture_float&&S.push("float","float32");var k=0,T={};return De(x,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof h)return t}return null},create:y,createCube:function(e){function r(e){var n;Fe(0>o.indexOf(x.next),"can not update framebuffer which is currently in use");var s={color:null},l=0,d=null,f="rgba",u="uint8",c=1;if("number"==typeof e)l=0|e;else if(!e)l=1;else{Fe.type(e,"object","invalid arguments for framebuffer");var p=e;if("shape"in p){var h=p.shape;Fe(Array.isArray(h)&&2<=h.length,"invalid shape for framebuffer"),Fe(h[0]===h[1],"cube framebuffer must be square"),l=h[0]}else"radius"in p&&(l=0|p.radius),"width"in p?(l=0|p.width,"height"in p&&Fe(p.height===l,"must be square")):"height"in p&&(l=0|p.height);("color"in p||"colors"in p)&&(d=p.color||p.colors,Array.isArray(d)&&Fe(1===d.length||t.webgl_draw_buffers,"multiple render targets not supported")),d||("colorCount"in p&&(c=0|p.colorCount,Fe(0<c,"invalid color buffer count")),"colorType"in p&&(Fe.oneOf(p.colorType,S,"invalid color type"),u=p.colorType),"colorFormat"in p&&(f=p.colorFormat,Fe.oneOf(p.colorFormat,v,"invalid color format for texture"))),"depth"in p&&(s.depth=p.depth),"stencil"in p&&(s.stencil=p.stencil),"depthStencil"in p&&(s.depthStencil=p.depthStencil)}var m;if(!d){m=Array(c);var g={radius:l,format:f,type:u};for(n=0;n<c;++n)m[n]=a.createCube(g)}else if(Array.isArray(d))for(m=[],n=0;n<d.length;++n)m[n]=d[n];else m=[d];for(s.color=Array(m.length),n=0;n<m.length;++n){var b=m[n];Fe("function"==typeof b&&"textureCube"===b._reglType,"invalid cube map"),l=l||b.width,Fe(b.width===l&&b.height===l,"invalid cube map shape"),s.color[n]={target:34069,data:m[n]}}for(n=0;6>n;++n){for(var _=0;_<m.length;++_)s.color[_].target=34069+n;0<n&&(s.depth=o[0].depth,s.stencil=o[0].stencil,s.depthStencil=o[0].depthStencil),o[n]?o[n](s):o[n]=y(s)}return De(r,{width:l,height:l,color:m})}var o=[,,,,,,];return r(e),De(r,{faces:o,resize:function(e){var t=0|e,a;if(Fe(0<t&&t<=n.maxCubeMapSize,"invalid radius for cube fbo"),t===r.width)return r;var s=r.color;for(a=0;a<s.length;++a)s[a].resize(t);for(a=0;6>a;++a)o[a].resize(t);return r.width=r.height=t,r},_reglType:"framebufferCube",destroy:function(){o.forEach(function(e){e.destroy()})}})},clear:function(){Ye(T).forEach(g)},restore:function(){x.cur=null,x.next=null,x.dirty=!0,Ye(T).forEach(function(t){t.framebuffer=e.createFramebuffer(),_(t)})}})}function be(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function _e(e,t,n){for(var a=n.maxAttributes,r=Array(a),o=0;o<a;++o)r[o]=new be;return{Record:be,scope:{},state:r}}function ye(e,t,n,a){function r(e,t,n,a){this.name=e,this.id=t,this.location=n,this.info=a}function o(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function s(n,a,i){var r=35632===n?f:u,o=r[a];if(!o){var s=t.str(a);o=e.createShader(n),e.shaderSource(o,s),e.compileShader(o),Fe.shaderError(e,o,s,n,i),r[a]=o}return o}function l(e,t){this.id=h++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],a.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function d(n,l){var d=s(35632,n.fragId),f=s(35633,n.vertId),u=n.program=e.createProgram(),c,p;e.attachShader(u,d),e.attachShader(u,f),e.linkProgram(u),Fe.linkError(e,u,t.str(n.fragId),t.str(n.vertId),l);var h=e.getProgramParameter(u,35718);a.profile&&(n.stats.uniformsCount=h);var m=n.uniforms;for(c=0;c<h;++c)if(p=e.getActiveUniform(u,c),p)if(1<p.size)for(var g=0,b;g<p.size;++g)b=p.name.replace("[0]","["+g+"]"),o(m,new r(b,t.id(b),e.getUniformLocation(u,b),p));else o(m,new r(p.name,t.id(p.name),e.getUniformLocation(u,p.name),p));var _=e.getProgramParameter(u,35721);a.profile&&(n.stats.attributesCount=_);var y=n.attributes;for(c=0;c<_;++c)p=e.getActiveAttrib(u,c),p&&o(y,new r(p.name,t.id(p.name),e.getAttribLocation(u,p.name),p))}var f={},u={},c={},p=[],h=0;return a.profile&&(n.getMaxUniformsCount=function(){var e=0;return p.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},n.getMaxAttributesCount=function(){var e=0;return p.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var t=e.deleteShader.bind(e);Ye(f).forEach(t),f={},Ye(u).forEach(t),u={},p.forEach(function(t){e.deleteProgram(t.program)}),p.length=0,c={},n.shaderCount=0},program:function(e,t,a){Fe.command(0<=e,"missing vertex shader",a),Fe.command(0<=t,"missing fragment shader",a);var i=c[t];i||(i=c[t]={});var r=i[e];return r||(r=new l(t,e),n.shaderCount++,d(r,a),i[e]=r,p.push(r)),r},restore:function(){f={},u={};for(var e=0;e<p.length;++e)d(p[e])},shader:s,frag:-1,vert:-1}}function xe(e,t,n,a,i,r,o){function s(s){var l;null===t.next?(Fe(i.preserveDrawingBuffer,"you must create a webgl context with \"preserveDrawingBuffer\":true in order to read pixels from the drawing buffer"),l=5121):(Fe(null!==t.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),l=t.next.colorAttachments[0].texture._texture.type,r.oes_texture_float?(Fe(5121===l||5126===l,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===l&&Fe(o.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Fe(5121===l,"Reading from a framebuffer is only allowed for the type 'uint8'"));var d=0,f=0,u=a.framebufferWidth,c=a.framebufferHeight,p=null;je(s)?p=s:s&&(Fe.type(s,"object","invalid arguments to regl.read()"),d=0|s.x,f=0|s.y,Fe(0<=d&&d<a.framebufferWidth,"invalid x offset for regl.read"),Fe(0<=f&&f<a.framebufferHeight,"invalid y offset for regl.read"),u=0|(s.width||a.framebufferWidth-d),c=0|(s.height||a.framebufferHeight-f),p=s.data||null),p&&(5121===l?Fe(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===l&&Fe(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Fe(0<u&&u+d<=a.framebufferWidth,"invalid width for read pixels"),Fe(0<c&&c+f<=a.framebufferHeight,"invalid height for read pixels"),n();var h=4*(u*c);return p||(5121===l?p=new Uint8Array(h):5126===l&&(p=p||new Float32Array(h))),Fe.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),Fe(p.byteLength>=h,"data buffer for regl.read() too small"),e.pixelStorei(3333,4),e.readPixels(d,f,u,c,6408,l,p),p}function l(e){var n;return t.setFBO({framebuffer:e.framebuffer},function(){n=s(e)}),n}function d(e){return e&&"framebuffer"in e?l(e):s(e)}return d}function ve(e){return Array.prototype.slice.call(e)}function we(e){return ve(e).join("")}function Se(){function e(e){for(var t=0;t<o.length;++t)if(o[t]===e)return r[t];var n="g"+a++;return r.push(n),o.push(e),n}function t(){function e(){var e="v"+a++;return n.push(e),0<arguments.length&&(t.push(e,"="),t.push.apply(t,ve(arguments)),t.push(";")),e}var t=[],n=[];return De(function(){t.push.apply(t,ve(arguments))},{def:e,toString:function(){return we([0<n.length?"var "+n+";":"",we(t)])}})}function n(){function e(e,t){a(e,t,"=",n.def(e,t),";")}var n=t(),a=t(),i=n.toString,r=a.toString;return De(function(){n.apply(n,ve(arguments))},{def:n.def,entry:n,exit:a,save:e,set:function(t,a,i){e(t,a),n(t,a,"=",i,";")},toString:function(){return i()+r()}})}var a=0,r=[],o=[],s=t(),l={};return{global:s,link:e,block:t,proc:function(e,t){function a(){var e="a"+r.length;return r.push(e),e}var r=[];t=t||0;for(var o=0;o<t;++o)a();var s=n(),d=s.toString,f=l[e]=De(s,{arg:a,toString:function(){return we(["function(",r.join(),"){",d(),"}"])}});return f},scope:n,cond:function(){var e=we(arguments),t=n(),a=n(),i=t.toString,r=a.toString;return De(t,{then:function(){return t.apply(t,ve(arguments)),this},else:function(){return a.apply(a,ve(arguments)),this},toString:function(){var t=r();return t&&(t="else{"+t+"}"),we(["if(",e,"){",i(),"}",t])}})},compile:function(){var e=["\"use strict\";",s,"return {"];Object.keys(l).forEach(function(t){e.push("\"",t,"\":",l[t].toString(),",")}),e.push("}");var t=we(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),n=Function.apply(null,r.concat(t));return n.apply(null,o)}}}function ke(e){return Array.isArray(e)||je(e)||M(e)}function Te(e){return e.sort(function(e,t){if(e==="viewport")return-1;return"viewport"===t?1:e<t?-1:1})}function Ee(e,t,n,a){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=a}function Ae(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function Be(e){return new Ee(!1,!1,!1,e)}function Ce(e,t){var n=e.type;if(n===0){var a=e.data.length;return new Ee(!0,1<=a,2<=a,t)}if(4===n){var i=e.data;return new Ee(i.thisDep,i.contextDep,i.propDep,t)}return new Ee(3===n,2===n,1===n,t)}function Ie(e,t,n,a,i,r,o,s,l,d,f,u,c,p,h){function m(e){return e.replace(".","_")}function g(e,t,n){var a=m(e);ne.push(e),te[a]=ee[a]=!!n,ae[a]=t}function b(e,t,n){var a=m(e);ne.push(e),Array.isArray(n)?(ee[a]=n.slice(),te[a]=n.slice()):ee[a]=te[a]=n,ie[a]=t}function _(){var e=Se(),n=e.link,a=e.global;e.id=se++,e.batchId="0";var i=n(re),r=e.shared={props:"a0"};Object.keys(re).forEach(function(e){r[e]=a.def(i,".",e)}),Fe.optional(function(){e.CHECK=n(Fe),e.commandStr=Fe.guessCommand(),e.command=n(e.commandStr),e.assert=function(e,t,a){e("if(!(",t,"))",this.CHECK,".commandRaise(",n(a),",",this.command,");")},oe.invalidBlendCombinations=Qt});var o=e.next={},s=e.current={};Object.keys(ie).forEach(function(e){Array.isArray(ee[e])&&(o[e]=a.def(r.next,".",e),s[e]=a.def(r.current,".",e))});var l=e.constants={};Object.keys(oe).forEach(function(e){l[e]=a.def(JSON.stringify(oe[e]))}),e.invoke=function(t,a){switch(a.type){case 0:var i=["this",r.context,r.props,e.batchId];return t.def(n(a.data),".call(",i.slice(0,fo(a.data.length+1,4)),")");case 1:return t.def(r.props,a.data);case 2:return t.def(r.context,a.data);case 3:return t.def("this",a.data);case 4:return a.data.append(e,t),a.data.ref;}},e.attribCache={};var f={};return e.scopeAttrib=function(e){var a=t.id(e);if(a in f)return f[a];var i=d.scope[a];i||(i=d.scope[a]=new K);var r=f[a]=n(i);return r},e}function y(e){var t=e.static,n=e.dynamic,a;if("profile"in t){var i=!!t.profile;a=Be(function(){return i}),a.enable=i}else if("profile"in n){var r=n.profile;a=Ce(r,function(e,t){return e.invoke(t,r)})}return a}function x(e){var t=e.static,n=e.dynamic;if("framebuffer"in t){var a=t.framebuffer;return a?(a=s.getFramebuffer(a),Fe.command(a,"invalid framebuffer object"),Be(function(e,t){var n=e.link(a),i=e.shared;t.set(i.framebuffer,".next",n);var r=i.context;return t.set(r,".framebufferWidth",n+".width"),t.set(r,".framebufferHeight",n+".height"),n})):Be(function(e,t){var n=e.shared;t.set(n.framebuffer,".next","null");var a=n.context;return t.set(a,".framebufferWidth",a+".drawingBufferWidth"),t.set(a,".framebufferHeight",a+".drawingBufferHeight"),"null"})}if("framebuffer"in n){var i=n.framebuffer;return Ce(i,function(e,t){var n=e.invoke(t,i),a=e.shared,r=a.framebuffer,o=t.def(r,".getFramebuffer(",n,")");Fe.optional(function(){e.assert(t,"!"+n+"||"+o,"invalid framebuffer object")}),t.set(r,".next",o);var s=a.context;return t.set(s,".framebufferWidth",o+"?"+o+".width:"+s+".drawingBufferWidth"),t.set(s,".framebufferHeight",o+"?"+o+".height:"+s+".drawingBufferHeight"),o})}return null}function v(e,t,n){function a(e){if(e in i){var a=i[e];Fe.commandType(a,"object","invalid "+e,n.commandStr);var o=!0,s=0|a.x,l=0|a.y,d,f;return"width"in a?(d=0|a.width,Fe.command(0<=d,"invalid "+e,n.commandStr)):o=!1,"height"in a?(f=0|a.height,Fe.command(0<=f,"invalid "+e,n.commandStr)):o=!1,new Ee(!o&&t&&t.thisDep,!o&&t&&t.contextDep,!o&&t&&t.propDep,function(e,t){var n=e.shared.context,i=d;"width"in a||(i=t.def(n,".","framebufferWidth","-",s));var r=f;return"height"in a||(r=t.def(n,".","framebufferHeight","-",l)),[s,l,i,r]})}if(e in r){var u=r[e],c=Ce(u,function(t,n){var a=t.invoke(n,u);Fe.optional(function(){t.assert(n,a+"&&typeof "+a+"===\"object\"","invalid "+e)});var i=t.shared.context,r=n.def(a,".x|0"),o=n.def(a,".y|0"),s=n.def("\"width\" in ",a,"?",a,".width|0:","(",i,".","framebufferWidth","-",r,")"),l=n.def("\"height\" in ",a,"?",a,".height|0:","(",i,".","framebufferHeight","-",o,")");return Fe.optional(function(){t.assert(n,s+">=0&&"+l+">=0","invalid "+e)}),[r,o,s,l]});return t&&(c.thisDep=c.thisDep||t.thisDep,c.contextDep=c.contextDep||t.contextDep,c.propDep=c.propDep||t.propDep),c}return t?new Ee(t.thisDep,t.contextDep,t.propDep,function(e,t){var n=e.shared.context;return[0,0,t.def(n,".","framebufferWidth"),t.def(n,".","framebufferHeight")]}):null}var i=e.static,r=e.dynamic,o=a("viewport");if(o){var s=o;o=new Ee(o.thisDep,o.contextDep,o.propDep,function(e,t){var n=s.append(e,t),a=e.shared.context;return t.set(a,".viewportWidth",n[2]),t.set(a,".viewportHeight",n[3]),n})}return{viewport:o,scissor_box:a("scissor.box")}}function w(e){function n(e){if(e in a){var n=t.id(a[e]);Fe.optional(function(){f.shader(en[e],n,Fe.guessCommand())});var r=Be(function(){return n});return r.id=n,r}if(e in i){var o=i[e];return Ce(o,function(t,n){var a=t.invoke(n,o),i=n.def(t.shared.strings,".id(",a,")");return Fe.optional(function(){n(t.shared.shader,".shader(",en[e],",",i,",",t.command,");")}),i})}return null}var a=e.static,i=e.dynamic,r=n("frag"),o=n("vert"),s=null,l;return Ae(r)&&Ae(o)?(s=f.program(o.id,r.id),l=Be(function(e){return e.link(s)})):l=new Ee(r&&r.thisDep||o&&o.thisDep,r&&r.contextDep||o&&o.contextDep,r&&r.propDep||o&&o.propDep,function(e,t){var n=e.shared.shader,a;a=r?r.append(e,t):t.def(n,".","frag");var i=o?o.append(e,t):t.def(n,".","vert");var s=n+".program("+i+","+a;return Fe.optional(function(){s+=","+e.command}),t.def(s+")")}),{frag:r,vert:o,progVar:l,program:s}}function S(e,t){function n(){if("elements"in s){var e=s.elements;ke(e)?e=r.getElements(r.create(e,!0)):e&&(e=r.getElements(e),Fe.command(e,"invalid elements",t.commandStr));var n=Be(function(t){if(e){var n=t.link(e);return t.ELEMENTS=n,n}return t.ELEMENTS=null,null});return n.value=e,n}if("elements"in l){var a=l.elements;return Ce(a,function(e,t){var n=e.shared,i=n.isBufferArgs,r=n.elements,o=e.invoke(t,a),s=t.def("null"),l=t.def(i,"(",o,")"),d=e.cond(l).then(s,"=",r,".createStream(",o,");").else(s,"=",r,".getElements(",o,");");return Fe.optional(function(){e.assert(d.else,"!"+o+"||"+s,"invalid elements")}),t.entry(d),t.exit(e.cond(l).then(r,".destroyStream(",s,");")),e.ELEMENTS=s,s})}return null}function a(){if("primitive"in s){var e=s.primitive;return Fe.commandParameter(e,it,"invalid primitve",t.commandStr),Be(function(){return it[e]})}if("primitive"in l){var n=l.primitive;return Ce(n,function(e,t){var a=e.constants.primTypes,i=e.invoke(t,n);return Fe.optional(function(){e.assert(t,i+" in "+a,"invalid primitive, must be one of "+Object.keys(it))}),t.def(a,"[",i,"]")})}return d?Ae(d)?d.value?Be(function(e,t){return t.def(e.ELEMENTS,".primType")}):Be(function(){return 4}):new Ee(d.thisDep,d.contextDep,d.propDep,function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",4)}):null}function i(e,n){if(e in s){var a=0|s[e];return Fe.command(!n||0<=a,"invalid "+e,t.commandStr),Be(function(e){return n&&(e.OFFSET=a),a})}if(e in l){var i=l[e];return Ce(i,function(t,a){var r=t.invoke(a,i);return n&&(t.OFFSET=r,Fe.optional(function(){t.assert(a,r+">=0","invalid "+e)})),r})}return n&&d?Be(function(e){return e.OFFSET="0",0}):null}function o(){if("count"in s){var e=0|s.count;return Fe.command("number"==typeof e&&0<=e,"invalid vertex count",t.commandStr),Be(function(){return e})}if("count"in l){var n=l.count;return Ce(n,function(e,t){var a=e.invoke(t,n);return Fe.optional(function(){e.assert(t,"typeof "+a+"===\"number\"&&"+a+">=0&&"+a+"===("+a+"|0)","invalid vertex count")}),a})}if(d){if(Ae(d)){if(d)return f?new Ee(f.thisDep,f.contextDep,f.propDep,function(e,t){var n=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return Fe.optional(function(){e.assert(t,n+">=0","invalid vertex offset/element buffer too small")}),n}):Be(function(e,t){return t.def(e.ELEMENTS,".vertCount")});var a=Be(function(){return-1});return Fe.optional(function(){a.MISSING=!0}),a}var i=new Ee(d.thisDep||f.thisDep,d.contextDep||f.contextDep,d.propDep||f.propDep,function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")});return Fe.optional(function(){i.DYNAMIC=!0}),i}return null}var s=e.static,l=e.dynamic,d=n(),f=i("offset",!0);return{elements:d,primitive:a(),count:o(),instances:i("instances",!1),offset:f}}function k(e,t){var n=e.static,i=e.dynamic,r={};return ne.forEach(function(e){function o(t,a){if(e in n){var o=t(n[e]);r[s]=Be(function(){return o})}else if(e in i){var l=i[e];r[s]=Ce(l,function(e,t){return a(e,t,e.invoke(t,l))})}}var s=m(e);return"cull.enable"===e||"blend.enable"===e||"dither"===e||"stencil.enable"===e||"depth.enable"===e||"scissor.enable"===e||"polygonOffset.enable"===e||"sample.alpha"===e||"sample.enable"===e||"depth.mask"===e?o(function(n){return Fe.commandType(n,"boolean",e,t.commandStr),n},function(t,n,a){return Fe.optional(function(){t.assert(n,"typeof "+a+"===\"boolean\"","invalid flag "+e,t.commandStr)}),a}):"depth.func"===e?o(function(n){return Fe.commandParameter(n,$t,"invalid "+e,t.commandStr),$t[n]},function(t,n,a){var i=t.constants.compareFuncs;return Fe.optional(function(){t.assert(n,a+" in "+i,"invalid "+e+", must be one of "+Object.keys($t))}),n.def(i,"[",a,"]")}):"depth.range"===e?o(function(e){return Fe.command(Q(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]<=e[1],"depth range is 2d array",t.commandStr),e},function(e,t,n){Fe.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+"[0]===\"number\"&&typeof "+n+"[1]===\"number\"&&"+n+"[0]<="+n+"[1]","depth range must be a 2d array")});var a=t.def("+",n,"[0]"),i=t.def("+",n,"[1]");return[a,i]}):"blend.func"===e?o(function(e){Fe.commandType(e,"object","blend.func",t.commandStr);var n="srcRGB"in e?e.srcRGB:e.src,a="srcAlpha"in e?e.srcAlpha:e.src,i="dstRGB"in e?e.dstRGB:e.dst,r="dstAlpha"in e?e.dstAlpha:e.dst;return Fe.commandParameter(n,Yt,s+".srcRGB",t.commandStr),Fe.commandParameter(a,Yt,s+".srcAlpha",t.commandStr),Fe.commandParameter(i,Yt,s+".dstRGB",t.commandStr),Fe.commandParameter(r,Yt,s+".dstAlpha",t.commandStr),Fe.command(-1===Qt.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",t.commandStr),[Yt[n],Yt[i],Yt[a],Yt[r]]},function(t,n,a){function i(i,o){var s=n.def("\"",i,o,"\" in ",a,"?",a,".",i,o,":",a,".",i);return Fe.optional(function(){t.assert(n,s+" in "+r,"invalid "+e+"."+i+o+", must be one of "+Object.keys(Yt))}),s}var r=t.constants.blendFuncs;Fe.optional(function(){t.assert(n,a+"&&typeof "+a+"===\"object\"","invalid blend func, must be an object")});var o=i("src","RGB"),s=i("dst","RGB");Fe.optional(function(){var e=t.constants.invalidBlendCombinations;t.assert(n,e+".indexOf("+o+"+\", \"+"+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var l=n.def(r,"[",o,"]"),d=n.def(r,"[",i("src","Alpha"),"]"),f=n.def(r,"[",s,"]"),u=n.def(r,"[",i("dst","Alpha"),"]");return[l,f,d,u]}):"blend.equation"===e?o(function(n){return"string"==typeof n?(Fe.commandParameter(n,Y,"invalid "+e,t.commandStr),[Y[n],Y[n]]):"object"==typeof n?(Fe.commandParameter(n.rgb,Y,e+".rgb",t.commandStr),Fe.commandParameter(n.alpha,Y,e+".alpha",t.commandStr),[Y[n.rgb],Y[n.alpha]]):void Fe.commandRaise("invalid blend.equation",t.commandStr)},function(t,n,a){var i=t.constants.blendEquations,r=n.def(),o=n.def(),s=t.cond("typeof ",a,"===\"string\"");return Fe.optional(function(){function n(e,n,a){t.assert(e,a+" in "+i,"invalid "+n+", must be one of "+Object.keys(Y))}n(s.then,e,a),t.assert(s.else,a+"&&typeof "+a+"===\"object\"","invalid "+e),n(s.else,e+".rgb",a+".rgb"),n(s.else,e+".alpha",a+".alpha")}),s.then(r,"=",o,"=",i,"[",a,"];"),s.else(r,"=",i,"[",a,".rgb];",o,"=",i,"[",a,".alpha];"),n(s),[r,o]}):"blend.color"===e?o(function(e){return Fe.command(Q(e)&&4===e.length,"blend.color must be a 4d array",t.commandStr),N(4,function(t){return+e[t]})},function(e,t,n){return Fe.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")}),N(4,function(e){return t.def("+",n,"[",e,"]")})}):"stencil.mask"===e?o(function(e){return Fe.commandType(e,"number",s,t.commandStr),0|e},function(e,t,n){return Fe.optional(function(){e.assert(t,"typeof "+n+"===\"number\"","invalid stencil.mask")}),t.def(n,"|0")}):"stencil.func"===e?o(function(n){Fe.commandType(n,"object",s,t.commandStr);var a=n.cmp||"keep",i=n.ref||0,r="mask"in n?n.mask:-1;return Fe.commandParameter(a,$t,e+".cmp",t.commandStr),Fe.commandType(i,"number",e+".ref",t.commandStr),Fe.commandType(r,"number",e+".mask",t.commandStr),[$t[a],i,r]},function(e,t,n){var a=e.constants.compareFuncs;Fe.optional(function(){function i(){e.assert(t,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,"===\"object\""),i("!(\"cmp\" in ",n,")||(",n,".cmp in ",a,")")});var i=t.def("\"cmp\" in ",n,"?",a,"[",n,".cmp]",":",7680),r=t.def(n,".ref|0"),o=t.def("\"mask\" in ",n,"?",n,".mask|0:-1");return[i,r,o]}):"stencil.opFront"===e||"stencil.opBack"===e?o(function(n){Fe.commandType(n,"object",s,t.commandStr);var a=n.fail||"keep",i=n.zfail||"keep",r=n.zpass||"keep";return Fe.commandParameter(a,Jt,e+".fail",t.commandStr),Fe.commandParameter(i,Jt,e+".zfail",t.commandStr),Fe.commandParameter(r,Jt,e+".zpass",t.commandStr),["stencil.opBack"===e?1029:1028,Jt[a],Jt[i],Jt[r]]},function(t,n,a){function i(i){return Fe.optional(function(){t.assert(n,"!(\""+i+"\" in "+a+")||("+a+"."+i+" in "+r+")","invalid "+e+"."+i+", must be one of "+Object.keys(Jt))}),n.def("\"",i,"\" in ",a,"?",r,"[",a,".",i,"]:",7680)}var r=t.constants.stencilOps;return Fe.optional(function(){t.assert(n,a+"&&typeof "+a+"===\"object\"","invalid "+e)}),["stencil.opBack"===e?1029:1028,i("fail"),i("zfail"),i("zpass")]}):"polygonOffset.offset"===e?o(function(e){Fe.commandType(e,"object",s,t.commandStr);var n=0|e.factor,a=0|e.units;return Fe.commandType(n,"number",s+".factor",t.commandStr),Fe.commandType(a,"number",s+".units",t.commandStr),[n,a]},function(t,n,a){Fe.optional(function(){t.assert(n,a+"&&typeof "+a+"===\"object\"","invalid "+e)});var i=n.def(a,".factor|0"),r=n.def(a,".units|0");return[i,r]}):"cull.face"===e?o(function(e){var n=0;return"front"===e?n=1028:"back"==e&&(n=1029),Fe.command(!!n,s,t.commandStr),n},function(e,t,n){return Fe.optional(function(){e.assert(t,n+"===\"front\"||"+n+"===\"back\"","invalid cull.face")}),t.def(n,"===\"front\"?",1028,":",1029)}):"lineWidth"===e?o(function(e){return Fe.command("number"==typeof e&&e>=a.lineWidthDims[0]&&e<=a.lineWidthDims[1],"invalid line width, must be a positive number between "+a.lineWidthDims[0]+" and "+a.lineWidthDims[1],t.commandStr),e},function(e,t,n){return Fe.optional(function(){e.assert(t,"typeof "+n+"===\"number\"&&"+n+">="+a.lineWidthDims[0]+"&&"+n+"<="+a.lineWidthDims[1],"invalid line width")}),n}):"frontFace"===e?o(function(e){return Fe.commandParameter(e,tn,s,t.commandStr),tn[e]},function(e,t,n){return Fe.optional(function(){e.assert(t,n+"===\"cw\"||"+n+"===\"ccw\"","invalid frontFace, must be one of cw,ccw")}),t.def(n+"===\"cw\"?"+2304+":"+2305)}):"colorMask"===e?o(function(e){return Fe.command(Q(e)&&4===e.length,"color.mask must be length 4 array",t.commandStr),e.map(function(e){return!!e})},function(e,t,n){return Fe.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")}),N(4,function(e){return"!!"+n+"["+e+"]"})}):"sample.coverage"===e?o(function(e){Fe.command("object"==typeof e&&e,s,t.commandStr);var n="value"in e?e.value:1,a=!!e.invert;return Fe.command("number"==typeof n&&0<=n&&1>=n,"sample.coverage.value must be a number between 0 and 1",t.commandStr),[n,a]},function(e,t,n){Fe.optional(function(){e.assert(t,n+"&&typeof "+n+"===\"object\"","invalid sample.coverage")});var a=t.def("\"value\" in ",n,"?+",n,".value:1"),i=t.def("!!",n,".invert");return[a,i]}):void 0}),r}function T(e,t){var n=e.static,a=e.dynamic,i={};return Object.keys(n).forEach(function(e){var a=n[e],r;if("number"==typeof a||"boolean"==typeof a)r=Be(function(){return a});else if("function"==typeof a){var o=a._reglType;"texture2d"===o||"textureCube"===o?r=Be(function(e){return e.link(a)}):"framebuffer"===o||"framebufferCube"===o?(Fe.command(0<a.color.length,"missing color attachment for framebuffer sent to uniform \""+e+"\"",t.commandStr),r=Be(function(e){return e.link(a.color[0])})):Fe.commandRaise("invalid data for uniform \""+e+"\"",t.commandStr)}else Q(a)?r=Be(function(t){var n=t.global.def("[",N(a.length,function(n){return Fe.command("number"==typeof a[n]||"boolean"==typeof a[n],"invalid uniform "+e,t.commandStr),a[n]}),"]");return n}):Fe.commandRaise("invalid or missing data for uniform \""+e+"\"",t.commandStr);r.value=a,i[e]=r}),Object.keys(a).forEach(function(e){var t=a[e];i[e]=Ce(t,function(e,n){return e.invoke(n,t)})}),i}function E(e,n){var a=e.static,r=e.dynamic,o={};return Object.keys(a).forEach(function(e){var r=a[e],s=t.id(e),l=new K;if(ke(r))l.state=1,l.buffer=i.getBuffer(i.create(r,34962,!1,!0)),l.type=0;else{var d=i.getBuffer(r);if(d)l.state=1,l.buffer=d,l.type=0;else if(Fe.command("object"==typeof r&&r,"invalid data for attribute "+e,n.commandStr),"constant"in r){var f=r.constant;l.buffer="null",l.state=2,"number"==typeof f?l.x=f:(Fe.command(Q(f)&&0<f.length&&4>=f.length,"invalid constant for attribute "+e,n.commandStr),Gt.forEach(function(e,t){t<f.length&&(l[e]=f[t])}))}else{d=ke(r.buffer)?i.getBuffer(i.create(r.buffer,34962,!1,!0)):i.getBuffer(r.buffer),Fe.command(!!d,"missing buffer for attribute \""+e+"\"",n.commandStr);var u=0|r.offset;Fe.command(0<=u,"invalid offset for attribute \""+e+"\"",n.commandStr);var c=0|r.stride;Fe.command(0<=c&&256>c,"invalid stride for attribute \""+e+"\", must be integer betweeen [0, 255]",n.commandStr);var p=0|r.size;Fe.command(!("size"in r)||0<p&&4>=p,"invalid size for attribute \""+e+"\", must be 1,2,3,4",n.commandStr);var h=!!r.normalized,m=0;"type"in r&&(Fe.commandParameter(r.type,Je,"invalid type for attribute "+e,n.commandStr),m=Je[r.type]);var g=0|r.divisor;"divisor"in r&&(Fe.command(0==g||$,"cannot specify divisor for attribute \""+e+"\", instancing not supported",n.commandStr),Fe.command(0<=g,"invalid divisor for attribute \""+e+"\"",n.commandStr)),Fe.optional(function(){var t=n.commandStr,a=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(r).forEach(function(n){Fe.command(0<=a.indexOf(n),"unknown parameter \""+n+"\" for attribute pointer \""+e+"\" (valid parameters are "+a+")",t)})}),l.buffer=d,l.state=1,l.size=p,l.normalized=h,l.type=m||d.dtype,l.offset=u,l.stride=c,l.divisor=g}}o[e]=Be(function(e){var t=e.attribCache;if(s in t)return t[s];var n={isStream:!1};return Object.keys(l).forEach(function(e){n[e]=l[e]}),l.buffer&&(n.buffer=e.link(l.buffer),n.type=n.type||n.buffer+".dtype"),t[s]=n,n})}),Object.keys(r).forEach(function(e){var t=r[e];o[e]=Ce(t,function(n,a){function i(e){a(d[e],"=",r,".",e,"|0;")}var r=n.invoke(a,t),o=n.shared,s=o.isBufferArgs,l=o.buffer;Fe.optional(function(){n.assert(a,r+"&&(typeof "+r+"===\"object\"||typeof "+r+"===\"function\")&&("+s+"("+r+")||"+l+".getBuffer("+r+")||"+l+".getBuffer("+r+".buffer)||"+s+"("+r+".buffer)||(\"constant\" in "+r+"&&(typeof "+r+".constant===\"number\"||"+o.isArrayLike+"("+r+".constant))))","invalid dynamic attribute \""+e+"\"")});var d={isStream:a.def(!1)},f=new K;f.state=1,Object.keys(f).forEach(function(e){d[e]=a.def(""+f[e])});var u=d.buffer,c=d.type;return a("if(",s,"(",r,")){",d.isStream,"=true;",u,"=",l,".createStream(",34962,",",r,");",c,"=",u,".dtype;","}else{",u,"=",l,".getBuffer(",r,");","if(",u,"){",c,"=",u,".dtype;","}else if(\"constant\" in ",r,"){",d.state,"=",2,";","if(typeof "+r+".constant === \"number\"){",d[Gt[0]],"=",r,".constant;",Gt.slice(1).map(function(e){return d[e]}).join("="),"=0;","}else{",Gt.map(function(e,t){return d[e]+"="+r+".constant.length>"+t+"?"+r+".constant["+t+"]:0;"}).join(""),"}}else{","if(",s,"(",r,".buffer)){",u,"=",l,".createStream(",34962,",",r,".buffer);","}else{",u,"=",l,".getBuffer(",r,".buffer);","}",c,"=\"type\" in ",r,"?",o.glTypes,"[",r,".type]:",u,".dtype;",d.normalized,"=!!",r,".normalized;"),i("size"),i("offset"),i("stride"),i("divisor"),a("}}"),a.exit("if(",d.isStream,"){",l,".destroyStream(",u,");","}"),d})}),o}function A(e){var t=e.static,n=e.dynamic,a={};return Object.keys(t).forEach(function(e){var n=t[e];a[e]=Be(function(e){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)})}),Object.keys(n).forEach(function(e){var t=n[e];a[e]=Ce(t,function(e,n){return e.invoke(n,t)})}),a}function B(e,t,n,a,i){function r(e){var t=d[e];t&&(u[e]=t)}var o=e.static,s=e.dynamic;Fe.optional(function(){function e(e){Object.keys(e).forEach(function(e){Fe.command(0<=t.indexOf(e),"unknown parameter \""+e+"\"",i.commandStr)})}var t=["framebuffer","vert","frag","elements","primitive","offset","count","instances","profile"].concat(ne);e(o),e(s)});var l=x(e,i),d=v(e,l,i),f=S(e,i),u=k(e,i),c=w(e,i);r("viewport"),r(m("scissor.box"));var p=0<Object.keys(u).length,h={framebuffer:l,draw:f,shader:c,state:u,dirty:p};return h.profile=y(e,i),h.uniforms=T(n,i),h.attributes=E(t,i),h.context=A(a,i),h}function C(e,t,n){var a=e.shared,i=a.context,r=e.scope();Object.keys(n).forEach(function(a){t.save(i,"."+a);var o=n[a];r(i,".",a,"=",o.append(e,t),";")}),t(r)}function I(e,t,n,a){var i=e.shared,r=i.gl,o=i.framebuffer,s;J&&(s=t.def(i.extensions,".webgl_draw_buffers"));var l=e.constants,d=l.drawBuffer,f=l.backBuffer,u;u=n?n.append(e,t):t.def(o,".next"),a||t("if(",u,"!==",o,".cur){"),t("if(",u,"){",r,".bindFramebuffer(",36160,",",u,".framebuffer);"),J&&t(s,".drawBuffersWEBGL(",d,"[",u,".colorAttachments.length]);"),t("}else{",r,".bindFramebuffer(",36160,",null);"),J&&t(s,".drawBuffersWEBGL(",f,");"),t("}",o,".cur=",u,";"),a||t("}")}function z(e,t,n){var a=e.shared,i=a.gl,r=e.current,o=e.next,s=a.current,l=a.next,d=e.cond(s,".dirty");ne.forEach(function(t){var a=m(t);if(!(a in n.state)){var f,u;if(a in o){f=o[a],u=r[a];var c=N(ee[a].length,function(e){return d.def(f,"[",e,"]")});d(e.cond(c.map(function(e,t){return e+"!=="+u+"["+t+"]"}).join("||")).then(i,".",ie[a],"(",c,");",c.map(function(e,t){return u+"["+t+"]="+e}).join(";"),";"))}else{f=d.def(l,".",a);var p=e.cond(f,"!==",s,".",a);d(p),a in ae?p(e.cond(f).then(i,".enable(",ae[a],");").else(i,".disable(",ae[a],");"),s,".",a,"=",f,";"):p(i,".",ie[a],"(",f,");",s,".",a,"=",f,";")}}}),0===Object.keys(n.state).length&&d(s,".dirty=false;"),t(d)}function j(e,t,n,a){var i=e.shared,r=e.current,o=i.current,s=i.gl;Te(Object.keys(n)).forEach(function(i){var l=n[i];if(!a||a(l)){var d=l.append(e,t);if(ae[i]){var f=ae[i];Ae(l)?d?t(s,".enable(",f,");"):t(s,".disable(",f,");"):t(e.cond(d).then(s,".enable(",f,");").else(s,".disable(",f,");")),t(o,".",i,"=",d,";")}else if(Q(d)){var u=r[i];t(s,".",ie[i],"(",d,");",d.map(function(e,t){return u+"["+t+"]="+e}).join(";"),";")}else t(s,".",ie[i],"(",d,");",o,".",i,"=",d,";")}})}function D(e,t){$&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function R(e,t,n,a,i){function r(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function o(e){m=t.def(),e(m,"=",r(),";"),"string"==typeof i?e(f,".count+=",i,";"):e(f,".count++;"),p&&(a?(g=t.def(),e(g,"=",c,".getNumPendingQueries();")):e(c,".beginQuery(",f,");"))}function s(e){e(f,".cpuTime+=",r(),"-",m,";"),p&&(a?e(c,".pushScopeStats(",g,",",c,".getNumPendingQueries(),",f,");"):e(c,".endQuery();"))}function l(e){var n=t.def(u,".profile");t(u,".profile=",e,";"),t.exit(u,".profile=",n,";")}var d=e.shared,f=e.stats,u=d.current,c=d.timer,h=n.profile,m,g,b;if(h){if(Ae(h))return void(h.enable?(o(t),s(t.exit),l("true")):l("false"));b=h.append(e,t),l(b)}else b=t.def(u,".profile");var _=e.block();o(_),t("if(",b,"){",_,"}");var y=e.block();s(y),t.exit("if(",b,"){",y,"}")}function F(e,t,n,a,i){function r(e){return 35664===e||35667===e||35671===e?2:35665===e||35668===e||35672===e?3:35666===e||35669===e||35673===e?4:1}function o(n,a,i){function r(){t("if(!",f,".buffer){",l,".enableVertexAttribArray(",d,");}");var n=i.type,r;if(r=i.size?t.def(i.size,"||",a):a,t("if(",f,".type!==",n,"||",f,".size!==",r,"||",h.map(function(e){return f+"."+e+"!=="+i[e]}).join("||"),"){",l,".bindBuffer(",34962,",",c,".buffer);",l,".vertexAttribPointer(",[d,r,n,i.normalized,i.stride,i.offset],");",f,".type=",n,";",f,".size=",r,";",h.map(function(e){return f+"."+e+"="+i[e]+";"}).join(""),"}"),$){var o=i.divisor;t("if(",f,".divisor!==",o,"){",e.instancing,".vertexAttribDivisorANGLE(",[d,o],");",f,".divisor=",o,";}")}}function o(){t("if(",f,".buffer){",l,".disableVertexAttribArray(",d,");","}if(",Gt.map(function(e,t){return f+"."+e+"!=="+p[t]}).join("||"),"){",l,".vertexAttrib4f(",d,",",p,");",Gt.map(function(e,t){return f+"."+e+"="+p[t]+";"}).join(""),"}")}var l=s.gl,d=t.def(n,".location"),f=t.def(s.attributes,"[",d,"]"),u=i.state,c=i.buffer,p=[i.x,i.y,i.z,i.w],h=["buffer","normalized","offset","stride"];u===1?r():u===2?o():(t("if(",u,"===",1,"){"),r(),t("}else{"),o(),t("}"))}var s=e.shared;a.forEach(function(a){var s=a.name,l=n.attributes[s],d;if(l){if(!i(l))return;d=l.append(e,t)}else{if(!i(nn))return;var f=e.scopeAttrib(s);Fe.optional(function(){e.assert(t,f+".state","missing attribute "+s)}),d={},Object.keys(new K).forEach(function(e){d[e]=t.def(f,".",e)})}o(e.link(a),r(a.info.type),d)})}function O(e,n,a,r,o){for(var s=Math.pow,l=e.shared,d=l.gl,f=0,u;f<r.length;++f){var c=r[f],p=c.name,h=c.info.type,m=a.uniforms[p],g=e.link(c),b=g+".location",_;if(m){if(!o(m))continue;if(Ae(m)){var y=m.value;if(Fe.command(null!==y&&"undefined"!=typeof y,"missing uniform \""+p+"\"",e.commandStr),35678===h||35680===h){Fe.command("function"==typeof y&&(35678===h&&("texture2d"===y._reglType||"framebuffer"===y._reglType)||35680===h&&("textureCube"===y._reglType||"framebufferCube"===y._reglType)),"invalid texture for uniform "+p,e.commandStr);var x=e.link(y._texture||y.color[0]._texture);n(d,".uniform1i(",b,",",x+".bind());"),n.exit(x,".unbind();")}else if(35674===h||35675===h||35676===h){Fe.optional(function(){Fe.command(Q(y),"invalid matrix for uniform "+p,e.commandStr),Fe.command(35674===h&&4===y.length||35675===h&&9===y.length||35676===h&&16===y.length,"invalid length for matrix uniform "+p,e.commandStr)});var v=e.global.def("new Float32Array(["+Array.prototype.slice.call(y)+"])"),w=2;35675===h?w=3:35676===h&&(w=4),n(d,".uniformMatrix",w,"fv(",b,",false,",v,");")}else 5126===h?(Fe.commandType(y,"number","uniform "+p,e.commandStr),u="1f"):35664===h?(Fe.command(Q(y)&&2===y.length,"uniform "+p,e.commandStr),u="2f"):35665===h?(Fe.command(Q(y)&&3===y.length,"uniform "+p,e.commandStr),u="3f"):35666===h?(Fe.command(Q(y)&&4===y.length,"uniform "+p,e.commandStr),u="4f"):35670===h?(Fe.commandType(y,"boolean","uniform "+p,e.commandStr),u="1i"):5124===h?(Fe.commandType(y,"number","uniform "+p,e.commandStr),u="1i"):35671===h?(Fe.command(Q(y)&&2===y.length,"uniform "+p,e.commandStr),u="2i"):35667===h?(Fe.command(Q(y)&&2===y.length,"uniform "+p,e.commandStr),u="2i"):35672===h?(Fe.command(Q(y)&&3===y.length,"uniform "+p,e.commandStr),u="3i"):35668===h?(Fe.command(Q(y)&&3===y.length,"uniform "+p,e.commandStr),u="3i"):35673===h?(Fe.command(Q(y)&&4===y.length,"uniform "+p,e.commandStr),u="4i"):35669===h?(Fe.command(Q(y)&&4===y.length,"uniform "+p,e.commandStr),u="4i"):void 0,n(d,".uniform",u,"(",b,",",Q(y)?Array.prototype.slice.call(y):y,");");continue}else _=m.append(e,n)}else{if(!o(nn))continue;_=n.def(l.uniforms,"[",t.id(p),"]")}35678===h?n("if(",_,"&&",_,"._reglType===\"framebuffer\"){",_,"=",_,".color[0];","}"):35680===h&&n("if(",_,"&&",_,"._reglType===\"framebufferCube\"){",_,"=",_,".color[0];","}"),Fe.optional(function(){function t(t,a){e.assert(n,t,"bad data or missing for uniform \""+p+"\".  "+a)}function a(e){t("typeof "+_+"===\""+e+"\"","invalid type, expected "+e)}function i(a){t(l.isArrayLike+"("+_+")&&"+_+".length==="+a,"invalid vector, should have length "+a,e.commandStr)}function r(n){t("typeof "+_+"===\"function\"&&"+_+"._reglType===\"texture"+(3553===n?"2d":"Cube")+"\"","invalid texture type",e.commandStr)}5124===h?a("number"):35667===h?i(2,"number"):35668===h?i(3,"number"):35669===h?i(4,"number"):5126===h?a("number"):35664===h?i(2,"number"):35665===h?i(3,"number"):35666===h?i(4,"number"):35670===h?a("boolean"):35671===h?i(2,"boolean"):35672===h?i(3,"boolean"):35673===h?i(4,"boolean"):35674===h?i(4,"number"):35675===h?i(9,"number"):35676===h?i(16,"number"):35678===h?r(3553):35680===h?r(34067):void 0});var S=1;switch(h){case 35678:case 35680:var k=n.def(_,"._texture");n(d,".uniform1i(",b,",",k,".bind());"),n.exit(k,".unbind();");continue;case 5124:case 35670:u="1i";break;case 35667:case 35671:u="2i",S=2;break;case 35668:case 35672:u="3i",S=3;break;case 35669:case 35673:u="4i",S=4;break;case 5126:u="1f";break;case 35664:u="2f",S=2;break;case 35665:u="3f",S=3;break;case 35666:u="4f",S=4;break;case 35674:u="Matrix2fv";break;case 35675:u="Matrix3fv";break;case 35676:u="Matrix4fv";}if(n(d,".uniform",u,"(",b,","),"M"===u.charAt(0)){var T=s(h-35674+2,2),E=e.global.def("new Float32Array(",T,")");n("false,(Array.isArray(",_,")||",_," instanceof Float32Array)?",_,":(",N(T,function(e){return E+"["+e+"]="+_+"["+e+"]"}),",",E,")")}else 1<S?n(N(S,function(e){return _+"["+e+"]"})):n(_);n(");")}}function P(e,t,n,a){function i(i){var r=f[i];return r?r.contextDep&&a.contextDynamic||r.propDep?r.append(e,n):r.append(e,t):t.def(d,".",i)}function r(){function e(){n(g,".drawElementsInstancedANGLE(",[c,h,b,p+"<<(("+b+"-"+5121+")>>1)",m],");")}function t(){n(g,".drawArraysInstancedANGLE(",[c,p,h,m],");")}u?_?e():(n("if(",u,"){"),e(),n("}else{"),t(),n("}")):t()}function o(){function e(){n(l+".drawElements("+[c,h,b,p+"<<(("+b+"-"+5121+")>>1)"]+");")}function t(){n(l+".drawArrays("+[c,p,h]+");")}u?_?e():(n("if(",u,"){"),e(),n("}else{"),t(),n("}")):t()}var s=e.shared,l=s.gl,d=s.draw,f=a.draw,u=function(){var i=f.elements,r=t,o;return i?((i.contextDep&&a.contextDynamic||i.propDep)&&(r=n),o=i.append(e,r)):o=r.def(d,".","elements"),o&&r("if("+o+")"+l+".bindBuffer("+34963+","+o+".buffer.buffer);"),o}(),c=i("primitive"),p=i("offset"),h=function(){var i=f.count,r=t,o;return i?((i.contextDep&&a.contextDynamic||i.propDep)&&(r=n),o=i.append(e,r),Fe.optional(function(){i.MISSING&&e.assert(t,"false","missing vertex count"),i.DYNAMIC&&e.assert(r,o+">=0","missing vertex count")})):(o=r.def(d,".","count"),Fe.optional(function(){e.assert(r,o+">=0","missing vertex count")})),o}();if(!("number"==typeof h))n("if(",h,"){"),n.exit("}");else if(0===h)return;var m,g;$&&(m=i("instances"),g=e.instancing);var b=u+".type",_=f.elements&&Ae(f.elements);$&&("number"!=typeof m||0<=m)?"string"==typeof m?(n("if(",m,">0){"),r(),n("}else if(",m,"<0){"),o(),n("}")):r():o()}function M(e,t,n,a,i){var r=_(),o=r.proc("body",i);return Fe.optional(function(){r.commandStr=t.commandStr,r.command=r.link(t.commandStr)}),$&&(r.instancing=o.def(r.shared.extensions,".angle_instanced_arrays")),e(r,o,n,a),r.compile().body}function V(e,t,n,a){D(e,t),F(e,t,n,a.attributes,function(){return!0}),O(e,t,n,a.uniforms,function(){return!0}),P(e,t,t,n)}function W(e,t){var n=e.proc("draw",1);D(e,n),C(e,n,t.context),I(e,n,t.framebuffer),z(e,n,t),j(e,n,t.state),R(e,n,t,!1,!0);var a=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",a,".program);"),t.shader.program)V(e,n,t,t.shader.program);else{var i=e.global.def("{}"),r=n.def(a,".id"),o=n.def(i,"[",r,"]");n(e.cond(o).then(o,".call(this,a0);").else(o,"=",i,"[",r,"]=",e.link(function(n){return M(V,e,t,n,1)}),"(",a,");",o,".call(this,a0);"))}0<Object.keys(t.state).length&&n(e.shared.current,".dirty=true;")}function G(e,t,n,a){function i(){return!0}e.batchId="a1",D(e,t),F(e,t,n,a.attributes,i),O(e,t,n,a.uniforms,i),P(e,t,t,n)}function H(e,t,n,a){function i(e){return e.contextDep&&o||e.propDep}function r(e){return!i(e)}D(e,t);var o=n.contextDep,s=t.def(),l=t.def();e.shared.props=l,e.batchId=s;var d=e.scope(),f=e.scope();if(t(d.entry,"for(",s,"=0;",s,"<","a1",";++",s,"){",l,"=","a0","[",s,"];",f,"}",d.exit),n.needsContext&&C(e,f,n.context),n.needsFramebuffer&&I(e,f,n.framebuffer),j(e,f,n.state,i),n.profile&&i(n.profile)&&R(e,f,n,!1,!0),!a){var u=e.global.def("{}"),c=n.shader.progVar.append(e,f),p=f.def(c,".id"),h=f.def(u,"[",p,"]");f(e.shared.gl,".useProgram(",c,".program);","if(!",h,"){",h,"=",u,"[",p,"]=",e.link(function(t){return M(G,e,n,t,2)}),"(",c,");}",h,".call(this,a0[",s,"],",s,");")}else F(e,d,n,a.attributes,r),F(e,f,n,a.attributes,i),O(e,d,n,a.uniforms,r),O(e,f,n,a.uniforms,i),P(e,d,f,n)}function U(e,t){function n(e){return e.contextDep&&i||e.propDep}var a=e.proc("batch",2);e.batchId="0",D(e,a);var i=!1,r=!0;Object.keys(t.context).forEach(function(e){i=i||t.context[e].propDep}),i||(C(e,a,t.context),r=!1);var o=t.framebuffer,s=!1;o?(o.propDep?i=s=!0:o.contextDep&&i&&(s=!0),!s&&I(e,a,o)):I(e,a,null),t.state.viewport&&t.state.viewport.propDep&&(i=!0),z(e,a,t),j(e,a,t.state,function(e){return!n(e)}),t.profile&&n(t.profile)||R(e,a,t,!1,"a1"),t.contextDep=i,t.needsContext=r,t.needsFramebuffer=s;var l=t.shader.progVar;if(l.contextDep&&i||l.propDep)H(e,a,t,null);else{var d=l.append(e,a);if(a(e.shared.gl,".useProgram(",d,".program);"),t.shader.program)H(e,a,t,t.shader.program);else{var f=e.global.def("{}"),u=a.def(d,".id"),c=a.def(f,"[",u,"]");a(e.cond(c).then(c,".call(this,a0,a1);").else(c,"=",f,"[",u,"]=",e.link(function(n){return M(H,e,t,n,2)}),"(",d,");",c,".call(this,a0,a1);"))}}0<Object.keys(t.state).length&&a(e.shared.current,".dirty=true;")}function q(e,n){function a(t){var a=n.shader[t];a&&r.set(o.shader,"."+t,a.append(e,r))}var r=e.proc("scope",3);e.batchId="a2";var o=e.shared,s=o.current;C(e,r,n.context),n.framebuffer&&n.framebuffer.append(e,r),Te(Object.keys(n.state)).forEach(function(t){var a=n.state[t],i=a.append(e,r);Q(i)?i.forEach(function(n,a){r.set(e.next[t],"["+a+"]",n)}):r.set(o.next,"."+t,i)}),R(e,r,n,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(t){var a=n.draw[t];a&&r.set(o.draw,"."+t,""+a.append(e,r))}),Object.keys(n.uniforms).forEach(function(a){r.set(o.uniforms,"["+t.id(a)+"]",n.uniforms[a].append(e,r))}),Object.keys(n.attributes).forEach(function(t){var a=n.attributes[t].append(e,r),i=e.scopeAttrib(t);Object.keys(new K).forEach(function(e){r.set(i,"."+e,a[e])})}),a("vert"),a("frag"),0<Object.keys(n.state).length&&(r(s,".dirty=true;"),r.exit(s,".dirty=true;")),r("a1(",e.shared.context,",a0,",e.batchId,");")}function Z(e){if(!("object"!=typeof e||Q(e))){for(var t=Object.keys(e),n=0;n<t.length;++n)if(Pe.isDynamic(e[t[n]]))return!0;return!1}}function X(e,t,n){function a(e,t){o.forEach(function(n){var a=i[n];if(Pe.isDynamic(a)){var r=e.invoke(t,a);t(f,".",n,"=",r,";")}})}var i=t.static[n];if(i&&Z(i)){var r=e.global,o=Object.keys(i),s=!1,l=!1,d=!1,f=e.global.def("{}");o.forEach(function(t){var n=i[t];if(Pe.isDynamic(n)){"function"==typeof n&&(n=i[t]=Pe.unbox(n));var a=Ce(n,null);s=s||a.thisDep,d=d||a.propDep,l=l||a.contextDep}else{switch(r(f,".",t,"="),typeof n){case"number":r(n);break;case"string":r("\"",n,"\"");break;case"object":Array.isArray(n)&&r("[",n.join(),"]");break;default:r(e.link(n));}r(";")}}),t.dynamic[n]=new Pe.DynamicVariable(4,{thisDep:s,contextDep:l,propDep:d,ref:f,append:a}),delete t.static[n]}}var K=d.Record,Y={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(Y.min=32775,Y.max=32776);var $=n.angle_instanced_arrays,J=n.webgl_draw_buffers,ee={dirty:!0,profile:h.profile},te={},ne=[],ae={},ie={};g("dither",3024),g("blend.enable",3042),b("blend.color","blendColor",[0,0,0,0]),b("blend.equation","blendEquationSeparate",[32774,32774]),b("blend.func","blendFuncSeparate",[1,0,1,0]),g("depth.enable",2929,!0),b("depth.func","depthFunc",513),b("depth.range","depthRange",[0,1]),b("depth.mask","depthMask",!0),b("colorMask","colorMask",[!0,!0,!0,!0]),g("cull.enable",2884),b("cull.face","cullFace",1029),b("frontFace","frontFace",2305),b("lineWidth","lineWidth",1),g("polygonOffset.enable",32823),b("polygonOffset.offset","polygonOffset",[0,0]),g("sample.alpha",32926),g("sample.enable",32928),b("sample.coverage","sampleCoverage",[1,!1]),g("stencil.enable",2960),b("stencil.mask","stencilMask",-1),b("stencil.func","stencilFunc",[519,0,-1]),b("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),b("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),g("scissor.enable",3089),b("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),b("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var re={gl:e,context:c,strings:t,next:te,current:ee,draw:u,elements:r,buffer:i,shader:f,attributes:d.state,uniforms:l,framebuffer:s,extensions:n,timer:p,isBufferArgs:ke},oe={primTypes:it,compareFuncs:$t,blendFuncs:Yt,blendEquations:Y,stencilOps:Jt,glTypes:Je,orientationType:tn};Fe.optional(function(){re.isArrayLike=Q}),J&&(oe.backBuffer=[1029],oe.drawBuffer=N(a.maxDrawbuffers,function(e){return 0===e?[0]:N(e,function(e){return 36064+e})}));var se=0;return{next:te,current:ee,procs:function(){var e=_(),t=e.proc("poll"),r=e.proc("refresh"),o=e.block();t(o),r(o);var s=e.shared,l=s.gl,d=s.next,f=s.current;o(f,".dirty=false;"),I(e,t),I(e,r,null,!0);var u;$&&(u=e.link($));for(var c=0;c<a.maxAttributes;++c){var n=r.def(s.attributes,"[",c,"]"),p=e.cond(n,".buffer");p.then(l,".enableVertexAttribArray(",c,");",l,".bindBuffer(",34962,",",n,".buffer.buffer);",l,".vertexAttribPointer(",c,",",n,".size,",n,".type,",n,".normalized,",n,".stride,",n,".offset);").else(l,".disableVertexAttribArray(",c,");",l,".vertexAttrib4f(",c,",",n,".x,",n,".y,",n,".z,",n,".w);",n,".buffer=null;"),r(p),$&&r(u,".vertexAttribDivisorANGLE(",c,",",n,".divisor);")}return Object.keys(ae).forEach(function(n){var a=ae[n],i=o.def(d,".",n),s=e.block();s("if(",i,"){",l,".enable(",a,")}else{",l,".disable(",a,")}",f,".",n,"=",i,";"),r(s),t("if(",i,"!==",f,".",n,"){",s,"}")}),Object.keys(ie).forEach(function(a){var i=ie[a],s=ee[a],u=e.block(),c,p;if(u(l,".",i,"("),Q(s)){var h=s.length;c=e.global.def(d,".",a),p=e.global.def(f,".",a),u(N(h,function(e){return c+"["+e+"]"}),");",N(h,function(e){return p+"["+e+"]="+c+"["+e+"];"}).join("")),t("if(",N(h,function(e){return c+"["+e+"]!=="+p+"["+e+"]"}).join("||"),"){",u,"}")}else c=o.def(d,".",a),p=o.def(f,".",a),u(c,");",f,".",a,"=",c,";"),t("if(",c,"!==",p,"){",u,"}");r(u)}),e.compile()}(),compile:function(e,t,n,a,i){var r=_();r.stats=r.link(i),Object.keys(t.static).forEach(function(e){X(r,t,e)}),Kt.forEach(function(t){X(r,e,t)});var o=B(e,t,n,a,r);return W(r,o),q(r,o),U(r,o),r.compile()}}}function Le(){return{bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}function ze(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var je=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},De=function(e,t){for(var n=Object.keys(t),a=0;a<n.length;++a)e[n[a]]=t[n[a]];return e},Re=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"],Ne={};Ne[5120]=Ne[5121]=1,Ne[5122]=Ne[5123]=Ne[36193]=Ne[33635]=Ne[32819]=Ne[32820]=2,Ne[5124]=Ne[5125]=Ne[5126]=Ne[34042]=4;var Fe=De(n,{optional:function(e){e()},raise:t,commandRaise:b,command:function(e,t,n){e||b(t,n||f())},parameter:i,commandParameter:_,constructor:function(e){Object.keys(e).forEach(function(e){0>Re.indexOf(e)&&t("invalid regl constructor argument \""+e+"\". must be one of "+Re)})},type:function(e,n,i){typeof e!==n&&t("invalid parameter type"+a(i)+". expected "+n+", got "+typeof e)},commandType:y,isTypedArray:function(e,n){je(e)||t("invalid parameter type"+a(n)+". must be a typed array")},nni:function(e,n){0<=e&&(0|e)===e||t("invalid parameter type, ("+e+")"+a(n)+". must be a nonnegative integer")},oneOf:r,shaderError:function(e,t,a,i,r){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var s=e.getShaderInfoLog(t),l=i===e.FRAGMENT_SHADER?"fragment":"vertex";y(a,"string",l+" shader source must be a string",r);var d=c(a,r),f=p(s);h(d,f),Object.keys(d).forEach(function(e){function t(e,t){a.push(e),i.push(t||"")}var n=d[e];if(n.hasErrors){var a=[""],i=[""];t("file number "+e+": "+n.name+"\n","color:red;text-decoration:underline;font-weight:bold"),n.lines.forEach(function(e){if(0<e.errors.length){t(o(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),t(e.line+"\n","color:red; background-color:yellow; font-weight:bold");var n=0;e.errors.forEach(function(a){var i=a.message,r=/^\s*\'(.*)\'\s*\:\s*(.*)$/.exec(i);if(r){var s=r[1];i=r[2],"assign"===s?s="=":void 0,n=fo(e.line.indexOf(s,n),0)}else n=0;t(o("| ",6)),t(o("^^^",n+3)+"\n","font-weight:bold"),t(o("| ",6)),t(i+"\n","font-weight:bold")}),t(o("| ",6)+"\n")}else t(o(e.number,4)+"|  "),t(e.line+"\n","color:red")}),"undefined"==typeof document||window.chrome?console.log(a.join("")):(i[0]=a.join("%c"),console.log.apply(console,i))}}),n.raise("Error compiling "+l+" shader, "+d[0].name)}},linkError:function(e,t,a,i,r){if(!e.getProgramParameter(t,e.LINK_STATUS)){var o=e.getProgramInfoLog(t),s=c(a,r),l=c(i,r),d="Error linking program with vertex shader, \""+l[0].name+"\", and fragment shader \""+s[0].name+"\"";"undefined"==typeof document?console.log(d+"\n"+o):console.log("%c"+d+"\n"+"%c"+o,"color:red;text-decoration:underline;font-weight:bold","color:red"),n.raise(d)}},callSite:u,saveCommandRef:m,saveDrawInfo:g,framebufferFormat:function(e,t,n){e.texture?r(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):r(e.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:f,texture2D:function(e,t,a){var r=t.width,o=t.height,s=t.channels,l;n(0<r&&r<=a.maxTextureSize&&0<o&&o<=a.maxTextureSize,"invalid texture shape"),(e.wrapS!==33071||e.wrapT!==33071)&&n(v(r)&&v(o),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==r&&1!==o&&n(e.minFilter!==9984&&e.minFilter!==9986&&e.minFilter!==9985&&e.minFilter!==9987,"min filter requires mipmap"):(n(v(r)&&v(o),"texture must be a square power of 2 to support mipmapping"),n(t.mipmask===(r<<1)-1,"missing or incomplete mipmap data")),t.type===5126&&(0>a.extensions.indexOf("oes_texture_float_linear")&&n(e.minFilter===9728&&e.magFilter===9728,"filter not supported, must enable oes_texture_float_linear"),n(!e.genMipmaps,"mipmap generation not supported with float textures"));var d=t.images;for(l=0;16>l;++l)if(d[l]){var f=r>>l,u=o>>l;n(t.mipmask&1<<l,"missing mipmap data");var c=d[l];if(n(c.width===f&&c.height===u,"invalid shape for mip images"),n(c.format===t.format&&c.internalformat===t.internalformat&&c.type===t.type,"incompatible type for mip image"),c.compressed);else if(c.data){var p=so(x(c.type,s)*f/c.unpackAlignment)*c.unpackAlignment;n(c.data.byteLength===p*u,"invalid data for image, buffer size is inconsistent with image format")}else if(c.element);else if(c.copy);}else e.genMipmaps||n(0==(t.mipmask&1<<l),"extra mipmap data");t.compressed&&n(!e.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(e,t,a,r){var o=e.width,s=e.height,l=e.channels;n(0<o&&o<=r.maxTextureSize&&0<s&&s<=r.maxTextureSize,"invalid texture shape"),n(o===s,"cube map must be square"),n(t.wrapS===33071&&t.wrapT===33071,"wrap mode not supported by cube map");for(var d=0,f;d<a.length;++d){f=a[d],n(f.width===o&&f.height===s,"inconsistent cube map face shape"),t.genMipmaps&&(n(!f.compressed,"can not generate mipmap for compressed textures"),n(1===f.mipmask,"can not specify mipmaps and generate mipmaps"));for(var u=f.images,c=0,p;16>c;++c)if(p=u[c],p){var h=o>>c,m=s>>c;if(n(f.mipmask&1<<c,"missing mipmap data"),n(p.width===h&&p.height===m,"invalid shape for mip images"),n(p.format===e.format&&p.internalformat===e.internalformat&&p.type===e.type,"incompatible type for mip image"),p.compressed);else if(p.data)n(p.data.byteLength===h*m*fo(x(p.type,l),p.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format");else if(p.element);else if(p.copy);}}}}),Oe=0,Pe={DynamicVariable:w,define:function(e,t){return new w(e,T(t+""))},isDynamic:function(e){return"function"==typeof e&&!e._reglType||e instanceof w},unbox:function(e){return"function"==typeof e?new w(0,e):e},accessor:T},Me={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},Ve="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},We=P();We.zero=P();var Ge=3553,He=34067,Ue=6408,qe=5126,Ze=5121,Xe=36160,Ke=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(34047));var a=1,i=1;t.webgl_draw_buffers&&(a=e.getParameter(34852),i=e.getParameter(36063));var r=!!t.oes_texture_float;if(r){var o=e.createTexture();e.bindTexture(Ge,o),e.texImage2D(Ge,0,Ue,1,1,0,Ue,qe,null);var s=e.createFramebuffer();if(e.bindFramebuffer(Xe,s),e.framebufferTexture2D(Xe,36064,Ge,o,0),e.bindTexture(Ge,null),e.checkFramebufferStatus(Xe)!==36053)r=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(16384);var l=We.allocType(qe,4);e.readPixels(0,0,1,1,Ue,qe,l),e.getError()?r=!1:(e.deleteFramebuffer(s),e.deleteTexture(o),r=1===l[0]),We.freeType(l)}}var d=!0,f=e.createTexture(),u=We.allocType(Ze,36);return e.activeTexture(33984),e.bindTexture(He,f),e.texImage2D(34069,0,Ue,3,3,0,Ue,Ze,u),We.freeType(u),e.bindTexture(He,null),e.deleteTexture(f),d=!e.getError(),{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:n,maxDrawbuffers:a,maxColorAttachments:i,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:r,npotTextureCube:d}},Ye=function(e){return Object.keys(e).map(function(t){return e[t]})},Qe={shape:function(e){for(var t=[],n=e;n.length;n=n[0])t.push(n.length);return t},flatten:function(e,t,n,a){var r=1;if(t.length)for(var o=0;o<t.length;++o)r*=t[o];else r=0;var s=a||We.allocType(n,r);switch(t.length){case 0:break;case 1:V(e,t[0],s);break;case 2:W(e,t[0],t[1],s);break;case 3:G(e,t[0],t[1],t[2],s,0);break;default:H(e,t,0,s,0);}return s}},$e={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Je={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},et={dynamic:35048,stream:35040,static:35044},tt=Qe.flatten,nt=Qe.shape,at=[];at[5120]=1,at[5122]=2,at[5124]=4,at[5121]=1,at[5123]=2,at[5125]=4,at[5126]=4;var it={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},rt=new Float32Array(1),ot=new Uint32Array(rt.buffer),st=function(e){return!(e&e-1)&&!!e},lt=6408,dt=6407,ft=6409,ut=6410,ct=34041,pt=[9984,9986,9985,9987],ht=[0,ft,ut,dt,lt],mt={};mt[ft]=mt[6406]=mt[6402]=1,mt[ct]=mt[ut]=2,mt[dt]=mt[35904]=3,mt[lt]=mt[35906]=4;var gt=$("HTMLCanvasElement"),bt=$("CanvasRenderingContext2D"),_t=$("ImageBitmap"),yt=$("HTMLImageElement"),xt=$("HTMLVideoElement"),vt=Object.keys($e).concat([gt,bt,_t,yt,xt]),wt=[];wt[5121]=1,wt[5126]=4,wt[36193]=2,wt[5123]=2,wt[5125]=4;var St=[];St[32854]=2,St[32855]=2,St[36194]=2,St[ct]=4,St[33776]=.5,St[33777]=.5,St[33778]=1,St[33779]=1,St[35986]=.5,St[35987]=1,St[34798]=1,St[35840]=.5,St[35841]=.25,St[35842]=.5,St[35843]=.25,St[36196]=.5;var kt=32854,Tt=32855,Et=36194,At=33189,Bt=36168,Ct=34041,It=35907,Lt=34836,zt=34842,jt=34843,Dt=[];Dt[kt]=2,Dt[Tt]=2,Dt[Et]=2,Dt[At]=2,Dt[Bt]=1,Dt[Ct]=4,Dt[It]=4,Dt[Lt]=16,Dt[zt]=8,Dt[jt]=6;var Rt=function(e,t,n,i,r){function o(e){this.id=f++,this.refCount=1,this.renderbuffer=e,this.format=kt,this.width=0,this.height=0,r.profile&&(this.stats={size:0})}function s(t){var n=t.renderbuffer;Fe(n,"must not double destroy renderbuffer"),e.bindRenderbuffer(36161,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete u[t.id],i.renderbufferCount--}var l={rgba4:kt,rgb565:Et,"rgb5 a1":Tt,depth:At,stencil:Bt,"depth stencil":Ct};t.ext_srgb&&(l.srgba=It),t.ext_color_buffer_half_float&&(l.rgba16f=zt,l.rgb16f=jt),t.webgl_color_buffer_float&&(l.rgba32f=Lt);var d=[];Object.keys(l).forEach(function(e){var t=l[e];d[t]=e});var f=0,u={};return o.prototype.decRef=function(){0>=--this.refCount&&s(this)},r.profile&&(i.getTotalRenderbufferSize=function(){var e=0;return Object.keys(u).forEach(function(t){e+=u[t].stats.size}),e}),{create:function(t,a){function s(t,a){var i=0,o=0,u=kt;if("object"==typeof t&&t){var c=t;if("shape"in c){var p=c.shape;Fe(Array.isArray(p)&&2<=p.length,"invalid renderbuffer shape"),i=0|p[0],o=0|p[1]}else"radius"in c&&(i=o=0|c.radius),"width"in c&&(i=0|c.width),"height"in c&&(o=0|c.height);"format"in c&&(Fe.parameter(c.format,l,"invalid renderbuffer format"),u=l[c.format])}else"number"==typeof t?(i=0|t,o="number"==typeof a?0|a:i):t?Fe.raise("invalid arguments to renderbuffer constructor"):i=o=1;return(Fe(0<i&&0<o&&i<=n.maxRenderbufferSize&&o<=n.maxRenderbufferSize,"invalid renderbuffer size"),i!==f.width||o!==f.height||u!==f.format)?(s.width=f.width=i,s.height=f.height=o,f.format=u,e.bindRenderbuffer(36161,f.renderbuffer),e.renderbufferStorage(36161,u,i,o),Fe(0===e.getError(),"invalid render buffer format"),r.profile&&(f.stats.size=me(f.format,f.width,f.height)),s.format=d[f.format],s):void 0}var f=new o(e.createRenderbuffer());return u[f.id]=f,i.renderbufferCount++,s(t,a),s.resize=function(t,a){var i=0|t,o=0|a||i;return i===f.width&&o===f.height?s:(Fe(0<i&&0<o&&i<=n.maxRenderbufferSize&&o<=n.maxRenderbufferSize,"invalid renderbuffer size"),s.width=f.width=i,s.height=f.height=o,e.bindRenderbuffer(36161,f.renderbuffer),e.renderbufferStorage(36161,f.format,i,o),Fe(0===e.getError(),"invalid render buffer format"),r.profile&&(f.stats.size=me(f.format,f.width,f.height)),s)},s._reglType="renderbuffer",s._renderbuffer=f,r.profile&&(s.stats=f.stats),s.destroy=function(){f.decRef()},s},clear:function(){Ye(u).forEach(s)},restore:function(){Ye(u).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,t.renderbuffer),e.renderbufferStorage(36161,t.format,t.width,t.height)}),e.bindRenderbuffer(36161,null)}}},Nt=6407,Ft=6408,Ot=[Nt,Ft],Pt=[];Pt[Ft]=4,Pt[Nt]=3;var Mt=[];Mt[5121]=1,Mt[5126]=4,Mt[36193]=2;var Vt=[32854,32855,36194,35907,34842,34843,34836],Wt={};Wt[36053]="complete",Wt[36054]="incomplete attachment",Wt[36057]="incomplete dimensions",Wt[36055]="incomplete, missing attachment",Wt[36061]="unsupported";var Gt=["x","y","z","w"],Ht="viewport",Ut="framebuffer",qt="Width",Zt="Height",Xt="drawingBuffer",Kt=["blend.func","blend.equation","stencil.func","stencil.opFront","stencil.opBack","sample.coverage",Ht,"scissor.box","polygonOffset.offset"],Yt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Qt=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],$t={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Jt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},en={frag:35632,vert:35633},tn={cw:2304,ccw:2305},nn=new Ee(!1,!1,!1,function(){}),an=35007,rn=function(e,t){function n(){return l.pop()||t.ext_disjoint_timer_query.createQueryEXT()}function a(e){l.push(e)}function i(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}function r(){return f.pop()||new i}function o(e){f.push(e)}function s(e,t,n){var a=r();a.startQueryIndex=e,a.endQueryIndex=t,a.sum=0,a.stats=n,u.push(a)}if(!t.ext_disjoint_timer_query)return null;var l=[],d=[],f=[],u=[],c=[],p=[];return{beginQuery:function(e){var a=n();t.ext_disjoint_timer_query.beginQueryEXT(an,a),d.push(a),s(d.length-1,d.length,e)},endQuery:function(){t.ext_disjoint_timer_query.endQueryEXT(an)},pushScopeStats:s,update:function(){var e=d.length,n,r;if(0!==e){p.length=fo(p.length,e+1),c.length=fo(c.length,e+1),c[0]=0,p[0]=0;var s=0;for(n=0,r=0;r<d.length;++r){var l=d[r];t.ext_disjoint_timer_query.getQueryObjectEXT(l,34919)?(s+=t.ext_disjoint_timer_query.getQueryObjectEXT(l,34918),a(l)):d[n++]=l,c[r+1]=s,p[r+1]=n}for(d.length=n,n=0,r=0;r<u.length;++r){var f=u[r],h=f.startQueryIndex,m=f.endQueryIndex;f.sum+=c[m]-c[h];var g=p[h],b=p[m];b===g?(f.stats.gpuTime+=f.sum/1e6,o(f)):(f.startQueryIndex=g,f.endQueryIndex=b,u[n++]=f)}u.length=n}},getNumPendingQueries:function(){return d.length},clear:function(){l.push.apply(l,d);for(var e=0;e<l.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(l[e]);d.length=0,l.length=0},restore:function(){d.length=0,l.length=0}}};return function(e){function t(){if(0===G.length)return w&&w.update(),void(Z=null);Z=Me.next(t),u();for(var e=G.length-1,n;0<=e;--e)n=G[e],n&&n(A,null,0);m.flush(),w&&w.update()}function n(){!Z&&0<G.length&&(Z=Me.next(t))}function a(){Z&&(Me.cancel(t),Z=null)}function i(e){e.preventDefault(),b=!0,a(),H.forEach(function(e){e()})}function r(){m.getError(),b=!1,_.restore(),j.restore(),I.restore(),N.restore(),F.restore(),O.restore(),w&&w.restore(),P.procs.refresh(),n(),U.forEach(function(e){e()})}function o(e){function t(e){function t(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach(function(a){n[e+"."+a]=t[a]})}}var n=De({},e);return delete n.uniforms,delete n.attributes,delete n.context,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),t("blend"),t("depth"),t("cull"),t("stencil"),t("polygonOffset"),t("scissor"),t("sample"),n}function n(e){var t={},n={};return Object.keys(e).forEach(function(a){var i=e[a];Pe.isDynamic(i)?n[a]=Pe.unbox(i,a):t[a]=i}),{dynamic:n,static:t}}function a(e){for(;h.length<e;)h.push(null);return h}function i(e,t){var n;if(b&&Fe.raise("context lost"),"function"==typeof e)return p.call(this,null,e,0);if("function"==typeof t){if("number"==typeof e){for(n=0;n<e;++n)p.call(this,null,t,n);return}if(Array.isArray(e)){for(n=0;n<e.length;++n)p.call(this,e[n],t,n);return}return p.call(this,e,t,0)}if("number"!=typeof e){if(!Array.isArray(e))return u.call(this,e);if(e.length)return c.call(this,e,e.length)}else if(0<e)return c.call(this,a(0|e),0|e)}Fe(!!e,"invalid args to regl({...})"),Fe.type(e,"object","invalid args to regl({...})");var r=n(e.context||{}),o=n(e.uniforms||{}),s=n(e.attributes||{}),l=n(t(e)),d={gpuTime:0,cpuTime:0,count:0},f=P.compile(l,s,o,r,d),u=f.draw,c=f.batch,p=f.scope,h=[];return De(i,{stats:d})}function s(e,t){var n=0;P.procs.poll();var a=t.color;a&&(m.clearColor(+a[0]||0,+a[1]||0,+a[2]||0,+a[3]||0),n|=16384),"depth"in t&&(m.clearDepth(+t.depth),n|=256),"stencil"in t&&(m.clearStencil(0|t.stencil),n|=1024),Fe(!!n,"called regl.clear with no buffer specified"),m.clear(n)}function l(e){if(Fe("object"==typeof e&&e,"regl.clear() takes an object as input"),!("framebuffer"in e))s(null,e);else if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;6>t;++t)Y(De({framebuffer:e.framebuffer.faces[t]},e),s);else Y(e,s)}function d(e){return Fe.type(e,"function","regl.frame() callback must be a function"),G.push(e),n(),{cancel:function(){function t(){var e=ze(G,t);G[e]=G[G.length-1],G.length-=1,0>=G.length&&a()}var n=ze(G,e);Fe(0<=n,"cannot cancel a frame twice"),G[n]=t}}}function f(){var e=V.viewport,t=V.scissor_box;e[0]=e[1]=t[0]=t[1]=0,A.viewportWidth=A.framebufferWidth=A.drawingBufferWidth=e[2]=t[2]=m.drawingBufferWidth,A.viewportHeight=A.framebufferHeight=A.drawingBufferHeight=e[3]=t[3]=m.drawingBufferHeight}function u(){A.tick+=1,A.time=p(),f(),P.procs.poll()}function c(){f(),P.procs.refresh(),w&&w.update()}function p(){return(Ve()-S)/1e3}var h=D(e);if(!h)return null;var m=h.gl,g=m.getContextAttributes(),b=m.isContextLost(),_=R(m,h);if(!_)return null;var y=E(),x=Le(),v=_.extensions,w=rn(m,v),S=Ve(),k=m.drawingBufferWidth,T=m.drawingBufferHeight,A={tick:0,time:0,viewportWidth:k,viewportHeight:T,framebufferWidth:k,framebufferHeight:T,drawingBufferWidth:k,drawingBufferHeight:T,pixelRatio:h.pixelRatio},B=Ke(m,v),C=_e(m,v,B,y),I=X(m,x,h,C),z=K(m,v,I,x),j=ye(m,y,x,h),N=he(m,v,B,function(){P.procs.poll()},A,x,h),F=Rt(m,v,B,x,h),O=ge(m,v,B,N,F,x),P=Ie(m,y,v,B,I,z,N,O,{},C,j,{elements:null,primitive:4,count:-1,offset:0,instances:-1},A,w,h),M=xe(m,O,P.procs.poll,A,g,v,B),V=P.next,W=m.canvas,G=[],H=[],U=[],q=[h.onDestroy],Z=null;W&&(W.addEventListener("webglcontextlost",i,!1),W.addEventListener("webglcontextrestored",r,!1));var Y=O.setFBO=o({framebuffer:Pe.define.call(null,1,"framebuffer")});c();var Q=De(o,{clear:l,prop:Pe.define.bind(null,1),context:Pe.define.bind(null,2),this:Pe.define.bind(null,3),draw:o({}),buffer:function(e){return I.create(e,34962,!1,!1)},elements:function(e){return z.create(e,!1)},texture:N.create2D,cube:N.createCube,renderbuffer:F.create,framebuffer:O.create,framebufferCube:O.createCube,attributes:g,frame:d,on:function(e,t){Fe.type(t,"function","listener callback must be a function");var n;switch(e){case"frame":return d(t);case"lost":n=H;break;case"restore":n=U;break;case"destroy":n=q;break;default:Fe.raise("invalid event, must be one of frame,lost,restore,destroy");}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t)return n[e]=n[n.length-1],void n.pop()}}},limits:B,hasExtension:function(e){return 0<=B.extensions.indexOf(e.toLowerCase())},read:M,destroy:function(){G.length=0,a(),W&&(W.removeEventListener("webglcontextlost",i),W.removeEventListener("webglcontextrestored",r)),j.clear(),O.clear(),F.clear(),N.clear(),z.clear(),I.clear(),w&&w.clear(),q.forEach(function(e){e()})},_gl:m,_refresh:c,poll:function(){u(),w&&w.update()},now:p,stats:x});return h.onDone(null,Q),Q}})}),zp=Ri(function(e,t){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var a="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var a=t.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(var i in a)n(a,i)&&(e[i]=a[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,a,r){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+a),r);for(var o=0;o<a;o++)e[r+o]=t[n+o]},flattenChunks:function(e){var t,n,a,r,o,s;for(a=0,t=0,n=e.length;t<n;t++)a+=e[t].length;for(s=new Uint8Array(a),r=0,(t=0,n=e.length);t<n;t++)o=e[t],s.set(o,r),r+=o.length;return s}},r={arraySet:function(e,t,n,a,r){for(var o=0;o<a;o++)e[r+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,r))},t.setTyped(a)}),jp=zp.assign,Dp=zp.shrinkBuf,Rp=zp.setTyped,Np=zp.Buf8,Fp=zp.Buf16,Op=zp.Buf32,Pp=29,Mp=256+1+Pp,Vp=30,Wp=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Gp=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Hp=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Up=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],qp=Array(2*(Mp+2));Ni(qp);var Zp=Array(2*Vp);Ni(Zp);var Xp=Array(512);Ni(Xp);var Kp=Array(258-3+1);Ni(Kp);var Yp=Array(Pp);Ni(Yp);var Qp=Array(Vp);Ni(Qp);var $p=!1,Jp={_tr_init:or,_tr_stored_block:sr,_tr_flush_block:function(e,t,n,a){var i=0,r,o;0<e.level?(e.strm.data_type===2&&(e.strm.data_type=rr(e)),er(e,e.l_desc),er(e,e.d_desc),i=ar(e),r=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==t?sr(e,t,n,a):e.strategy===4||o===r?(Vi(e,2+(a?1:0),3),Ji(e,qp,Zp)):(Vi(e,4+(a?1:0),3),ir(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),Ji(e,e.dyn_ltree,e.dyn_dtree)),Xi(e),a&&Ki(e)},_tr_tally:function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=255&t>>>8,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Kp[n]+256+1)]++,e.dyn_dtree[2*Pi(t)]++),e.last_lit===e.lit_bufsize-1},_tr_align:function(e){Vi(e,2,3),Wi(e,256,qp),Hi(e)}},eh=function(e,t,a,i){for(var r=0|65535&e,o=0|65535&e>>>16,s=0;0!==a;){s=2e3<a?2e3:a,a-=s;do r=0|r+t[i++],o=0|o+r;while(--s);r%=65521,o%=65521}return 0|(r|o<<16)},th=function(){for(var e=[],t=0,a;256>t;t++){a=t;for(var i=0;8>i;i++)a=1&a?3988292384^a>>>1:a>>>1;e[t]=a}return e}(),nh=function(e,t,n,a){e^=-1;for(var r=a;r<a+n;r++)e=e>>>8^th[255&(e^t[r])];return-1^e},ah={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ih,rh,oh,sh;sh=[new wr(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(1>=e.lookahead){if(br(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var a=e.block_start+n;if((0===e.strstart||e.strstart>=a)&&(e.lookahead=e.strstart-a,e.strstart=a,cr(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(cr(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(cr(e,!0),0===e.strm.avail_out?3:4):e.strstart>e.block_start&&(cr(e,!1),0===e.strm.avail_out)?1:1}),new wr(4,4,8,4,_r),new wr(4,5,16,8,_r),new wr(4,6,32,32,_r),new wr(4,4,16,16,yr),new wr(8,16,32,32,yr),new wr(8,16,128,128,yr),new wr(8,32,128,256,yr),new wr(32,128,258,1024,yr),new wr(32,258,258,4096,yr)];var lh={deflateInit:function(e,t){return Ar(e,t,8,15,8,0)},deflateInit2:Ar,deflateReset:Er,deflateResetKeep:Tr,deflateSetHeader:function(e,t){return e&&e.state?2===e.state.wrap?(e.state.gzhead=t,0):-2:-2},deflate:Br,deflateEnd:function(e){var t;return e&&e.state?(t=e.state.status,42!==t&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t)?lr(e,-2):(e.state=null,113===t?lr(e,-3):0):-2},deflateSetDictionary:function(e,t){var a=t.length,i,r,o,l,d,f,u,c;if(!e||!e.state)return-2;if(i=e.state,l=i.wrap,2===l||1===l&&42!==i.status||i.lookahead)return-2;for(1===l&&(e.adler=eh(e.adler,t,a,0)),i.wrap=0,a>=i.w_size&&(0===l&&(fr(i.head),i.strstart=0,i.block_start=0,i.insert=0),c=new zp.Buf8(i.w_size),zp.arraySet(c,t,a-i.w_size,i.w_size,0),t=c,a=i.w_size),d=e.avail_in,f=e.next_in,u=e.input,e.avail_in=a,e.next_in=0,e.input=t,br(i);3<=i.lookahead;){r=i.strstart,o=i.lookahead-2;do i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+3-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++;while(--o);i.strstart=r,i.lookahead=2,br(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=f,e.input=u,e.avail_in=d,i.wrap=l,0},deflateInfo:"pako deflate (from Nodeca project)"},dh=!0,fh=!0;try{uo.apply(null,[0])}catch(e){dh=!1}try{uo.apply(null,new Uint8Array(1))}catch(e){fh=!1}for(var uh=new zp.Buf8(256),ch=0;256>ch;ch++)uh[ch]=252<=ch?6:248<=ch?5:240<=ch?4:224<=ch?3:192<=ch?2:1;uh[254]=uh[254]=1;var ph={string2buf:function(e){var t=e.length,n=0,a,r,o,s,l;for(s=0;s<t;s++)r=e.charCodeAt(s),55296==(64512&r)&&s+1<t&&(o=e.charCodeAt(s+1),56320==(64512&o)&&(r=65536+(r-55296<<10)+(o-56320),s++)),n+=128>r?1:2048>r?2:65536>r?3:4;for(a=new zp.Buf8(n),l=0,s=0;l<n;s++)r=e.charCodeAt(s),55296==(64512&r)&&s+1<t&&(o=e.charCodeAt(s+1),56320==(64512&o)&&(r=65536+(r-55296<<10)+(o-56320),s++)),128>r?a[l++]=r:2048>r?(a[l++]=192|r>>>6,a[l++]=128|63&r):65536>r?(a[l++]=224|r>>>12,a[l++]=128|63&r>>>6,a[l++]=128|63&r):(a[l++]=240|r>>>18,a[l++]=128|63&r>>>12,a[l++]=128|63&r>>>6,a[l++]=128|63&r);return a},buf2binstring:function(e){return Cr(e,e.length)},binstring2buf:function(e){for(var t=new zp.Buf8(e.length),n=0,a=t.length;n<a;n++)t[n]=e.charCodeAt(n);return t},buf2string:function(e,t){var n=t||e.length,a=Array(2*n),r,o,s,l;for(o=0,r=0;r<n;){if(s=e[r++],128>s){a[o++]=s;continue}if(l=uh[s],4<l){a[o++]=65533,r+=l-1;continue}for(s&=2===l?31:3===l?15:7;1<l&&r<n;)s=s<<6|63&e[r++],l--;if(1<l){a[o++]=65533;continue}65536>s?a[o++]=s:(s-=65536,a[o++]=55296|1023&s>>10,a[o++]=56320|1023&s)}return Cr(a,o)},utf8border:function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return 0>n?t:0===n?t:n+uh[e[n]]>t?n:t}},hh=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},mh=Object.prototype.toString,gh=4,bh=0,_h=1,yh=2;Ir.prototype.push=function(e,t){var n=this.strm,a=this.options.chunkSize,i,r;if(this.ended)return!1;r=t===~~t?t:!0===t?gh:0,n.input="string"==typeof e?ph.string2buf(e):"[object ArrayBuffer]"===mh.call(e)?new Uint8Array(e):e,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new zp.Buf8(a),n.next_out=0,n.avail_out=a),i=lh.deflate(n,r),i!==_h&&i!==bh)return this.onEnd(i),this.ended=!0,!1;(0===n.avail_out||0===n.avail_in&&(r===gh||r===yh))&&("string"===this.options.to?this.onData(ph.buf2binstring(zp.shrinkBuf(n.output,n.next_out))):this.onData(zp.shrinkBuf(n.output,n.next_out)))}while((0<n.avail_in||0===n.avail_out)&&i!==_h);return r===gh?(i=lh.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===bh):r!==yh||(this.onEnd(bh),n.avail_out=0,!0)},Ir.prototype.onData=function(e){this.chunks.push(e)},Ir.prototype.onEnd=function(e){e===bh&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=zp.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var xh=30,vh=function(e,t){var n,a,i,r,o,s,l,d,f,u,c,p,h,m,g,b,_,y,x,v,w,S,k,T,E;n=e.state,a=e.next_in,T=e.input,i=a+(e.avail_in-5),r=e.next_out,E=e.output,o=r-(t-e.avail_out),s=r+(e.avail_out-257),l=n.dmax,d=n.wsize,f=n.whave,u=n.wnext,c=n.window,p=n.hold,h=n.bits,m=n.lencode,g=n.distcode,b=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;top:do{15>h&&(p+=T[a++]<<h,h+=8,p+=T[a++]<<h,h+=8),y=m[p&b];dolen:for(;;){if(x=y>>>24,p>>>=x,h-=x,x=255&y>>>16,0===x)E[r++]=65535&y;else if(16&x){v=65535&y,x&=15,x&&(h<x&&(p+=T[a++]<<h,h+=8),v+=p&(1<<x)-1,p>>>=x,h-=x),15>h&&(p+=T[a++]<<h,h+=8,p+=T[a++]<<h,h+=8),y=g[p&_];dodist:for(;;){if(x=y>>>24,p>>>=x,h-=x,x=255&y>>>16,16&x){if(w=65535&y,x&=15,h<x&&(p+=T[a++]<<h,h+=8,h<x&&(p+=T[a++]<<h,h+=8)),w+=p&(1<<x)-1,w>l){e.msg="invalid distance too far back",n.mode=xh;break top}if(p>>>=x,h-=x,x=r-o,w>x){if(x=w-x,x>f&&n.sane){e.msg="invalid distance too far back",n.mode=xh;break top}if(S=0,k=c,0===u){if(S+=d-x,x<v){v-=x;do E[r++]=c[S++];while(--x);S=r-w,k=E}}else if(u<x){if(S+=d+u-x,x-=u,x<v){v-=x;do E[r++]=c[S++];while(--x);if(S=0,u<v){x=u,v-=x;do E[r++]=c[S++];while(--x);S=r-w,k=E}}}else if(S+=u-x,x<v){v-=x;do E[r++]=c[S++];while(--x);S=r-w,k=E}for(;2<v;)E[r++]=k[S++],E[r++]=k[S++],E[r++]=k[S++],v-=3;v&&(E[r++]=k[S++],1<v&&(E[r++]=k[S++]))}else{S=r-w;do E[r++]=E[S++],E[r++]=E[S++],E[r++]=E[S++],v-=3;while(2<v);v&&(E[r++]=E[S++],1<v&&(E[r++]=E[S++]))}}else if(0==(64&x)){y=g[(65535&y)+(p&(1<<x)-1)];continue dodist}else{e.msg="invalid distance code",n.mode=xh;break top}break}}else if(0==(64&x)){y=m[(65535&y)+(p&(1<<x)-1)];continue dolen}else if(32&x){n.mode=12;break top}else{e.msg="invalid literal/length code",n.mode=xh;break top}break}}while(a<i&&r<s);return v=h>>3,a-=v,h-=v<<3,p&=(1<<h)-1,e.next_in=a,e.next_out=r,e.avail_in=a<i?5+(i-a):5-(a-i),e.avail_out=r<s?257+(s-r):257-(r-s),n.hold=p,void(n.bits=h)},wh=15,Sh=852,kh=592,Th=0,Eh=1,Ah=2,Bh=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Ch=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Ih=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Lh=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],zh=function(e,t,n,a,i,r,o,s){var l=s.bits,d=0,f=0,u=0,c=0,p=0,h=0,m=0,g=0,b=0,_=0,y=null,x=0,v=new zp.Buf16(wh+1),w=new zp.Buf16(wh+1),S=null,k=0,T,E,A,B,C,I,z,j,D;for(d=0;d<=wh;d++)v[d]=0;for(f=0;f<a;f++)v[t[n+f]]++;for(p=l,c=wh;1<=c&&0===v[c];c--);if(p>c&&(p=c),0===c)return i[r++]=20971520,i[r++]=20971520,s.bits=1,0;for(u=1;u<c&&0===v[u];u++);for(p<u&&(p=u),g=1,d=1;d<=wh;d++)if(g<<=1,g-=v[d],0>g)return-1;if(0<g&&(e===Th||1!==c))return-1;for(w[1]=0,d=1;d<wh;d++)w[d+1]=w[d]+v[d];for(f=0;f<a;f++)0!==t[n+f]&&(o[w[t[n+f]]++]=f);if(e===Th?(y=S=o,I=19):e===Eh?(y=Bh,x-=257,S=Ch,k-=257,I=256):(y=Ih,S=Lh,I=-1),_=0,f=0,d=u,C=r,h=p,m=0,A=-1,b=1<<p,B=b-1,e===Eh&&b>Sh||e===Ah&&b>kh)return 1;for(;;){z=d-m,o[f]<I?(j=0,D=o[f]):o[f]>I?(j=S[k+o[f]],D=y[x+o[f]]):(j=96,D=0),T=1<<d-m,E=1<<h,u=E;do E-=T,i[C+(_>>m)+E]=0|(z<<24|j<<16|D);while(0!==E);for(T=1<<d-1;_&T;)T>>=1;if(0===T?_=0:(_&=T-1,_+=T),f++,0==--v[d]){if(d===c)break;d=t[n+o[f]]}if(d>p&&(_&B)!==A){for(0===m&&(m=p),C+=u,h=d-m,g=1<<h;h+m<c&&(g-=v[h+m],!(0>=g));)h++,g<<=1;if(b+=1<<h,e===Eh&&b>Sh||e===Ah&&b>kh)return 1;A=_&B,i[A]=0|(p<<24|h<<16|C-r)}}return 0!==_&&(i[C+_]=0|(4194304|d-m<<24)),s.bits=p,0},jh=!0,Dh={inflateReset:Rr,inflateReset2:Nr,inflateResetKeep:Dr,inflateInit:function(e){return Fr(e,15)},inflateInit2:Fr,inflate:function(e,t){var a=0,i=new zp.Buf8(4),r=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],o,s,l,d,f,u,c,p,h,m,g,b,_,y,x,v,w,S,k,T,E,A,B,C;if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;o=e.state,12===o.mode&&(o.mode=13),f=e.next_out,l=e.output,c=e.avail_out,d=e.next_in,s=e.input,u=e.avail_in,p=o.hold,h=o.bits,m=u,g=c,A=0;inf_leave:for(;;)switch(o.mode){case 1:if(0===o.wrap){o.mode=13;break}for(;16>h;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}if(2&o.wrap&&35615===p){o.check=0,i[0]=255&p,i[1]=255&p>>>8,o.check=nh(o.check,i,2,0),p=0,h=0,o.mode=2;break}if(o.flags=0,o.head&&(o.head.done=!1),!(1&o.wrap)||(((255&p)<<8)+(p>>8))%31){e.msg="incorrect header check",o.mode=30;break}if(8!==(15&p)){e.msg="unknown compression method",o.mode=30;break}if(p>>>=4,h-=4,E=(15&p)+8,0===o.wbits)o.wbits=E;else if(E>o.wbits){e.msg="invalid window size",o.mode=30;break}o.dmax=1<<E,e.adler=o.check=1,o.mode=512&p?10:12,p=0,h=0;break;case 2:for(;16>h;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}if(o.flags=p,8!==(255&o.flags)){e.msg="unknown compression method",o.mode=30;break}if(57344&o.flags){e.msg="unknown header flags set",o.mode=30;break}o.head&&(o.head.text=1&p>>8),512&o.flags&&(i[0]=255&p,i[1]=255&p>>>8,o.check=nh(o.check,i,2,0)),p=0,h=0,o.mode=3;case 3:for(;32>h;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}o.head&&(o.head.time=p),512&o.flags&&(i[0]=255&p,i[1]=255&p>>>8,i[2]=255&p>>>16,i[3]=255&p>>>24,o.check=nh(o.check,i,4,0)),p=0,h=0,o.mode=4;case 4:for(;16>h;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}o.head&&(o.head.xflags=255&p,o.head.os=p>>8),512&o.flags&&(i[0]=255&p,i[1]=255&p>>>8,o.check=nh(o.check,i,2,0)),p=0,h=0,o.mode=5;case 5:if(1024&o.flags){for(;16>h;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}o.length=p,o.head&&(o.head.extra_len=p),512&o.flags&&(i[0]=255&p,i[1]=255&p>>>8,o.check=nh(o.check,i,2,0)),p=0,h=0}else o.head&&(o.head.extra=null);o.mode=6;case 6:if(1024&o.flags&&(b=o.length,b>u&&(b=u),b&&(o.head&&(E=o.head.extra_len-o.length,!o.head.extra&&(o.head.extra=Array(o.head.extra_len)),zp.arraySet(o.head.extra,s,d,b,E)),512&o.flags&&(o.check=nh(o.check,s,b,d)),u-=b,d+=b,o.length-=b),o.length))break inf_leave;o.length=0,o.mode=7;case 7:if(2048&o.flags){if(0===u)break inf_leave;b=0;do E=s[d+b++],o.head&&E&&65536>o.length&&(o.head.name+=uo(E));while(E&&b<u);if(512&o.flags&&(o.check=nh(o.check,s,b,d)),u-=b,d+=b,E)break inf_leave}else o.head&&(o.head.name=null);o.length=0,o.mode=8;case 8:if(4096&o.flags){if(0===u)break inf_leave;b=0;do E=s[d+b++],o.head&&E&&65536>o.length&&(o.head.comment+=uo(E));while(E&&b<u);if(512&o.flags&&(o.check=nh(o.check,s,b,d)),u-=b,d+=b,E)break inf_leave}else o.head&&(o.head.comment=null);o.mode=9;case 9:if(512&o.flags){for(;16>h;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}if(p!==(65535&o.check)){e.msg="header crc mismatch",o.mode=30;break}p=0,h=0}o.head&&(o.head.hcrc=1&o.flags>>9,o.head.done=!0),e.adler=o.check=0,o.mode=12;break;case 10:for(;32>h;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}e.adler=o.check=zr(p),p=0,h=0,o.mode=11;case 11:if(0===o.havedict)return e.next_out=f,e.avail_out=c,e.next_in=d,e.avail_in=u,o.hold=p,o.bits=h,2;e.adler=o.check=1,o.mode=12;case 12:if(5===t||6===t)break inf_leave;case 13:if(o.last){p>>>=7&h,h-=7&h,o.mode=27;break}for(;3>h;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}switch(o.last=1&p,p>>>=1,h-=1,3&p){case 0:o.mode=14;break;case 1:if(Or(o),o.mode=20,6===t){p>>>=2,h-=2;break inf_leave}break;case 2:o.mode=17;break;case 3:e.msg="invalid block type",o.mode=30;}p>>>=2,h-=2;break;case 14:for(p>>>=7&h,h-=7&h;32>h;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}if((65535&p)!=(65535^p>>>16)){e.msg="invalid stored block lengths",o.mode=30;break}if(o.length=65535&p,p=0,h=0,o.mode=15,6===t)break inf_leave;case 15:o.mode=16;case 16:if(b=o.length,b){if(b>u&&(b=u),b>c&&(b=c),0===b)break inf_leave;zp.arraySet(l,s,d,b,f),u-=b,d+=b,c-=b,f+=b,o.length-=b;break}o.mode=12;break;case 17:for(;14>h;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}if(o.nlen=(31&p)+257,p>>>=5,h-=5,o.ndist=(31&p)+1,p>>>=5,h-=5,o.ncode=(15&p)+4,p>>>=4,h-=4,286<o.nlen||30<o.ndist){e.msg="too many length or distance symbols",o.mode=30;break}o.have=0,o.mode=18;case 18:for(;o.have<o.ncode;){for(;3>h;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}o.lens[r[o.have++]]=7&p,p>>>=3,h-=3}for(;19>o.have;)o.lens[r[o.have++]]=0;if(o.lencode=o.lendyn,o.lenbits=7,B={bits:o.lenbits},A=zh(0,o.lens,0,19,o.lencode,0,o.work,B),o.lenbits=B.bits,A){e.msg="invalid code lengths set",o.mode=30;break}o.have=0,o.mode=19;case 19:for(;o.have<o.nlen+o.ndist;){for(;;){if(a=o.lencode[p&(1<<o.lenbits)-1],x=a>>>24,v=255&a>>>16,w=65535&a,x<=h)break;if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}if(16>w)p>>>=x,h-=x,o.lens[o.have++]=w;else{if(16===w){for(C=x+2;h<C;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}if(p>>>=x,h-=x,0===o.have){e.msg="invalid bit length repeat",o.mode=30;break}E=o.lens[o.have-1],b=3+(3&p),p>>>=2,h-=2}else if(17===w){for(C=x+3;h<C;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}p>>>=x,h-=x,E=0,b=3+(7&p),p>>>=3,h-=3}else{for(C=x+7;h<C;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}p>>>=x,h-=x,E=0,b=11+(127&p),p>>>=7,h-=7}if(o.have+b>o.nlen+o.ndist){e.msg="invalid bit length repeat",o.mode=30;break}for(;b--;)o.lens[o.have++]=E}}if(30===o.mode)break;if(0===o.lens[256]){e.msg="invalid code -- missing end-of-block",o.mode=30;break}if(o.lenbits=9,B={bits:o.lenbits},A=zh(1,o.lens,0,o.nlen,o.lencode,0,o.work,B),o.lenbits=B.bits,A){e.msg="invalid literal/lengths set",o.mode=30;break}if(o.distbits=6,o.distcode=o.distdyn,B={bits:o.distbits},A=zh(2,o.lens,o.nlen,o.ndist,o.distcode,0,o.work,B),o.distbits=B.bits,A){e.msg="invalid distances set",o.mode=30;break}if(o.mode=20,6===t)break inf_leave;case 20:o.mode=21;case 21:if(6<=u&&258<=c){e.next_out=f,e.avail_out=c,e.next_in=d,e.avail_in=u,o.hold=p,o.bits=h,vh(e,g),f=e.next_out,l=e.output,c=e.avail_out,d=e.next_in,s=e.input,u=e.avail_in,p=o.hold,h=o.bits,12===o.mode&&(o.back=-1);break}for(o.back=0;;){if(a=o.lencode[p&(1<<o.lenbits)-1],x=a>>>24,v=255&a>>>16,w=65535&a,x<=h)break;if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}if(v&&0==(240&v)){for(S=x,k=v,T=w;;){if(a=o.lencode[T+((p&(1<<S+k)-1)>>S)],x=a>>>24,v=255&a>>>16,w=65535&a,S+x<=h)break;if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}p>>>=S,h-=S,o.back+=S}if(p>>>=x,h-=x,o.back+=x,o.length=w,0===v){o.mode=26;break}if(32&v){o.back=-1,o.mode=12;break}if(64&v){e.msg="invalid literal/length code",o.mode=30;break}o.extra=15&v,o.mode=22;case 22:if(o.extra){for(C=o.extra;h<C;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}o.length+=p&(1<<o.extra)-1,p>>>=o.extra,h-=o.extra,o.back+=o.extra}o.was=o.length,o.mode=23;case 23:for(;;){if(a=o.distcode[p&(1<<o.distbits)-1],x=a>>>24,v=255&a>>>16,w=65535&a,x<=h)break;if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}if(0==(240&v)){for(S=x,k=v,T=w;;){if(a=o.distcode[T+((p&(1<<S+k)-1)>>S)],x=a>>>24,v=255&a>>>16,w=65535&a,S+x<=h)break;if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}p>>>=S,h-=S,o.back+=S}if(p>>>=x,h-=x,o.back+=x,64&v){e.msg="invalid distance code",o.mode=30;break}o.offset=w,o.extra=15&v,o.mode=24;case 24:if(o.extra){for(C=o.extra;h<C;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}o.offset+=p&(1<<o.extra)-1,p>>>=o.extra,h-=o.extra,o.back+=o.extra}if(o.offset>o.dmax){e.msg="invalid distance too far back",o.mode=30;break}o.mode=25;case 25:if(0===c)break inf_leave;if(b=g-c,o.offset>b){if(b=o.offset-b,b>o.whave&&o.sane){e.msg="invalid distance too far back",o.mode=30;break}b>o.wnext?(b-=o.wnext,_=o.wsize-b):_=o.wnext-b,b>o.length&&(b=o.length),y=o.window}else y=l,_=f-o.offset,b=o.length;b>c&&(b=c),c-=b,o.length-=b;do l[f++]=y[_++];while(--b);0===o.length&&(o.mode=21);break;case 26:if(0===c)break inf_leave;l[f++]=o.length,c--,o.mode=21;break;case 27:if(o.wrap){for(;32>h;){if(0===u)break inf_leave;u--,p|=s[d++]<<h,h+=8}if(g-=c,e.total_out+=g,o.total+=g,g&&(e.adler=o.check=o.flags?nh(o.check,l,g,f-g):eh(o.check,l,g,f-g)),g=c,(o.flags?p:zr(p))!==o.check){e.msg="incorrect data check",o.mode=30;break}p=0,h=0}o.mode=28;case 28:if(o.wrap&&o.flags){for(;32>h;){if(0===u)break inf_leave;u--,p+=s[d++]<<h,h+=8}if(p!==(4294967295&o.total)){e.msg="incorrect length check",o.mode=30;break}p=0,h=0}o.mode=29;case 29:A=1;break inf_leave;case 30:A=-3;break inf_leave;case 31:return-4;case 32:default:return-2;}if(e.next_out=f,e.avail_out=c,e.next_in=d,e.avail_in=u,o.hold=p,o.bits=h,(o.wsize||g!==e.avail_out&&30>o.mode&&(27>o.mode||4!==t))&&Pr(e,e.output,e.next_out,g-e.avail_out));return m-=e.avail_in,g-=e.avail_out,e.total_in+=m,e.total_out+=g,o.total+=g,o.wrap&&g&&(e.adler=o.check=o.flags?nh(o.check,l,g,e.next_out-g):eh(o.check,l,g,e.next_out-g)),e.data_type=o.bits+(o.last?64:0)+(12===o.mode?128:0)+(20===o.mode||15===o.mode?256:0),(0===m&&0===g||4===t)&&0===A&&(A=-5),A},inflateEnd:function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},inflateGetHeader:function(e,t){var n;return e&&e.state?(n=e.state,0==(2&n.wrap))?-2:(n.head=t,t.done=!1,0):-2},inflateSetDictionary:function(e,t){var n=t.length,a,i,r;return e&&e.state?(a=e.state,0!==a.wrap&&11!==a.mode)?-2:11===a.mode&&(i=1,i=eh(i,t,n,0),i!==a.check)?-3:(r=Pr(e,t,n,n),r)?(a.mode=31,-4):(a.havedict=1,0):-2},inflateInfo:"pako inflate (from Nodeca project)"},Rh={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Nh=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Fh=Object.prototype.toString,Oh,Ph;Mr.prototype.push=function(e,t){var n=this.strm,a=this.options.chunkSize,i=this.options.dictionary,r=!1,o,s,l,d,f,u;if(this.ended)return!1;s=t===~~t?t:!0===t?Rh.Z_FINISH:Rh.Z_NO_FLUSH,n.input="string"==typeof e?ph.binstring2buf(e):"[object ArrayBuffer]"===Fh.call(e)?new Uint8Array(e):e,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new zp.Buf8(a),n.next_out=0,n.avail_out=a),o=Dh.inflate(n,Rh.Z_NO_FLUSH),o===Rh.Z_NEED_DICT&&i&&(u="string"==typeof i?ph.string2buf(i):"[object ArrayBuffer]"===Fh.call(i)?new Uint8Array(i):i,o=Dh.inflateSetDictionary(this.strm,u)),o===Rh.Z_BUF_ERROR&&!0===r&&(o=Rh.Z_OK,r=!1),o!==Rh.Z_STREAM_END&&o!==Rh.Z_OK)return this.onEnd(o),this.ended=!0,!1;n.next_out&&(0===n.avail_out||o===Rh.Z_STREAM_END||0===n.avail_in&&(s===Rh.Z_FINISH||s===Rh.Z_SYNC_FLUSH))&&("string"===this.options.to?(l=ph.utf8border(n.output,n.next_out),d=n.next_out-l,f=ph.buf2string(n.output,l),n.next_out=d,n.avail_out=a-d,d&&zp.arraySet(n.output,n.output,l,d,0),this.onData(f)):this.onData(zp.shrinkBuf(n.output,n.next_out))),0===n.avail_in&&0===n.avail_out&&(r=!0)}while((0<n.avail_in||0===n.avail_out)&&o!==Rh.Z_STREAM_END);return o===Rh.Z_STREAM_END&&(s=Rh.Z_FINISH),s===Rh.Z_FINISH?(o=Dh.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===Rh.Z_OK):s!==Rh.Z_SYNC_FLUSH||(this.onEnd(Rh.Z_OK),n.avail_out=0,!0)},Mr.prototype.onData=function(e){this.chunks.push(e)},Mr.prototype.onEnd=function(e){e===Rh.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=zp.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Mh=zp.assign,Vh={};Mh(Vh,{Deflate:Ir,deflate:Lr,deflateRaw:function(e,t){return t=t||{},t.raw=!0,Lr(e,t)},gzip:function(e,t){return t=t||{},t.gzip=!0,Lr(e,t)}},{Inflate:Mr,inflate:Vr,inflateRaw:function(e,t){return t=t||{},t.raw=!0,Vr(e,t)},ungzip:Vr},Rh);var Wh=Vh,Gh=Ri(function(e){(function(){var t={},n;e.exports=t,n="function"==typeof Di?Wh:window.pako,function(n,a){var r=Math.round;n.toRGBA8=function(e){var t=e.width,a=e.height;if(null==e.tabs.acTL)return[n.toRGBA8.decodeImage(e.data,t,a,e).buffer];var r=[];null==e.frames[0].data&&(e.frames[0].data=e.data);for(var o=new Uint8Array(4*(t*a)),s=0,l;s<e.frames.length;s++){var d=e.frames[s],f=d.rect.x,u=d.rect.y,c=d.rect.width,p=d.rect.height,h=n.toRGBA8.decodeImage(d.data,c,p,e);if(0==s?l=h:0==d.blend?n._copyTile(h,c,p,l,t,a,f,u,0):1==d.blend&&n._copyTile(h,c,p,l,t,a,f,u,1),r.push(l.buffer),l=l.slice(0),0==d.dispose);else if(1==d.dispose)n._copyTile(o,c,p,l,t,a,f,u,0);else if(2==d.dispose){for(var m=s-1;2==e.frames[m].dispose;)m--;l=new Uint8Array(r[m]).slice(0)}}return r},n.toRGBA8.decodeImage=function(e,t,a,r){var o=t*a,s=n.decode._getBPP(r),l=so(t*s/8),d=new Uint8Array(4*o),f=new Uint32Array(d.buffer),u=r.ctype,c=r.depth,h=n._bin.readUshort;if(6==u){var m=o<<2;if(8==c)for(var g=0;g<m;g++)d[g]=e[g];if(16==c)for(var g=0;g<m;g++)d[g]=e[g<<1]}else if(2==u){var b=r.tabs.tRNS,_=-1,x=-1,v=-1;if(b&&(_=b[0],x=b[1],v=b[2]),8==c)for(var g=0;g<o;g++){var w=g<<2,S=3*g;d[w]=e[S],d[w+1]=e[S+1],d[w+2]=e[S+2],d[w+3]=255,-1!=_&&e[S]==_&&e[S+1]==x&&e[S+2]==v&&(d[w+3]=0)}if(16==c)for(var g=0;g<o;g++){var w=g<<2,S=6*g;d[w]=e[S],d[w+1]=e[S+2],d[w+2]=e[S+4],d[w+3]=255,-1!=_&&h(e,S)==_&&h(e,S+2)==x&&h(e,S+4)==v&&(d[w+3]=0)}}else if(3==u){var k=r.tabs.PLTE,p=r.tabs.tRNS,T=p?p.length:0;if(1==c)for(var E=0;E<a;E++)for(var A=E*l,B=E*t,g=0;g<t;g++){var w=B+g<<2,C=1&e[A+(g>>3)]>>7-((7&g)<<0),I=3*C;d[w]=k[I],d[w+1]=k[I+1],d[w+2]=k[I+2],d[w+3]=C<T?p[C]:255}if(2==c)for(var E=0;E<a;E++)for(var A=E*l,B=E*t,g=0;g<t;g++){var w=B+g<<2,C=3&e[A+(g>>2)]>>6-((3&g)<<1),I=3*C;d[w]=k[I],d[w+1]=k[I+1],d[w+2]=k[I+2],d[w+3]=C<T?p[C]:255}if(4==c)for(var E=0;E<a;E++)for(var A=E*l,B=E*t,g=0;g<t;g++){var w=B+g<<2,C=15&e[A+(g>>1)]>>4-((1&g)<<2),I=3*C;d[w]=k[I],d[w+1]=k[I+1],d[w+2]=k[I+2],d[w+3]=C<T?p[C]:255}if(8==c)for(var g=0;g<o;g++){var w=g<<2,C=e[g],I=3*C;d[w]=k[I],d[w+1]=k[I+1],d[w+2]=k[I+2],d[w+3]=C<T?p[C]:255}}else if(4==u){if(8==c)for(var g=0;g<o;g++){var w=g<<2,z=g<<1,D=e[z];d[w]=D,d[w+1]=D,d[w+2]=D,d[w+3]=e[z+1]}if(16==c)for(var g=0;g<o;g++){var w=g<<2,z=g<<2,D=e[z];d[w]=D,d[w+1]=D,d[w+2]=D,d[w+3]=e[z+2]}}else if(0==u){var _=r.tabs.tRNS?r.tabs.tRNS:-1;if(1==c)for(var g=0;g<o;g++){var D=255*(1&e[g>>3]>>7-(7&g)),R=D==255*_?0:255;f[g]=R<<24|D<<16|D<<8|D}if(2==c)for(var g=0;g<o;g++){var D=85*(3&e[g>>2]>>6-((3&g)<<1)),R=D==85*_?0:255;f[g]=R<<24|D<<16|D<<8|D}if(4==c)for(var g=0;g<o;g++){var D=17*(15&e[g>>1]>>4-((1&g)<<2)),R=D==17*_?0:255;f[g]=R<<24|D<<16|D<<8|D}if(8==c)for(var g=0;g<o;g++){var D=e[g],R=D==_?0:255;f[g]=R<<24|D<<16|D<<8|D}if(16==c)for(var g=0;g<o;g++){var D=e[g<<1],R=h(e,g<<1)==_?0:255;f[g]=R<<24|D<<16|D<<8|D}}return d},n.decode=function(e){for(var t=new Uint8Array(e),a=8,o=n._bin,s=o.readUshort,l=o.readUint,d={tabs:{},frames:[]},f=new Uint8Array(t.length),u=0,c=0,p=[137,80,78,71,13,10,26,10],h=0,m;8>h;h++)if(t[h]!=p[h])throw"The input is not a PNG file!";for(;a<t.length;){var g=o.readUint(t,a);a+=4;var b=o.readASCII(t,a,4);if(a+=4,"IHDR"==b)n.decode._IHDR(t,a,d);else if("IDAT"==b){for(var h=0;h<g;h++)f[u+h]=t[a+h];u+=g}else if("acTL"==b)d.tabs[b]={num_frames:l(t,a),num_plays:l(t,a+4)},m=new Uint8Array(t.length);else if("fcTL"==b){if(0!=c){var _=d.frames[d.frames.length-1];_.data=n.decode._decompress(d,m.slice(0,c),_.rect.width,_.rect.height),c=0}var y={x:l(t,a+12),y:l(t,a+16),width:l(t,a+4),height:l(t,a+8)},x=s(t,a+22);x=s(t,a+20)/(0==x?100:x);var v={rect:y,delay:r(1e3*x),dispose:t[a+24],blend:t[a+25]};d.frames.push(v)}else if("fdAT"==b){for(var h=0;h<g-4;h++)m[c+h]=t[a+h+4];c+=g-4}else if("pHYs"==b)d.tabs[b]=[o.readUint(t,a),o.readUint(t,a+4),t[a+8]];else if("cHRM"==b){d.tabs[b]=[];for(var h=0;8>h;h++)d.tabs[b].push(o.readUint(t,a+4*h))}else if("tEXt"==b){null==d.tabs[b]&&(d.tabs[b]={});var w=o.nextZero(t,a),S=o.readASCII(t,a,w-a),k=o.readASCII(t,w+1,a+g-w-1);d.tabs[b][S]=k}else if("iTXt"==b){null==d.tabs[b]&&(d.tabs[b]={});var w=0,T=a;w=o.nextZero(t,T);var S=o.readASCII(t,T,w-T);T=w+1,T+=2,w=o.nextZero(t,T);o.readASCII(t,T,w-T);T=w+1,w=o.nextZero(t,T);o.readUTF8(t,T,w-T);T=w+1;var k=o.readUTF8(t,T,g-(T-a));d.tabs[b][S]=k}else if("PLTE"==b)d.tabs[b]=o.readBytes(t,a,g);else if("hIST"==b){var E=d.tabs.PLTE.length/3;d.tabs[b]=[];for(var h=0;h<E;h++)d.tabs[b].push(s(t,a+2*h))}else if("tRNS"==b)3==d.ctype?d.tabs[b]=o.readBytes(t,a,g):0==d.ctype?d.tabs[b]=s(t,a):2==d.ctype&&(d.tabs[b]=[s(t,a),s(t,a+2),s(t,a+4)]);else if("gAMA"==b)d.tabs[b]=o.readUint(t,a)/1e5;else if("sRGB"==b)d.tabs[b]=t[a];else if("bKGD"==b)0==d.ctype||4==d.ctype?d.tabs[b]=[s(t,a)]:2==d.ctype||6==d.ctype?d.tabs[b]=[s(t,a),s(t,a+2),s(t,a+4)]:3==d.ctype&&(d.tabs[b]=t[a]);else if("IEND"==b){if(0!=c){var _=d.frames[d.frames.length-1];_.data=n.decode._decompress(d,m.slice(0,c),_.rect.width,_.rect.height),c=0}d.data=n.decode._decompress(d,f,d.width,d.height);break}a+=g;o.readUint(t,a);a+=4}return delete d.compress,delete d.interlace,delete d.filter,d},n.decode._decompress=function(e,t,a,i){return 0==e.compress&&(t=n.decode._inflate(t)),0==e.interlace?t=n.decode._filterZero(t,e,0,a,i):1==e.interlace&&(t=n.decode._readInterlace(t,e)),t},n.decode._inflate=function(e){return a.inflate(e)},n.decode._readInterlace=function(e,t){for(var a=t.width,i=t.height,r=n.decode._getBPP(t),o=r>>3,s=so(a*r/8),l=new Uint8Array(i*s),d=0,f=[0,0,4,0,2,0,1],u=[0,4,0,2,0,1,0],c=[8,8,8,4,4,2,2],p=[8,8,4,4,2,2,1],h=0;7>h;){for(var m=c[h],g=p[h],b=0,_=0,x=f[h];x<i;)x+=m,_++;for(var v=u[h];v<a;)v+=g,b++;var w=so(b*r/8);n.decode._filterZero(e,t,d,b,_);for(var S=0,k=f[h];k<i;){for(var T=u[h],E=d+S*w<<3;T<a;){if(1==r){var A=e[E>>3];A=1&A>>7-(7&E),l[k*s+(T>>3)]|=A<<7-((3&T)<<0)}if(2==r){var A=e[E>>3];A=3&A>>6-(7&E),l[k*s+(T>>2)]|=A<<6-((3&T)<<1)}if(4==r){var A=e[E>>3];A=15&A>>4-(7&E),l[k*s+(T>>1)]|=A<<4-((1&T)<<2)}if(8<=r)for(var B=k*s+T*o,C=0;C<o;C++)l[B+C]=e[(E>>3)+C];E+=r,T+=g}S++,k+=m}0!=b*_&&(d+=_*(1+w)),++h}return l},n.decode._getBPP=function(e){var t=[1,null,3,1,2,null,4][e.ctype];return t*e.depth},n.decode._filterZero=function(e,t,a,r,o){var s=n.decode._getBPP(t),l=so(r*s/8),d=n.decode._paeth;s=so(s/8);for(var f=0;f<o;f++){var u=a+f*l,i=u+f+1,c=e[i-1];if(0==c)for(var p=0;p<l;p++)e[u+p]=e[i+p];else if(1==c){for(var p=0;p<s;p++)e[u+p]=e[i+p];for(var p=s;p<l;p++)e[u+p]=255&e[i+p]+e[u+p-s]}else if(0==f){for(var p=0;p<s;p++)e[u+p]=e[i+p];if(2==c)for(var p=s;p<l;p++)e[u+p]=255&e[i+p];if(3==c)for(var p=s;p<l;p++)e[u+p]=255&e[i+p]+(e[u+p-s]>>1);if(4==c)for(var p=s;p<l;p++)e[u+p]=255&e[i+p]+d(e[u+p-s],0,0)}else{if(2==c)for(var p=0;p<l;p++)e[u+p]=255&e[i+p]+e[u+p-l];if(3==c){for(var p=0;p<s;p++)e[u+p]=255&e[i+p]+(e[u+p-l]>>1);for(var p=s;p<l;p++)e[u+p]=255&e[i+p]+(e[u+p-l]+e[u+p-s]>>1)}if(4==c){for(var p=0;p<s;p++)e[u+p]=255&e[i+p]+d(0,e[u+p-l],0);for(var p=s;p<l;p++)e[u+p]=255&e[i+p]+d(e[u+p-s],e[u+p-l],e[u+p-s-l])}}}return e},n.decode._paeth=function(e,t,n){var a=e+t-n,i=ro(a-e),r=ro(a-t),o=ro(a-n);if(i<=r&&i<=o)return e;return r<=o?t:n},n.decode._IHDR=function(e,t,a){var i=n._bin;a.width=i.readUint(e,t),t+=4,a.height=i.readUint(e,t),t+=4,a.depth=e[t],t++,a.ctype=e[t],t++,a.compress=e[t],t++,a.filter=e[t],t++,a.interlace=e[t],t++},n._bin={nextZero:function(e,t){for(;0!=e[t];)t++;return t},readUshort:function(e,t){return e[t]<<8|e[t+1]},writeUshort:function(e,t,a){e[t]=255&a>>8,e[t+1]=255&a},readUint:function(e,t){return e[t]*16777216+(e[t+1]<<16|e[t+2]<<8|e[t+3])},writeUint:function(e,t,a){e[t]=255&a>>24,e[t+1]=255&a>>16,e[t+2]=255&a>>8,e[t+3]=255&a},readASCII:function(e,t,n){for(var a="",r=0;r<n;r++)a+=uo(e[t+r]);return a},writeASCII:function(e,t,n){for(var a=0;a<n.length;a++)e[t+a]=n.charCodeAt(a)},readBytes:function(e,t,n){for(var a=[],r=0;r<n;r++)a.push(e[t+r]);return a},pad:function(e){return 2>e.length?"0"+e:e},readUTF8:function(t,a,r){for(var e="",o=0,l;o<r;o++)e+="%"+n._bin.pad(t[a+o].toString(16));try{l=decodeURIComponent(e)}catch(i){return n._bin.readASCII(t,a,r)}return l}},n._copyTile=function(e,t,n,a,i,r,o,s,l){for(var d=lo(t,i),f=lo(n,r),u=0,c=0,p=0;p<f;p++)for(var h=0;h<d;h++)if(0<=o&&0<=s?(u=p*t+h<<2,c=(s+p)*i+o+h<<2):(u=(-s+p)*t-o+h<<2,c=p*i+h<<2),0==l)a[c]=e[u],a[c+1]=e[u+1],a[c+2]=e[u+2],a[c+3]=e[u+3];else if(1==l){var m=e[u+3]*(1/255),g=e[u]*m,b=e[u+1]*m,_=e[u+2]*m,v=a[c+3]*(1/255),w=a[c]*v,S=a[c+1]*v,k=a[c+2]*v,T=1-m,E=m+v*T,A=0==E?0:1/E;a[c+3]=255*E,a[c+0]=(g+w*T)*A,a[c+1]=(b+S*T)*A,a[c+2]=(_+k*T)*A}else if(2==l){var m=e[u+3],g=e[u],b=e[u+1],_=e[u+2],v=a[c+3],w=a[c],S=a[c+1],k=a[c+2];m==v&&g==w&&b==S&&_==k?(a[c]=0,a[c+1]=0,a[c+2]=0,a[c+3]=0):(a[c]=g,a[c+1]=b,a[c+2]=_,a[c+3]=m)}else if(3==l){var m=e[u+3],g=e[u],b=e[u+1],_=e[u+2],v=a[c+3],w=a[c],S=a[c+1],k=a[c+2];if(m==v&&g==w&&b==S&&_==k)continue;if(220>m&&20<v)return!1}return!0},n.encode=function(e,t,a,r,o,s){null==r&&(r=0),null==s&&(s=!1);for(var l=new Uint8Array(e[0].byteLength*e.length+100),d=[137,80,78,71,13,10,26,10],f=0;8>f;f++)l[f]=d[f];var u=8,p=n._bin,h=n.crc.crc,m=p.writeUint,g=p.writeUshort,b=p.writeASCII,_=n.encode.compressPNG(e,t,a,r,s);m(l,u,13),u+=4,b(l,u,"IHDR"),u+=4,m(l,u,t),u+=4,m(l,u,a),u+=4,l[u]=_.depth,u++,l[u]=_.ctype,u++,l[u]=0,u++,l[u]=0,u++,l[u]=0,u++,m(l,u,h(l,u-17,17)),u+=4,m(l,u,1),u+=4,b(l,u,"sRGB"),u+=4,l[u]=1,u++,m(l,u,h(l,u-5,5)),u+=4;var y=1<e.length;if(y&&(m(l,u,8),u+=4,b(l,u,"acTL"),u+=4,m(l,u,e.length),u+=4,m(l,u,0),u+=4,m(l,u,h(l,u-12,12)),u+=4),3==_.ctype){var x=_.plte.length;m(l,u,3*x),u+=4,b(l,u,"PLTE"),u+=4;for(var f=0;f<x;f++){var v=3*f,w=_.plte[f];l[u+v+0]=255&w,l[u+v+1]=255&w>>8,l[u+v+2]=255&w>>16}if(u+=3*x,m(l,u,h(l,u-3*x-4,3*x+4)),u+=4,_.gotAlpha){m(l,u,x),u+=4,b(l,u,"tRNS"),u+=4;for(var f=0;f<x;f++)l[u+f]=255&_.plte[f]>>24;u+=x,m(l,u,h(l,u-x-4,x+4)),u+=4}}for(var c=0,S=0,k;S<_.frames.length;S++){k=_.frames[S],y&&(m(l,u,26),u+=4,b(l,u,"fcTL"),u+=4,m(l,u,c++),u+=4,m(l,u,k.rect.width),u+=4,m(l,u,k.rect.height),u+=4,m(l,u,k.rect.x),u+=4,m(l,u,k.rect.y),u+=4,g(l,u,o[S]),u+=2,g(l,u,1e3),u+=2,l[u]=k.dispose,u++,l[u]=k.blend,u++,m(l,u,h(l,u-30,30)),u+=4);var T=k.cimg,x=T.length;m(l,u,x+(0==S?0:4)),u+=4;var E=u;b(l,u,0==S?"IDAT":"fdAT"),u+=4,0!=S&&(m(l,u,c++),u+=4);for(var f=0;f<x;f++)l[u+f]=T[f];u+=x,m(l,u,h(l,E,u-E)),u+=4}return m(l,u,0),u+=4,b(l,u,"IEND"),u+=4,m(l,u,h(l,u-4,4)),u+=4,l.buffer.slice(0,u)},n.encode.compressPNG=function(e,t,a,r,o){for(var s=n.encode.compress(e,t,a,r,!1,o),l=0;l<e.length;l++){var d=s.frames[l],f=d.rect.width,u=d.rect.height,c=d.bpl,p=d.bpp,h=new Uint8Array(u*c+u);d.cimg=n.encode._filterZero(d.img,u,p,c,h)}return s},n.encode.compress=function(e,t,a,r,o,s){null==s&&(s=!1);for(var l=6,d=8,f=4,u=255,p=0;p<e.length;p++)for(var h=new Uint8Array(e[p]),m=h.length,g=0;g<m;g+=4)u&=h[g+3];var b=255!=u,_={},v=[];if(0!=e.length&&(_[0]=0,v.push(0),0!=r&&r--),0!=r){var w=n.quantize(e,r,o);e=w.bufs;for(var g=0,S;g<w.plte.length;g++)S=w.plte[g].est.rgba,null==_[S]&&(_[S]=v.length,v.push(S))}else for(var p=0;p<e.length;p++)for(var k=new Uint32Array(e[p]),m=k.length,g=0,S;g<m&&(S=k[g],!((g<t||S!=k[g-1]&&S!=k[g-t])&&null==_[S]&&(_[S]=v.length,v.push(S),300<=v.length)));g++);var T=!!b&&o,E=v.length;256>=E&&!1==s&&(d=2>=E?1:4>=E?2:16>=E?4:8,o&&(d=8),b=!0);for(var A=[],p=0;p<e.length;p++){var B=new Uint8Array(e[p]),C=new Uint32Array(B.buffer),I=0,z=0,D=t,R=a,N=0;if(0!=p&&!T){for(var F=o||1==p||2==A[A.length-2].dispose?1:2,O=0,P=1e9,M=0;M<F;M++){for(var V=new Uint8Array(e[p-1-M]),W=new Uint32Array(e[p-1-M]),G=t,H=a,U=-1,q=-1,Z=0;Z<a;Z++)for(var X=0,g;X<t;X++)g=Z*t+X,C[g]!=W[g]&&(X<G&&(G=X),X>U&&(U=X),Z<H&&(H=Z),Z>q&&(q=Z));var K=-1==U?1:(U-G+1)*(q-H+1);K<P&&(P=K,O=M,-1==U?(I=z=0,D=R=1):(I=G,z=H,D=U-G+1,R=q-H+1))}var V=new Uint8Array(e[p-1-O]);1==O&&(A[A.length-1].dispose=2);var Y=new Uint8Array(4*(D*R)),Q=new Uint32Array(Y.buffer);n._copyTile(V,t,a,Y,D,R,-I,-z,0),n._copyTile(B,t,a,Y,D,R,-I,-z,3)?(n._copyTile(B,t,a,Y,D,R,-I,-z,2),N=1):(n._copyTile(B,t,a,Y,D,R,-I,-z,0),N=0),B=Y,C=new Uint32Array(B.buffer)}var $=4*D;if(256>=E&&!1==s){$=so(d*D/8);for(var Y=new Uint8Array($*R),Z=0;Z<R;Z++){var g=Z*$,J=Z*D;if(8==d)for(var X=0;X<D;X++)Y[g+X]=_[C[J+X]];else if(4==d)for(var X=0;X<D;X++)Y[g+(X>>1)]|=_[C[J+X]]<<4-4*(1&X);else if(2==d)for(var X=0;X<D;X++)Y[g+(X>>2)]|=_[C[J+X]]<<6-2*(3&X);else if(1==d)for(var X=0;X<D;X++)Y[g+(X>>3)]|=_[C[J+X]]<<7-1*(7&X)}B=Y,l=3,f=1}else if(!1==b&&1==e.length){for(var Y=new Uint8Array(3*(D*R)),ee=D*R,g=0;g<ee;g++){var te=3*g,ne=4*g;Y[te]=B[ne],Y[te+1]=B[ne+1],Y[te+2]=B[ne+2]}B=Y,l=2,f=3,$=3*D}A.push({rect:{x:I,y:z,width:D,height:R},img:B,bpl:$,bpp:f,blend:N,dispose:T?1:0})}return{ctype:l,depth:d,plte:v,gotAlpha:b,frames:A}},n.encode._filterZero=function(e,r,o,s,l){for(var d=[],f=0;5>f;f++)if(!(5e5<r*s&&(2==f||3==f||4==f))){for(var u=0;u<r;u++)n.encode._filterLine(l,e,u,s,o,f);if(d.push(a.deflate(l)),1==o)break}for(var c=1e9,p=0,h;p<d.length;p++)d[p].length<c&&(h=p,c=d[p].length);return d[h]},n.encode._filterLine=function(e,t,a,r,o,s){var l=a*r,i=l+a,d=n.decode._paeth;if(e[i]=s,i++,0==s)for(var f=0;f<r;f++)e[i+f]=t[l+f];else if(1==s){for(var f=0;f<o;f++)e[i+f]=t[l+f];for(var f=o;f<r;f++)e[i+f]=255&t[l+f]-t[l+f-o]+256}else if(0==a){for(var f=0;f<o;f++)e[i+f]=t[l+f];if(2==s)for(var f=o;f<r;f++)e[i+f]=t[l+f];if(3==s)for(var f=o;f<r;f++)e[i+f]=255&t[l+f]-(t[l+f-o]>>1)+256;if(4==s)for(var f=o;f<r;f++)e[i+f]=255&t[l+f]-d(t[l+f-o],0,0)+256}else{if(2==s)for(var f=0;f<r;f++)e[i+f]=255&t[l+f]+256-t[l+f-r];if(3==s){for(var f=0;f<o;f++)e[i+f]=255&t[l+f]+256-(t[l+f-r]>>1);for(var f=o;f<r;f++)e[i+f]=255&t[l+f]+256-(t[l+f-r]+t[l+f-o]>>1)}if(4==s){for(var f=0;f<o;f++)e[i+f]=255&t[l+f]+256-d(0,t[l+f-r],0);for(var f=o;f<r;f++)e[i+f]=255&t[l+f]+256-d(t[l+f-o],t[l+f-r],t[l+f-o-r])}}},n.crc={table:function(){for(var e=new Uint32Array(256),t=0,a;256>t;t++){a=t;for(var i=0;8>i;i++)1&a?a=3988292384^a>>>1:a>>>=1;e[t]=a}return e}(),update:function(e,t,a,r){for(var o=0;o<r;o++)e=n.crc.table[255&(e^t[a+o])]^e>>>8;return e},crc:function(e,t,a){return 4294967295^n.crc.update(4294967295,e,t,a)}},n.quantize=function(e,t,o){for(var s=[],l=0,d=0;d<e.length;d++)s.push(n.encode.alphaMul(new Uint8Array(e[d]),o)),l+=e[d].byteLength;for(var f=new Uint8Array(l),u=new Uint32Array(f.buffer),c=0,d=0;d<s.length;d++){for(var p=s[d],h=p.length,m=0;m<h;m++)f[c+m]=p[m];c+=h}var _={i0:0,i1:f.length,bst:null,est:null,tdst:0,left:null,right:null};_.bst=n.quantize.stats(f,_.i0,_.i1),_.est=n.quantize.estats(_.bst);for(var y=[_];y.length<t;){for(var x=0,v=0,d=0;d<y.length;d++)y[d].est.L>x&&(x=y[d].est.L,v=d);if(1e-3>x)break;var w=y[v],S=n.quantize.splitPixels(f,u,w.i0,w.i1,w.est.e,w.est.eMq255),k={i0:w.i0,i1:S,bst:null,est:null,tdst:0,left:null,right:null};k.bst=n.quantize.stats(f,k.i0,k.i1),k.est=n.quantize.estats(k.bst);for(var T={i0:S,i1:w.i1,bst:null,est:null,tdst:0,left:null,right:null,bst:{R:[],m:[],N:w.bst.N-k.bst.N}},d=0;16>d;d++)T.bst.R[d]=w.bst.R[d]-k.bst.R[d];for(var d=0;4>d;d++)T.bst.m[d]=w.bst.m[d]-k.bst.m[d];T.est=n.quantize.estats(T.bst),w.left=k,w.right=T,y[v]=k,y.push(T)}y.sort(function(e,t){return t.bst.N-e.bst.N});for(var E=0;E<s.length;E++){for(var A=n.quantize.planeDst,B=new Uint8Array(s[E].buffer),C=new Uint32Array(s[E].buffer),I=B.length,d=0;d<I;d+=4){for(var z=B[d]*(1/255),r=B[d+1]*(1/255),g=B[d+2]*(1/255),b=B[d+3]*(1/255),a=_;a.left;)a=0>=A(a.est,z,r,g,b)?a.left:a.right;C[d>>2]=a.est.rgba}s[E]=C.buffer}return{bufs:s,plte:y}},n.quantize.getNearest=function(e,t,i,r,o){if(null==e.left)return e.tdst=n.quantize.dist(e.est.q,t,i,r,o),e;var a=n.quantize.planeDst(e.est,t,i,r,o),s=e.left,l=e.right;0<a&&(s=e.right,l=e.left);var d=n.quantize.getNearest(s,t,i,r,o);if(d.tdst<=a*a)return d;var f=n.quantize.getNearest(l,t,i,r,o);return f.tdst<d.tdst?f:d},n.quantize.planeDst=function(t,n,i,r,o){var a=t.e;return a[0]*n+a[1]*i+a[2]*r+a[3]*o-t.eMq},n.quantize.dist=function(e,t,n,i,r){var a=t-e[0],o=n-e[1],s=i-e[2],l=r-e[3];return a*a+o*o+s*s+l*l},n.quantize.splitPixels=function(a,i,r,o,s,e){var l=n.quantize.vecDot;for(o-=4;r<o;){for(;l(a,r,s)<=e;)r+=4;for(;l(a,o,s)>e;)o-=4;if(r>=o)break;var d=i[r>>2];i[r>>2]=i[o>>2],i[o>>2]=d,r+=4,o-=4}for(;l(a,r,s)>e;)r-=4;return r+4},n.quantize.vecDot=function(t,n,a){return t[n]*a[0]+t[n+1]*a[1]+t[n+2]*a[2]+t[n+3]*a[3]},n.quantize.stats=function(e,t,n){for(var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=[0,0,0,0],l=n-t>>2,d=t;d<n;d+=4){var f=e[d]*(1/255),r=e[d+1]*(1/255),u=e[d+2]*(1/255),c=e[d+3]*(1/255);s[0]+=f,s[1]+=r,s[2]+=u,s[3]+=c,o[0]+=f*f,o[1]+=f*r,o[2]+=f*u,o[3]+=f*c,o[5]+=r*r,o[6]+=r*u,o[7]+=r*c,o[10]+=u*u,o[11]+=u*c,o[15]+=c*c}return o[4]=o[1],o[8]=o[2],o[12]=o[3],o[9]=o[6],o[13]=o[7],o[14]=o[11],{R:o,m:s,N:l}},n.quantize.estats=function(e){var t=e.R,a=e.m,o=e.N,s=a[0],l=a[1],d=a[2],f=a[3],u=0==o?0:1/o,c=[t[0]-s*s*u,t[1]-s*l*u,t[2]-s*d*u,t[3]-s*f*u,t[4]-l*s*u,t[5]-l*l*u,t[6]-l*d*u,t[7]-l*f*u,t[8]-d*s*u,t[9]-d*l*u,t[10]-d*d*u,t[11]-d*f*u,t[12]-f*s*u,t[13]-f*l*u,t[14]-f*d*u,t[15]-f*f*u],p=n.M4,h=[.5,.5,.5,.5],m=0,g=0;if(0!=o)for(var _=0;10>_&&(h=p.multVec(c,h),g=io(p.dot(h,h)),h=p.sml(1/g,h),!(1e-9>ro(g-m)));_++)m=g;var y=[s*u,l*u,d*u,f*u],x=p.dot(p.sml(255,y),h),v=.001>y[3]?0:1/y[3];return{Cov:c,q:y,e:h,L:m,eMq255:x,eMq:p.dot(h,y),rgba:(r(255*y[3])<<24|r(255*y[2]*v)<<16|r(255*y[1]*v)<<8|r(255*y[0]*v)<<0)>>>0}},n.M4={multVec:function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],e[4]*t[0]+e[5]*t[1]+e[6]*t[2]+e[7]*t[3],e[8]*t[0]+e[9]*t[1]+e[10]*t[2]+e[11]*t[3],e[12]*t[0]+e[13]*t[1]+e[14]*t[2]+e[15]*t[3]]},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},sml:function(e,t){return[e*t[0],e*t[1],e*t[2],e*t[3]]}},n.encode.alphaMul=function(e,t){for(var n=new Uint8Array(e.length),r=e.length>>2,o=0;o<r;o++){var s=o<<2,l=e[s+3];t&&(l=128>l?0:255);var d=l*(1/255);n[s+0]=e[s+0]*d,n[s+1]=e[s+1]*d,n[s+2]=e[s+2]*d,n[s+3]=l}return n}}(t,n)})()}),Hh=Gh.decode,Uh=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/,qh=Pe(function(e,t){void 0===t&&(t=256);var n=new Float32Array(t*t);return n.fill(e),new Uint8Array(n.buffer)}),Zh=Hr(),Xh=function(e,t,n,a,r){void 0===r&&(r=a);for(var o={},s=function(n){for(var i=function(e){o[a+"["+n+"]."+e]=function(a,i){var o=i[r];return n<o.length?o[n][e]:t[e]}},s=0,l=e,d;s<l.length;s++)d=l[s],i(d)},l=0;l<n;++l)s(l);return o}.bind(null,["color","offset"],{color:Cp,offset:0}),Kh=Xh(16,"colorScale"),Yh=Xh(Bp,"sentinelValues"),Qh={SCALE_MAX_LENGTH:16,SENTINEL_MAX_LENGTH:Bp},$h=function(){function e(e,t){var n=oo(1024/t),a=n*t,i=e.texture({width:a,height:a,format:"rgba",type:"uint8"}),r=new Map,o=this.allTextureCoordinates(n,t);Object.assign(this,{tileSize:t,tilesAcross:n,pixelsAcross:a,tileCapacity:n*n,texture:i,contents:r,available:o})}return e.prototype.addTile=function(e,t){var n=this,a=n.available,i=n.contents,r=n.texture,o=n.tileSize,s=this.hashTileCoordinates(e);if(i.has(s)){var l=i.get(s);return i.delete(s),i.set(s,l),this.formatOutputTextureCoordinates(l)}if(ya(a)){var d=i.keys().next().value;this.removeByHashKey(d)}var f=a.pop();i.set(s,f);var u=f.x,c=f.y;return r.subimage({data:t,width:o,height:o},u,c),this.formatOutputTextureCoordinates(f)},e.prototype.removeTile=function(e){this.removeByHashKey(this.hashTileCoordinates(e))},e.prototype.clearTiles=function(){for(var e=0,t=Array.from(this.contents.keys()),n;e<t.length;e++)n=t[e],this.removeByHashKey(n)},e.prototype.destroy=function(){this.texture.destroy()},e.prototype.removeByHashKey=function(e){if(this.contents.has(e)){var t=this.contents.get(e);this.contents.delete(e),this.available.push(t)}},e.prototype.formatOutputTextureCoordinates=function(e){var t=e.x,n=e.y,a=this,i=a.pixelsAcross,r=a.tileSize;return[{x:t/i,y:n/i},{x:(t+r)/i,y:(n+r)/i}]},e.prototype.hashTileCoordinates=function(e){var t=e.x,n=e.y,a=e.z;return t+":"+n+":"+a},e.prototype.allTextureCoordinates=function(e,t){return aa(Ur(e),function(n){return Ur(e).map(function(e){return{x:n*t,y:e*t}})})},e}(),Jh=function(){function t(t,n){var a=e.DomUtil.create("canvas"),i=Lp(a),r=eo(t,n);Object.assign(this,{canvas:a,regl:i,tileSize:t,textureManager:new $h(i,t),drawTile:to(i,r),drawTileInterpolateColor:ao(i,r),drawTileInterpolateValue:no(i,r)})}return t.prototype.renderTile=function(e,t,n){var a=e.coords,i=e.pixelData,r=this,o=r.regl,s=r.textureManager,l=r.tileSize;this.setCanvasSize(l,l);var d=s.addTile(a,i);return o.clear({color:Cp}),this.drawTile({colorScale:Wr(t),sentinelValues:Wr(n),canvasSize:[l,l],canvasCoordinates:[0,0],textureBounds:d,texture:s.texture}),[0,0]},t.prototype.renderTiles=function(e,t,n){var a=this,i=a.regl,r=a.textureManager,o=this.computeRequiredCanvasDimensions(e.length),s=o[0],l=o[1];this.setCanvasSize(s,l);var d=this.getCanvasCoordinates(s,l,e.length),f=lp(e,d,function(e,t){return po({},e,{canvasCoords:t})}),u=Wr(t),c=Wr(n),p=[s,l];r.clearTiles(),i.clear({color:Cp});for(var h=vt(f,r.tileCapacity),m=function(e){var t=e.map(function(e){var t=e.coords,n=e.pixelData;return r.addTile(t,n)});g.drawTile(e.map(function(e,n){var a=e.canvasCoords;return{colorScale:u,sentinelValues:c,canvasSize:p,canvasCoordinates:a,textureBounds:t[n],texture:r.texture}}))},g=this,b=0,_=h,y;b<_.length;b++)y=_[b],m(y);return d},t.prototype.renderTilesWithTransition=function(e,t,i,r,o,s){return n(this,void 0,void 0,function(){var n=this,l,d,f,u,c,p,h,m,g,b,_,y,x,v,w;return a(this,function(a){switch(a.label){case 0:return l=this,d=l.regl,f=l.textureManager,u=l.tileSize,c=this.computeRequiredCanvasDimensions(e.length),p=c[0],h=c[1],this.setCanvasSize(p,h),m=this.getCanvasCoordinates(p,h,e.length),g=lp(e,t,m,function(e,t,n){return{coords:e.coords,oldPixelData:e.pixelData,newPixelData:t.pixelData,canvasCoords:n}}),b=new $h(d,u),_=Wr(i),y=Wr(r),x=d.now(),v=function(e){var t=vt(g,f.tileCapacity);d.clear({color:Cp});for(var a=function(t){var a=t.map(function(e){var t=e.coords,n=e.oldPixelData;return f.addTile(t,n)}),i=t.map(function(e){var t=e.coords,n=e.newPixelData;return b.addTile(t,n)});n.drawTileInterpolateValue(t.map(function(t,n){var r=t.canvasCoords;return{colorScale:_,sentinelValues:y,canvasSize:c,canvasCoordinates:r,textureA:f.texture,textureB:b.texture,textureBoundsA:a[n],textureBoundsB:i[n],interpolationFraction:e}}))},i=0,r=t,o;i<r.length;i++)o=r[i],a(o);s(m)},w=d.frame(function(e){var t=e.time,n=1e3*(t-x);v(n/o)}),[4,Kr(o)];case 1:return a.sent(),w.cancel(),v(1),this.textureManager.destroy(),this.textureManager=b,[2];}})})},t.prototype.renderTilesWithTransitionAndNewColorScale=function(e,t,i,r,o,s,l,d){return n(this,void 0,void 0,function(){var n=this,f,u,c,p,h,m,g,b,_,y,x,v,w,S,k,T,E;return a(this,function(a){switch(a.label){case 0:return f=this,u=f.regl,c=f.textureManager,p=f.tileSize,h=this.computeRequiredCanvasDimensions(e.length),m=h[0],g=h[1],this.setCanvasSize(m,g),b=this.getCanvasCoordinates(m,g,e.length),_=lp(e,t,b,function(e,t,n){return{coords:e.coords,oldPixelData:e.pixelData,newPixelData:t.pixelData,canvasCoords:n}}),y=new $h(u,p),x=Wr(i),v=Wr(r),w=Wr(o),S=Wr(s),k=u.now(),T=function(e){var t=vt(_,c.tileCapacity);u.clear({color:Cp});for(var a=function(t){var a=t.map(function(e){var t=e.coords,n=e.oldPixelData;return c.addTile(t,n)}),i=t.map(function(e){var t=e.coords,n=e.newPixelData;return y.addTile(t,n)});n.drawTileInterpolateColor(t.map(function(t,n){var r=t.canvasCoords;return{colorScaleA:x,colorScaleB:v,sentinelValuesA:w,sentinelValuesB:S,canvasSize:h,canvasCoordinates:r,textureA:c.texture,textureB:y.texture,textureBoundsA:a[n],textureBoundsB:i[n],interpolationFraction:e}}))},i=0,r=t,o;i<r.length;i++)o=r[i],a(o);d(b)},E=u.frame(function(e){var t=e.time,n=1e3*(t-k);T(n/l)}),[4,Kr(l)];case 1:return a.sent(),E.cancel(),T(1),this.textureManager.destroy(),this.textureManager=y,[2];}})})},t.prototype.removeTile=function(e){this.textureManager.removeTile(e)},t.prototype.setCanvasSize=function(e,t){Object.assign(this.canvas,{width:e,height:t})},t.prototype.computeRequiredCanvasDimensions=function(e){var t=this.tileSize,n=so(io(e)),a=so(e/n);return[n*t,a*t]},t.prototype.getCanvasCoordinates=function(e,t,n){var a=this.tileSize;return aa(Ur(0,t,a),function(t){return Ur(0,e,a).map(function(e){return[e,t]})}).slice(0,n)},t}(),em=Hr(),tm={colorScale:[],sentinelValues:[],transitions:!0,transitionTimeMs:800,minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},nm=function(i){function r(e){var t=i.call(this,Object.assign({},tm,e))||this;t._checkColorScaleAndSentinels();var n=t.options,a=n.nodataValue,r=n.preloadUrl,o=t._tileSizeAsNumber(),s=new Jh(o,a);return Object.assign(t,{_renderer:s,_preloadTileCache:void 0}),t._maybePreload(r),t.on("tileunload",t._onTileRemove.bind(t)),t}return t(r,i),r.prototype.updateOptions=function(t){var n=this.options,a=n.url,i=n.colorScale,r=n.sentinelValues;e.Util.setOptions(this,t),this._checkColorScaleAndSentinels(),this._maybePreload(this.options.preloadUrl),this.options.url!==a&&(this.options.transitions?this._updateTilesWithTransitions(i,r):this._updateTiles())},r.prototype.getEvents=function(){var t=this,n=this.options,a=n.onclick,i=n.ondblclick,r=n.onmousedown,o=n.onmouseup,s=n.onmouseover,l=n.onmouseout,d=n.onmousemove,f=n.oncontextmenu,u=Oa({click:a,dblclick:i,mousedown:r,mouseup:o,mouseover:s,mouseout:l,mousemove:d,contextmenu:f},function(e){return!wa(e)});return po({},e.GridLayer.prototype.getEvents.call(this),Ta(u,function(e){return e&&t._wrapMouseEventHandler(e)}))},r.prototype.getTileUrl=function(t,n){var a={r:e.Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(a.y=i),a["-y"]=i}return e.Util.template(n,e.Util.extend(a,this.options))},r.prototype.createTile=function(t,n){var a=this,i=this.options,r=i.colorScale,o=i.sentinelValues,s=i.tileSize,l=i.url,d=e.DomUtil.create("canvas");return Object.assign(d,{className:"gl-tilelayer-tile",width:s,height:s}),this._fetchTileData(t,l).then(function(e){var i=a._renderer.renderTile({coords:t,pixelData:e},r,o),s=i[0],l=i[1];d.pixelData=e,a._copyToTileCanvas(d,s,l),n(void 0,d)}),d},r.prototype._checkColorScaleAndSentinels=function(){var e=this.options,t=e.colorScale,n=e.sentinelValues;if(0===t.length&&0===n.length)throw new Error("Either `colorScale` or `sentinelValues` must be of non-zero length.");if(16<t.length)throw new Error("Color scale length "+t.length+" exceeds the maximum, "+16+".");if(n.length>Bp)throw new Error("Sentinel values length "+n.length+" exceeds the maximum, "+Bp+".")},r.prototype._getSubdomain=function(e){var t=ro(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},r.prototype._getZoomForUrl=function(){var e=this.options,t=e.maxZoom,n=e.zoomReverse,a=e.zoomOffset,i=this._tileZoom,r=n?t-i:i;return r+a},r.prototype._onTileRemove=function(t){var n=t.coords,a=t.tile;e.Browser.android||(a.onload=j),this._renderer.removeTile(n)},r.prototype._updateTiles=function(){return n(this,void 0,void 0,function(){var e=this,t,n,i,r,o,s,l;return a(this,function(a){switch(a.label){case 0:return t=this._getActiveTiles(),[4,this._getTilesData(t)];case 1:return n=a.sent(),i=this.options,r=i.colorScale,o=i.sentinelValues,s=void 0===o?[]:o,l=this._renderer.renderTiles(n,r,s),l.forEach(function(a,i){var r=a[0],o=a[1],s=t[i];e._copyToTileCanvas(s.el,r,o),s.el.pixelData=n[i].pixelData}),[2];}})})},r.prototype._updateTilesWithTransitions=function(e,t){return n(this,void 0,void 0,function(){var n=this,i,r,o,s,l,d,f,u,c;return a(this,function(a){switch(a.label){case 0:return i=this._getActiveTiles(),r=i.map(function(e){var t=e.coords,n=e.el;return{coords:t,pixelData:n.pixelData}}),[4,this._getTilesData(i)];case 1:return o=a.sent(),i.forEach(function(e,t){e.el.pixelData=o[t].pixelData}),s=this.options,l=s.colorScale,d=s.sentinelValues,f=void 0===d?[]:d,u=s.transitionTimeMs,c=function(e){e.forEach(function(e,t){var a=e[0],r=e[1],o=i[t];n._copyToTileCanvas(o.el,a,r)})},l===e?this._renderer.renderTilesWithTransition(r,o,l,f,u,c):this._renderer.renderTilesWithTransitionAndNewColorScale(r,o,e,l,t,f,u,c),[2];}})})},r.prototype._maybePreload=function(e){e&&(!this._preloadTileCache||this._preloadTileCache.url!==e)&&this._preloadTiles(e)},r.prototype._preloadTiles=function(e){return n(this,void 0,void 0,function(){var t,n;return a(this,function(a){switch(a.label){case 0:return t=this._getActiveTiles(),[4,this._fetchTilesData(t,e)];case 1:return n=a.sent(),this._preloadTileCache={url:e,tiles:n},[2];}})})},r.prototype._getActiveTiles=function(){this._pruneTiles();var e=$r(this._tiles);return ca(e).sort(function(e,t){return Yr(e.coords,t.coords)})},r.prototype._getTilesData=function(e){return n(this,void 0,void 0,function(){var t;return a(this,function(){return t=this._preloadTileCache,t&&this.options.url===t.url&&Qr(t.tiles.map(function(e){var t=e.coords;return t}),e.map(function(e){var t=e.coords;return t}))?(this._preloadTileCache=void 0,[2,Promise.resolve(t.tiles)]):[2,this._fetchTilesData(e,this.options.url)]})})},r.prototype._fetchTilesData=function(e,t){return n(this,void 0,void 0,function(){var n=this,i;return a(this,function(a){switch(a.label){case 0:return[4,Promise.all(e.map(function(e){var a=e.coords;return n._fetchTileData(a,t)}))];case 1:return i=a.sent(),this.fire("load",{url:t}),[2,lp(e,i,function(e,t){var n=e.coords;return{coords:n,pixelData:t}})];}})})},r.prototype._fetchTileData=function(e,t){return qr(this.getTileUrl(e,t),this.options.nodataValue,this._tileSizeAsNumber())},r.prototype._tileSizeAsNumber=function(){var e=this.options.tileSize;return"number"==typeof e?e:e.x},r.prototype._copyToTileCanvas=function(e,t,n){var a=this._tileSizeAsNumber(),i=e.getContext("2d");if(null===i)throw new Error("Tile canvas 2D context is null.");i.clearRect(0,0,a,a),i.drawImage(this._renderer.canvas,t,n,a,a,0,0,a,a)},r.prototype._wrapMouseEventHandler=function(e){var t=this;return function(n){var a=n.latlng,i=t._map.project(a,t._tileZoom).floor(),r=t._getTileContainingPoint(i),o=r&&t._getCoordsInTile(r,i),s=o&&t._getPixelValue(r,o);e(po({},n,{pixelValue:s}))}},r.prototype._getTileContainingPoint=function(e){var t=this,n=$r(this._tiles);return ca(n).find(function(n){return n.coords.z===t._tileZoom&&t._tileBounds(n).contains(e)})},r.prototype._tileBounds=function(t){var n=t.coords,a=n.x,i=n.y,r=this._tileSizeAsNumber(),o=e.point(a*r,i*r),s=e.point(o.x+(r-1),o.y+(r-1));return e.bounds(o,s)},r.prototype._getCoordsInTile=function(t,n){var a=t.coords,i=a.x,r=a.y,o=this._tileSizeAsNumber();return e.point(n.x-i*o,n.y-r*o)},r.prototype._getPixelValue=function(e,t){var n=e.el.pixelData;if(n){var a=this.options,i=a.nodataValue,r=a.sentinelValues,o=new DataView(n.buffer),s=(t.y*this._tileSizeAsNumber()+t.x)*4,l=o.getFloat32(s,em);if(l!==i){var d=r&&r.find(function(e){var t=e.offset;return t===l});return d||l}}},r.SCALE_MAX_LENGTH=16,r.SENTINEL_MAX_LENGTH=Bp,r.defaultOptions=tm,r}(e.GridLayer);return nm}(L);
//# sourceMappingURL=bundle.min.js.map