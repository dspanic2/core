$.extend({handleDeleteRequest:function(){$.confirm({title:translations.delete_account,content:"",buttons:{confirm:{text:translations.yes,btnClass:"button btn-type-1",keys:["enter"],action:function(){$.showAjaxLoader(),$.ajax({url:"/dashboard/anonymize",method:"POST",data:{},cache:!1}).done(function(e){0==e.error?$('[data-action="logout-customer"]').trigger("click"):($.hideAjaxLoader(),$.growl.error({title:e.title?e.title:"",message:e.message?e.message:translations.selection_error}))})}},cancel:{text:translations.no,btnClass:"button btn-type-2",action:function(){}}}})}}),jQuery(document).ready(function(e){e(document).on("click",".order-repeat",function(){var t,r;e(this).data("order-id")&&(t=e(this).data("order-id"),r=e(this).data("url"),e.showAjaxLoader(),e.ajax({url:r,method:"POST",data:{order_id:t},cache:!1}).done(function(t){e.hideAjaxLoader(),0==t.error?(e.growl.notice({title:t.title?t.title:"",message:t.message?t.message:""}),e.reloadPage(),t.redirect_url&&(window.location.href=t.redirect_url)):e.growl.error({title:t.title?t.title:"",message:t.message?t.message:""})}))}),e(document).on("change",'.cart-items [name="return"]',function(){e('.cart-items [name="return"]:checked').length>0?(e(".order-return-items").length>0&&e(".order-return-items").show(),e(".order-complaint-items").length>0&&e(".order-complaint-items").show(),e(this).closest(".actions").find(".return-amount").show()):(e(".order-return-items").length>0&&e(".order-return-items").hide(),e(".order-complaint-items").length>0&&e(".order-complaint-items").hide(),e(this).closest(".actions").find(".return-amount").hide())}),e(document).on("click",".order-return-items",function(){e(this).data("order-id")&&function(t,r){var a={};a.order=t,a.items=[];var n=e(".cart-items");n.length&&n.find('[name="return"]').length&&n.find('[name="return"]').each(function(){e(this).is(":checked")&&a.items.push({item:e(this).data("quote-item"),return_qty:e(this).closest(".actions").find('[name="qty_return"]').val()})}),e.showAjaxLoader(),e.ajax({url:r,method:"POST",data:a,cache:!1}).done(function(t){if(e.hideAjaxLoader(),0==t.error){e(".overlay").removeClass("active");var r=e("#order-return-modal");0==r.length?(e("body").append(t.html),r=e("#order-return-modal")):(r.replaceWith(t.html),r=e("#order-return-modal")),r.addClass("active"),e("body").addClass("disable-scroll")}else e.growl.error({title:t.title?t.title:"",message:t.message?t.message:""})})}(e(this).data("order-id"),e(this).data("url"))}),e(document).on("click",".submit-return-request",function(){var t;t=e(this).data("url"),e.showAjaxLoader(),e.ajax({url:t,method:"POST",data:e("#order-return").serialize(),cache:!1}).done(function(t){e.hideAjaxLoader(),0==t.error?(e("#order-return-modal .inner").html(t.message),t.redirect&&(window.location.href=t.redirect)):e.growl.error({title:t.title?t.title:"",message:t.message?t.message:""})})}),e(document).on("click",".return-add-new-bank-account",function(t){t.preventDefault(),e(".return-new-bank-account").addClass("active")}),e(document).on("click",".return-add-new-address",function(t){t.preventDefault(),e(".return-new-address").addClass("active")}),e(document).on("click",".cancel-new-address",function(t){t.preventDefault(),t.stopPropagation(),e.disableOverlays()}),e(document).on("click",".order-complaint-items",function(){e(this).data("order-id")&&function(t,r){var a={};a.order=t,a.items=[];var n=e(".cart-items");n.length&&n.find('[name="return"]').length&&n.find('[name="return"]').each(function(){e(this).is(":checked")&&a.items.push(e(this).data("order-item"))}),e.showAjaxLoader(),e.ajax({url:r,method:"POST",data:a,cache:!1}).done(function(t){if(e.hideAjaxLoader(),0==t.error){e(".overlay").removeClass("active");var r=e("#order-complaint-modal");0==r.length?(e("body").append(t.html),r=e("#order-complaint-modal")):(r.replaceWith(t.html),r=e("#order-complaint-modal")),r.addClass("active"),e("body").addClass("disable-scroll")}else e.growl.error({title:t.title?t.title:"",message:t.message?t.message:""})})}(e(this).data("order-id"),e(this).data("url"))}),e(document).on("click","#dashboard-menu-toggle",function(t){t.preventDefault(),t.stopImmediatePropagation(),e(this).parent().find(".dashboard-account-menu-row").slideToggle()}),e("#delete-account").on("click",function(t){t.preventDefault(),e.handleDeleteRequest()});var t=e(".orders-table");if(t.length){var r=function(){var r={};e(".date-filters").find("input, select").each(function(){r[e(this).attr("name")]=e(this).val()}),e(".orders-table th").find("input,select").each(function(){r[e(this).attr("name")]=e(this).val()}),e.showAjaxLoader(),e.ajax({url:"/dashboard/get_filtered_orders",method:"POST",data:r,cache:!1}).done(function(r){e.hideAjaxLoader(),0==r.error?r.orders&&t.find("tbody").replaceWith(r.orders):e.growl.error({title:r.title?r.title:"",message:r.message?r.message:translations.search_error})})};t.parents(".sp-block-outer").find("input,select").each(function(){e(this).on("input keyup change",e.debounce(function(e){r()},500))}),e(document).on("click",".reset-order-filters",function(){t.parents(".sp-block-outer").find("input,select").each(function(){e(this).val("")}),r()})}});
