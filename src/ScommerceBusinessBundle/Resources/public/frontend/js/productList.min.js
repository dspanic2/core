jQuery.extend({useAjaxOnFirstLoad:function(){return!0},isPager:function(){return!0},filterTitleCollapsible:function(){return!0},reloadProductList:function(productList,firstLoad,isLoadMore,resetPager,skipPushState,activateFilters){if(void 0===firstLoad&&(firstLoad=!1),void 0===isLoadMore&&(isLoadMore=!1),void 0===resetPager&&(resetPager=!0),void 0===skipPushState&&(skipPushState=!1),void 0===activateFilters&&(activateFilters=!1),firstLoad&&!$.useAjaxOnFirstLoad())$.resetProductListSortOptions(productList),$.resetProductListGridListToggle(productList),$.resetProductListFilterOptions(productList),$.handleProductListShowHideClearFitlers(),$.isPager()?$.resetProductListPager(productList):$.resetProductListLoadMore(productList);else{var productGroupId=$.getProductListGroupId(),customListFilter=productList.find(".product-list-content").data("filter"),s=$.getUrlParam("s");if(null!=productGroupId||null!=customListFilter||s){var productNumItems=$.getProductListNumItems(),productSortBy=$.getProductListSortBy(),productPageNumber=$.getProductListCurrentPageNumber(firstLoad),getAllProducts=1,options={};if(isLoadMore||(getAllProducts=1),resetPager&&(productPageNumber=1),firstLoad||(getAllProducts=0,$.setProductListUrlParameters(productNumItems,productSortBy,productPageNumber,skipPushState)),options.get_all_products=getAllProducts,productGroupId&&(options.product_group=productGroupId),customListFilter){options.c=!0,$.each(customListFilter,function(t,e){options[t]=e});var customListSort=productList.find(".product-list-content").data("sort");customListSort&&$.each(customListSort,function(t,e){options[t]=e});var customListPageSize=productList.find(".product-list-content").data("page-size");customListPageSize&&(options.page_size=customListPageSize)}$.each($.getAllUrlParams(),function(t,e){options[t]=e}),$.isPager()&&(options.get_all_products=0),$.showAjaxLoader(),$.post("/get_products",options,function(result){if($("#missing-keyword").remove(),!1===result.error){if(getAllProducts||$.isPager()||!$.isPager()&&!isLoadMore)productList.find(".content .items-grid").html(result.grid_html);else{var lastScrollFromTop=$(window).scrollTop();productList.find(".content .items-grid").append(result.grid_html),$(window).scrollTop(lastScrollFromTop)}productList.find("#no-results").length>0&&$("body.page-search_results").length>0?$(".left-sidebar").parent().addClass("hidden-column"):$(".left-sidebar").parent().removeClass("hidden-column"),productList.find(".content .items-options").html(result.sort_html),$.resetProductListGridListToggle(productList),$.productListPresetOptionsFromUrl(productList),$(".product-filters.active").removeClass("active"),productList.find(".content .items-pager").html(result.pager_html),$.isPager()?$.resetProductListPager(productList):$.resetProductListLoadMore(productList),$.resetProductListSortOptions(productList),$(".active-filters-wrapper").length&&void 0!==result.active_filters&&$(".active-filters-wrapper").html(result.active_filters),$(".sp-block-outer.product-filters").length?($(".sp-block-outer.product-filters").find(".content").html(result.filter_html),$.resetProductListFilterOptions(productList),$.handleProductListShowHideClearFitlers(),activateFilters&&$(".sp-block-outer.product-filters").addClass("active")):$(".responsive-filters-toggle").remove(),firstLoad||isLoadMore||$.scrollToTop(productList),result.has_next_page?$(".products-load-more").show():$(".products-load-more").hide();var dataCallback=$(".main-content").data("callback-grid");dataCallback&&$.each(dataCallback,function(key,f){var func=eval(f);$.isFunction(func)&&func(productList,result)}),0===result.total?(productList.find(".items-grid").addClass("empty"),$("body").addClass("empty-product-results")):(productList.find(".items-grid").removeClass("empty"),$("body").removeClass("empty-product-results"));var h1=$("body").find("h1");void 0!==result.facet_title&&(""!==result.facet_title?(h1.data("original")||h1.data("original",h1.text()),h1.text(result.facet_title)):h1.data("original")&&h1.text(h1.data("original")));var metaTitle=$("head").find('meta[name="title"]'),headTitle=$("head").find("title"),ogTitle=$("head").find('[property="og:title"]'),twitterTitle=$("head").find('[name="twitter:title"]');void 0!==result.facet_meta_title&&(""!==result.facet_meta_title?(metaTitle.data("original")||metaTitle.data("original",metaTitle.attr("content")),metaTitle.attr("content",result.facet_meta_title),ogTitle.attr("content",result.facet_meta_title),twitterTitle.attr("content",result.facet_meta_title),headTitle.text(result.facet_meta_title)):metaTitle.data("original")&&(metaTitle.attr("content",metaTitle.data("original")),ogTitle.attr("content",metaTitle.data("original")),twitterTitle.attr("content",metaTitle.data("original")),headTitle.text(metaTitle.data("original"))));var metaDescription=$("head").find('meta[name="description"]');if(void 0!==result.facet_meta_description&&(""!==result.facet_meta_description?(metaDescription.data("original")||metaDescription.data("original",metaDescription.attr("content")),metaDescription.attr("content",result.facet_meta_description)):metaDescription.data("original")&&metaDescription.attr("content",metaDescription.data("original"))),productList.find(".results-info").length){var startFrom=productList.find('[name="product-num-items"]').val()*($.getProductListCurrentPageNumber(firstLoad)-1)+1,to=startFrom-1+productList.find(".product-display-grid").length;productList.find(".results-info .from").html(startFrom),productList.find(".results-info .to").html(to),productList.find(".results-info .total").html(result.total)}$.setActiveFavorites(),$.createCustomCheckboxes(),$.loadLazyImages()}else{var error='<div id="missing-keyword"><div class="system-message error-message"><span class="system-message-close">Ã—</span>'+result.message+"</div></div>";productList.before(error),$.growl.error({title:translations.error_message,message:result.message})}$.hideAjaxLoader()},"json")}}},resetProductListSortOptions:function(t){var e=t.find('[name="product-sort-by"]');e.length&&($(".sort-dropdown .option").length>0&&$(".sort-dropdown .option").on("click",function(){$(".sort-dropdown").find('[name="product-sort-by"]').val($(this).data("value")).trigger("change")}),e.on("change",function(){$.reloadProductList($(this).closest(".sp-block-outer.product-list"))}));var i=t.find('[name="product-num-items"]');i.length&&($(".num-items-dropdown .option").length>0&&$(".num-items-dropdown .option").on("click",function(){$(".num-items-dropdown").find('[name="product-num-items"]').val($(this).data("value")).trigger("change")}),i.on("change",function(){$.reloadProductList($(this).closest(".sp-block-outer.product-list"))}))},getProductListSortBy:function(){var t="created_desc",e=$('[name="product-sort-by"]');return e.length&&(t=e.val()),t},getProductListNumItems:function(){var t=30,e=$('[name="product-num-items"]');return e.length&&(t=e.val()),t},resetProductListFilterOptions:function(t){if($(".product-filters.active").length&&$(".product-filters.active").removeClass("active"),$(".apply-all-filters").length>0)$(".apply-all-filters").on("click",function(){$.handleProductListShowHideClearFitlers(),$(".sp-block-outer.product-list").each(function(){$.reloadProductList($(this))})});else{var e=$('.category-filter input[type="checkbox"], .category-filter select');e.length&&e.on("change",function(){$.handleProductListShowHideClearFitlers(),$.reloadProductList(t,!1,!1,!0,!1,!0)})}var i=$(".category-filter-show-toggler > span");i.length&&i.on("click",function(t){var e=$(this).closest(".category-filter");e.addClass("expanded"),e.find("ul.show-more-wrapper").slideToggle().toggleClass("visible"),e.closest(".category-filter").toggleClass("visible")});var a=$("button.clear-all-filters.button");a.length&&a.on("click",function(){a.hide(),$('.category-filter input[type="checkbox"]').prop("checked",!1),$(".category-filter select").val(""),$('.category-filter [name="min_price"]').length>0&&$('.category-filter [name="min_price"]').val($('.category-filter [name="min_price"]').attr("min")),$('.category-filter [name="max_price"]').length>0&&$('.category-filter [name="max_price"]').val($('.category-filter [name="max_price"]').attr("max")),$(".sp-block-outer.product-list").each(function(){$.reloadProductList($(this))})});var r=$(".filter-values.price");r.length&&r.each(function(){var e=$(this),i=parseInt(e.find('[name="min_price"]').attr("min")),a=parseInt(e.find('[name="min_price"]').attr("max"));if(e.find(".price-filter-range").slider({range:!0,orientation:"horizontal",min:i,max:a,values:[i,a],step:1,slide:function(t,i){if(i.values[0]==i.values[1])return!1;e.find(".min-price").val(i.values[0]),e.find(".max-price").val(i.values[1])}}),0==$(".apply-all-filters").length){var r=!1;$(".filter-values.price .ui-slider-handle").mousedown(function(){$(window).width()>991&&(r=!0)}),$(document).mouseup(function(){r&&(r=!1,$.reloadProductList(t))})}var o=function(t,i){var a=parseInt(t.attr("value")),r=parseInt(i.attr("value"));a>r&&i.val(a),a===r&&(r=a+100,t.val(a),i.val(r)),e.find(".price-filter-range").slider({values:[a,r]})};o(e.find(".min-price"),e.find(".max-price")),e.find(".min-price").on("change paste keyup",function(){o($(this),e.find(".max-price"))}),e.find(".max-price").on("change paste keyup",function(){o(e.find(".min-price"),$(this))}),e.find("button.apply").on("click",function(){$(".sp-block-outer.product-list").each(function(){$(this).find(".category-list-pager li.activated").removeClass("activated"),$(this).find('.category-list-pager [data-page-number="1"]').addClass("activated"),$.reloadProductList($(this))})}),e.find("button.reset").on("click",function(){e.find(".min-price").val(e.find(".min-price").attr("min")),e.find(".max-price").val(e.find(".max-price").attr("max")),$(".sp-block-outer.product-list").each(function(){$(this).find(".category-list-pager li.activated").removeClass("activated"),$(this).find('.category-list-pager [data-page-number="1"]').addClass("activated"),$.reloadProductList($(this))})})})},handleActiveFilterRemove:function(t){var e=t.data("id");t.hasClass("price-remove-filtered-value")?($('.filter-values.price [name="min_price"]').val($('.filter-values.price [name="min_price"]').attr("min")),$('.filter-values.price [name="max_price"]').val($('.filter-values.price [name="max_price"]').attr("max")),$(".price-filter-input .apply").click()):$(".category-filter").find("#"+e).closest("label").length>0?$(".category-filter").find("#"+e).closest("label").click():$(".category-filter").find("#"+e).find("button.reset")&&$(".category-filter").find("#"+e).find("button.reset").click()}}),jQuery(document).ready(function(t){t.extend({productListPresetOptionsFromUrl:function(e){var i=t.getUrlParam("sort");0!==i&&e.find('[name="product-sort-by"]').val(i);var a=t.getUrlParam("page_size");0!==a&&(e.find('[name="product-num-items"]').val(a),t(".num-items-dropdown").length>0&&t('.num-items-dropdown [data-value="'+a+'"]').addClass("activated"));var r=t.getUrlParam("page_number");0!==r&&t(".products-load-more").data("current-page",r)},setProductListUrlParameters:function(e,i,a,r){var o=window.location.href.split("?")[0],s={};if(s.page_size=e,s.sort=i,s.page_number=a,t.getUrlParam("s")){s.s=1;var n=!1;t.each(t.getAllUrlParams(),function(t,e){if("f"===t)return!1;"s"!==t?n&&(s[t]=e):n=!0})}var l=t.getProductListFilterValuesForUrl();Object.keys(l).length>0&&(s.f=1,t.each(l,function(t,e){s[t]=e.join(";")})),r||window.history.pushState({},"",o+"?"+t.param(s))},getProductListFilterValuesForUrl:function(){var e=t(document).find(".category-filter"),i={};return e.each(function(){var e=t(this),a=e.find('input[type="checkbox"]:checked');if(a.length){var r=e.data("filter-key");void 0!==r&&(i[r]=[],a.each(function(){i[r].push(encodeURIComponent(t(this).val()))}))}var o=e.find("select");o.length&&o.each(function(){var a=e.data("filter-key");o.each(function(){t(this).val()&&(void 0===i[a]&&(i[a]=[]),i[a].push(encodeURIComponent(t(this).val())))})});var s=e.find('input:not([type="checkbox"])');s.length&&s.each(function(){void 0!==t(this).attr("name")&&(i[t(this).attr("name")]=[],i[t(this).attr("name")].push(encodeURIComponent(t(this).val())))})}),i},getProductListGroupId:function(){var e=t('[data-entity-type="product_group"]'),i=null;return e.length&&(i=e.data("entity-id")),i},resetProductListCurrentPageNumber:function(){var e=t(".products-load-more");e.length&&e.data("current-page",1)},getProductListCurrentPageNumber:function(i){if(i){var a=t.getUrlParam("page_number");if(0!==a&&"undefined"!==a)return a}var r=t(".products-load-more");if(r.length)return r.data("current-page")===t.getUrlParam("page_number")?1:r.data("current-page");var o=e.find(".category-list-pager");if(o.length){if(o.find("li.active").length>0)return o.find("li.active").data("page-number");if(o.find("li.activated").length>0)return o.find("li.activated").data("page-number")}return 1},handleProductListShowHideClearFitlers:function(){var e=t("button.clear-all-filters.button");t('.category-filter input[type="checkbox"]:checked').length?e.show():t(".category-filter select").length&&""!==t(".category-filter select").val()?e.show():t('.category-filter [name="min_price"]').val()!==t('.category-filter [name="min_price"]').attr("min")||t('.category-filter [name="max_price"]').val()!==t('.category-filter [name="max_price"]').attr("max")?e.show():e.hide()},resetProductListLoadMore:function(e){var i=e.find(".products-load-more");if(i.length){var a=t.getUrlParam("page_number");0!==a&&i.data("current-page",a),i.on("click",function(){var e=t(this).data("current-page");t(this).data("current-page",parseInt(e)+1),t.reloadProductList(t(this).closest(".sp-block-outer.product-list"),!1,!0,!1)})}},resetProductListPager:function(e){var i=e.find(".category-list-pager");i.length&&i.each(function(){var e=t(this);if(e.find(".page:not(.active) a, .previous a, .next a").on("click",function(e){e.preventDefault(),e.stopPropagation(),t(this).closest("li").click()}),e.find(".page:not(.active)").on("click",function(i){i.preventDefault(),i.stopPropagation(),e.find(".page").removeClass("activated"),e.find(".page").removeClass("active"),t(this).addClass("activated"),t(this).addClass("active"),t.reloadProductList(t(this).closest(".sp-block-outer.product-list"),!1,!1,!1)}),e.find(".previous").on("click",function(t){t.preventDefault(),t.stopPropagation();var i=e.find(".active,.activated").first().prev();i.hasClass("page")&&i.click()}),e.find(".next").on("click",function(t){t.preventDefault(),t.stopPropagation();var i=e.find(".active,.activated").first().next();i.hasClass("page")&&i.click()}),e.find("li.page").length>10){e.find("li.page:not(.active)").hide(),e.find("li.page:not(.activated)").hide();var i=e.find("li.page").length,a=e.find("li.page.active").index();e.find("li.page.activated").length>0&&(a=e.find("li.page.activated").index()),e.find("li.page:eq("+(a-1)+")").length&&e.find("li.page:eq("+(a-1)+")").show(),e.find("li.page:eq("+(a-2)+")").length&&(e.find("li.page:eq("+(a-2)+")").show(),a-2>2&&e.find("li.page:eq("+(a-2)+")").before("<li class='ellipsis'>...</li>")),e.find("li.page:eq("+a+")").length&&e.find("li.page:eq("+a+")").show(),e.find("li.page:eq("+(a+1)+")").length&&e.find("li.page:eq("+(a+1)+")").show(),e.find("li.page:eq("+(a+2)+")").length&&e.find("li.page:eq("+(a+2)+")").show().after("<li class='ellipsis'>...</li>"),e.find("li.page:eq(0)").show(),e.find("li.page:eq(1)").show(),e.find("li.page:eq("+(i-1)+")").show(),e.find("li.page:eq("+(i-2)+")").show()}e.addClass("ready")})},resetProductListGridListToggle:function(e){var i=e.find(".toggle-list-view"),a=e.find(".toggle-grid-view");(i.length&&i.on("click",function(){var e=t(this).closest(".section").parent().find(".items-grid");if(!e.hasClass("list-view")){e.addClass("list-view");var i={};t.getCookie("list_views")&&(i=JSON.parse(t.getCookie("list_views"))),i[location.pathname]=2,t.setCookie("list_views",JSON.stringify(i))}t(this).hasClass("active")||t(this).addClass("active"),a.removeClass("active")}),a.length&&a.on("click",function(){var e=t(this).parents(".section").parent().find(".items-grid");if(e.hasClass("list-view")){e.removeClass("list-view");var a={};t.getCookie("list_views")&&(a=JSON.parse(t.getCookie("list_views"))),a[location.pathname]=1,t.setCookie("list_views",JSON.stringify(a))}t(this).hasClass("active")||t(this).addClass("active"),i.removeClass("active")}),t.getCookie("list_views"))&&(2==JSON.parse(t.getCookie("list_views"))[location.pathname]&&i.click())}});var e=t(".sp-block-outer.product-list");t(document).on("click",".specification .expand",function(){t(this).parents(".product-display-grid").find(".specification-full").addClass("active")}),t(document).on("click",".specification-full .close",function(){t(this).parents(".product-display-grid").find(".specification-full").removeClass("active")}),t(document).on("click","span.responsive-filters-toggle",function(){t(".category-products.product-filters").toggleClass("active")}),t(document).on("click",".category-filter .filter-title",function(){t.filterTitleCollapsible()&&t(this).closest(".category-filter").toggleClass("expanded")}),t(document).on("click",".active-filters-wrapper .selected",function(e){e.preventDefault(),e.stopImmediatePropagation(),t.handleActiveFilterRemove(t(this))}),e.length&&(e.each(function(){t.reloadProductList(t(this),!0,!1)}),t(window).on("popstate",function(){var i=t.getUrlParam("page_number");t(".category-list-pager li.active").removeClass("active"),t(".category-list-pager li.activated").removeClass("activated"),t('.category-list-pager li[data-page-number="'+i+'"]').addClass("active"),t('.category-list-pager li[data-page-number="'+i+'"]').addClass("activated"),e.each(function(){t.reloadProductList(t(this),!1,!1,!1,!0)})}))});
