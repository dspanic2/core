jQuery.extend({responsiveTabItemHandler:function(e,t){if($(window).width()<768){t.preventDefault();var a=e.hasClass("tab-active");$(".responsive-tab-item.tab-active").removeClass("tab-active"),a||e.addClass("tab-active")}},mainMenuToggleHandler:function(e,t){var a=$("#menu-display");t.preventDefault(),e.hasClass("active")||$.disableOverlays(),e.toggleClass("active"),e.hasClass("active")?a.addClass("active"):a.removeClass("active")},handleProductRemindMe:function(e){var t=null;e.data("pid")&&(t=e.data("pid"));var a=null;e.data("title")&&(a=e.data("title")),$.productRemindMeOnAvailable(t,a)},handleAutocompleteSearchResults:function(e){void 0!==e.grid_html&&(e.grid_html?($("#search-autocomplete-overlay").find(".search-results-content .content.items-grid").html(e.grid_html),$("#search-autocomplete-overlay").find(".search-results-content .content.items-grid").closest(".search-results-content").show()):$("#search-autocomplete-overlay").find(".search-results-content .content.items-grid").closest(".search-results-content").hide()),void 0!==e.product_groups_html&&(e.product_groups_html?($("#search-autocomplete-overlay").find(".search-suggestions").html(e.product_groups_html),$("#search-autocomplete-overlay").find(".search-suggestions").closest(".search-results-content").show()):$("#search-autocomplete-overlay").find(".search-suggestions").closest(".search-results-content").hide()),void 0!==e.posts_html&&(e.posts_html?($("#search-autocomplete-overlay").find(".search-connected").html(e.posts_html),$("#search-autocomplete-overlay").find(".search-connected").closest(".search-results-content").show()):$("#search-autocomplete-overlay").find(".search-connected").closest(".search-results-content").hide()),void 0!==e.brands_html&&(e.brands_html?($("#search-autocomplete-overlay").find(".search-brands").html(e.brands_html),$("#search-autocomplete-overlay").find(".search-brands").closest(".search-results-content").show()):$("#search-autocomplete-overlay").find(".search-brands").closest(".search-results-content").hide())},handleMarketingMessagesPopup:function(){var e=$("#marketing-message-popup-display");e.length>0&&setTimeout(function(){e.addClass("active");var t=[];$.getCookie("popups_shown")&&(t=JSON.parse($.getCookie("popups_shown"))),t.push(e.data("id")),$.setCookie("popups_shown",JSON.stringify(t))},e.data("delay"))},handleMarketingMessagesFloater:function(){var e=$("#marketing-message-floater-display");e.length>0&&setTimeout(function(){e.addClass("active"),e.find(".overlay-close, .button").on("click",function(){var t=[];$.getCookie("floaters_shown")&&(t=JSON.parse($.getCookie("floaters_shown"))),t.push(e.data("id")),$.setCookie("floaters_shown",JSON.stringify(t))})},e.data("delay"))}}),jQuery(document).ready(function($){$.initializeHorizontalScroll(),$.loadLazyImages(),$.handleMarketingMessagesPopup(),$.handleMarketingMessagesFloater(),$(window).on("resize",function(){$.loadLazyImages()}),$(document).ajaxComplete(function(event,xhr,settings){void 0!==xhr.responseJSON&&void 0!==xhr.responseJSON.javascript&&eval(xhr.responseJSON.javascript),$.hideAjaxLoader(),$.initRecaptcha(),$.loadLazyImages(),$.initializeFrontendForm(),$.initializeHorizontalScroll()}),$(document).on("global:page-reload",function(e){$.reloadPage()}),$(document).on("possible-removal",function(e,t,a){1==t.remove&&$(a).remove()}),$(document).on("click",function(e){$.disableOverlays($(e.target))}),$(document).keyup(function(e){"Escape"===e.key&&$.disableOverlays()});var headerHeight=$("header").height();$.extend({handleStickyHeader:function(){$(window).scrollTop()>headerHeight?($("body").addClass("fixed"),$(".back-to-top").addClass("visible")):$(window).scrollTop()<headerHeight&&($("body").removeClass("fixed"),$(".back-to-top").removeClass("visible"))}}),$(document).on("click",".cart-toggle",function(e){e.preventDefault(),$(this).hasClass("active")||$.disableOverlays(),$(this).toggleClass("active"),$(this).hasClass("active")?($("#cart-display").addClass("active"),$(".header-second").addClass("menu-open")):($("#cart-display").removeClass("active"),$.disableOverlays())}),$.handleStickyHeader($(window)),$(window).on("scroll",function(){$.handleStickyHeader($(this))}),$(document).on("click",".main-menu-toggle-wrapper",function(e){$.mainMenuToggleHandler($(this),e)}),$(document).on("click",".account-toggle",function(e){e.preventDefault();var t=$("#account-display");t.hasClass("active")||$.disableOverlays(),$(this).toggleClass("active"),$(this).hasClass("active")?(t.addClass("active"),$("#search-autocomplete-overlay .search-autocomplete").focus()):t.removeClass("active")}),$(".search-responsive-toggle").on("click",function(e){e.preventDefault();var t=$("#search-autocomplete-overlay");t.hasClass("active")||$.disableOverlays(),$(this).toggleClass("active"),$(this).hasClass("active")?(t.addClass("active"),$("#search-autocomplete-overlay .search-autocomplete").focus()):t.removeClass("active")}),$(document).on("click","span.responsive-close-filters",function(){$(this).closest(".product-filters").removeClass("active")}),$(".back-to-top").on("click",function(){$("html,body").animate({scrollTop:0},"slow")}),$(document).on("click",".accordion-title",function(){$(this).parent().hasClass("active")?$(this).siblings(".accordion-body").slideUp():$(this).siblings(".accordion-body").slideDown(),$(this).parent().toggleClass("active")});var logoutCustomer=$(".link-logout-customer");logoutCustomer.length&&logoutCustomer.on("click",function(e){e.preventDefault(),$.showAjaxLoader(),$.ajax({url:logoutCustomer.data("url"),method:"POST",data:{},cache:!1}).done(function(e){$.hideAjaxLoader(),0==e.error?e.redirect_url&&(window.location.href=e.redirect_url):$.growl.error({title:e.title?e.title:"",message:e.message?e.message:translations.selection_error})})}),$(document).on("click",".open-login",function(e){$.showLoginModal()}),$(document).on("click",".system-message-close",function(e){$(this).parent().remove()}),$(".search-autocomplete-overlay .overlay-close").on("click",function(e){$("input.search-autocomplete").val(""),$("input.search-autocomplete").trigger("input")}),$(document).on("keyup","input.search-autocomplete",$.debounce(function(e){var t=$(this),a=t.data("main-search"),s=$(this).val();if(s.length>=$("body").data("search-length")){$.showAjaxLoader();var o={};o.query=s,t.data("get-posts")&&(o.get_posts=t.data("get-posts")),t.data("get-posts")&&(o.get_categories=t.data("get-categories")),t.data("get-product-groups")&&(o.get_product_groups=t.data("get-product-groups")),t.data("get-brands")&&(o.get_brands=t.data("get-brands")),o.get_all_products=1,o.page_size=100,t.data("pre-filter")&&(o.pre_filter=t.data("pre-filter")),$.ajax({url:"/search_products_autocomplete",method:"POST",data:o,cache:!1}).done(function(e){var o=null;if($.hideAjaxLoader(),!1===e.error){var r=t.parent().find(".results-autocomplete-wrapper");if(r.length?(r.addClass("active"),r.find(".content").html(e.grid_html),o=r.find(".show-all")):a?($("#search-autocomplete-overlay").addClass("active"),$.handleAutocompleteSearchResults(e),$("#search-autocomplete-overlay .search-autocomplete").val(s),$("#search-autocomplete-overlay").find(".search-grid").addClass("visible"),o=$("#search-autocomplete-overlay").find(".show-all")):$.growl.error({title:e.title?e.title:"",message:e.message?e.message:translations.error_message}),null!=o&&o.length&&$("#search-autocomplete-overlay").find(".product-display-grid.item").length>0){var i="/rezultati-pretrage?s=1&keyword="+s;o.attr("href",i),o.show()}$("#search-autocomplete-overlay .search-autocomplete").length>0&&$("#search-autocomplete-overlay .search-autocomplete").is(":visible")&&$("#search-autocomplete-overlay .search-autocomplete").focus(),$.loadLazyImages()}else $.growl.error({title:e.title?e.title:"",message:e.message?e.message:translations.search_error})})}else $.growl.error({title:"",message:translations.search_min_length_prefix+" "+$("body").data("search-length")+" "+translations.search_min_length_suffix})},1150)),$(document).on("click",".dropdown-open",function(){$(this).parent().removeClass("to-left"),$(this).parent().addClass("clicked"),$(".custom-dropdown:not(.clicked)").removeClass("active"),$(this).parent().toggleClass("active"),$(this).parent().removeClass("clicked"),$(this).parent().hasClass("active")&&$(this).parent().find(".dropdown-options").offset().left+$(this).parent().find(".dropdown-options").width()>$(window).width()&&$(this).parent().addClass("to-left")}),$(document).on("click",".tabs .tab-item",function(e){if(e.preventDefault(),!$(this).hasClass("tab-active")){$(this).closest("ul").find(".tab-active").removeClass("tab-active"),$(this).addClass("tab-active");var t=$(this).data("index");$(this).closest(".tabs").find(".tab-content.tab-active").removeClass("tab-active"),$(this).closest(".tabs").find(".tab-content#"+t).addClass("tab-active"),$(this).closest(".tabs").find(".responsive-tab-item.tab-active").removeClass("tab-active"),$(this).closest(".tabs").find('.responsive-tab-item[data-index="'+t+'"]').addClass("tab-active"),$.loadLazyImages()}}),$(document).on("click",".tabs .responsive-tab-item",function(e){$.responsiveTabItemHandler($(this),e)}),$(document).on("click","button.button.add-new-button",function(e){e.preventDefault(),$(this).parents(".dashboard-add-new").find(".overlay").addClass("active")}),$(document).on("click",".send-inquiry",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=null;$(this).data("pid")&&(t=$(this).data("pid")),!t&&$(".sp-block-outer-product_details[data-pid]").length&&(t=$(".sp-block-outer-product_details[data-pid]").data("pid"));var a=null;$(this).data("title")&&(a=$(this).data("title")),$.openInquiryForm(t,a)}),$(document).on("click",".remind-me-available",function(){$.handleProductRemindMe($(this))});var timer=$("[data-timer]");if(timer.length)var seconds=timer.data("timer"),interval=setInterval(function(){seconds-=1,timer.html(seconds),seconds<=0&&(window.location.href="/",clearInterval(interval))},1e3);$(document).on("click",".quick-order-search-item .product-display-grid.item",function(e){e.preventDefault();var t=$(this).closest(".form-row");if(t.find(".form-error").each(function(){$(this).removeClass("form-error")}),t.is(":last-child")){var a=t.clone();a.find(".results-autocomplete-wrapper").removeClass("active").find(".items-grid").html(""),a.find('[name="product_search"]').val(""),t.after(a)}var s=$(this).data("product-id"),o=$(this).find(".product-title").text(),r=$(this).data("max-qty"),i=$(this).data("step"),l=$(this).data("unit"),n=$(this).data("price");$(this).closest(".quick-order-search-item").find('[name="product_search"]').val($.trim(o)),$(this).closest(".quick-order-search-item").find('[name="product_id"]').val(s),$(this).closest(".form-row").find('[name="qty"]').removeAttr("disabled"),$(this).closest(".form-row").find('[name="qty"]').attr("min",i),$(this).closest(".form-row").find('[name="qty"]').attr("max",r),$(this).closest(".form-row").find('[name="qty"]').attr("step",i),$(this).closest(".form-row").find('[name="qty"]').data("step",i),$(this).closest(".form-row").find('[name="qty"]').val(i),$(this).closest(".form-row").find('[name="qty"]').data("price",n),$(this).closest(".form-row").find(".unit").text(l),$(this).closest(".results-autocomplete-wrapper").removeClass("active"),t.find(".remove").show(),$(this).closest(".results-autocomplete-wrapper").find(".grid-view").html("")}),$(document).on("click",".quick-order-row .remove",function(e){$(this).closest(".form-row").find('[name="product_search"]').val(""),$(this).closest(".form-row").find('[name="product_id"]').val(null),$(this).closest(".form-row").find('[name="qty"]').attr("disabled","disabled"),$(this).closest(".form-row").find('[name="qty"]').removeAttr("min"),$(this).closest(".form-row").find('[name="qty"]').removeAttr("max"),$(this).closest(".form-row").find('[name="qty"]').removeAttr("step"),$(this).closest(".form-row").find('[name="qty"]').data("step",null),$(this).closest(".form-row").find('[name="qty"]').val(null),$(this).closest(".form-row").find(".unit").text(""),$(this).hide()}),$(document).on("input change",'form#quick-order [name="qty"]',function(){parseInt($(this).val())>parseInt($(this).attr("max"))?($(this).val($(this).attr("max")),$.growl.error({title:translations.error_message,message:translations.max_value_warning_title})):$(this).val($(this).val())}),$(document).on("submit","form#quick-order",function(e){e.preventDefault();var t=!1,a=[];$(this).find(".quick-order-row").each(function(){var e=$(this).find('[name="product_id"]'),s=$(this).find('[name="qty"]');e.val()&&s.val()?a.push({product_id:e.val(),qty:s.val()}):e.val()&&s.val()&&(t=!0,e.val()||e.siblings('[name="product_search"]').addClass("form-error"),s.val()||s.addClass("form-error"))}),a.length>0&&!t?($.showAjaxLoader(),$.ajax({url:"/cart/add_to_cart",method:"POST",data:{products:a},cache:!1}).done(function(e){if($.hideAjaxLoader(),0==e.error){var t=e.message?e.message:"";t+="<br>",t+='<a href="'+urls.cart.url+'" class="button btn-type-1">'+urls.cart.title+"</a>",t+='<button class="growl-button button  btn-type-2">'+translations.continue+"</button>",$.growl.notice({title:e.title?e.title:"",message:t}),$("#cart-display").replaceWith(e.minicart_html),$(".cart-toggle").length&&($(".cart-toggle").find(".amount").html(parseInt(e.minicart_num)),parseInt(e.minicart_num)<1?$(".cart-toggle").find(".amount").hide():$(".cart-toggle").find(".amount").show()),$(".cart-toggle").find(".info .price-value").length?$(".cart-toggle").length&&e.total_price&&$(".cart-toggle").find(".info .price-value strong").html(e.total_price):$(".cart-toggle").find(".info").append(e.price_html),void 0!==e.total_price&&$(".mini-cart-total .price-value").text(e.total_price),$("#cart-display").addClass("active")}else $.growl.error({title:e.title?e.title:"",message:e.message?e.message:""})})):$.growl.error({title:"",message:translations.select_product})}),$('[data-action="start-page-builder"]').length&&$(document).on("click",'[data-action="start-page-builder"]',function(){$.showAjaxLoader(),$.ajax({url:"/api/start_page_builder",method:"POST",data:{},cache:!1}).done(function(e){0==e.error?$.reloadPage():($.hideAjaxLoader(),$.growl.error({title:e.title?e.title:"",message:e.message?e.message:translations.selection_error}))})})});
