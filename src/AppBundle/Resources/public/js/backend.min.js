jQuery(document).ready(function(e){e('[data-action="menu-quick-search"]').on("input",function(){e("#menu-quick-search-results").html("");var a=e(this).val();e("ul.nav a:not(.dropdown-toggle)").each(function(){if(e(this).text().toLowerCase().indexOf(a.toLowerCase())>=0){var t=e("<li>");t.append(e(this).clone()),t.appendTo("#menu-quick-search-results")}})}),e('[data-action="menu-quick-search"]').focusout(function(){window.setTimeout(function(){e("#menu-quick-search-results").html("")},200)}),e(document).keydown(function(a){if(e('[data-action="menu-quick-search"]').is(":focus"))if(40==a.which)e("#menu-quick-search-results>li.quick-search-active").length>0?(t=e("#menu-quick-search-results>li.quick-search-active").index())<e("#menu-quick-search-results>li").length&&(e("#menu-quick-search-results>li.quick-search-active").removeClass("quick-search-active"),e("#menu-quick-search-results>li:eq("+(parseInt(t)+1)+")").addClass("quick-search-active")):e("#menu-quick-search-results>li:first-child").addClass("quick-search-active");else if(38==a.which){var t;if(e("#menu-quick-search-results>li.quick-search-active").length>0)(t=e("#menu-quick-search-results>li.quick-search-active").index())>0&&(e("#menu-quick-search-results>li.quick-search-active").removeClass("quick-search-active"),e("#menu-quick-search-results>li:eq("+(parseInt(t)-1)+")").addClass("quick-search-active"));else e("#menu-quick-search-results>li:first-child").addClass("quick-search-active")}else 13==a.which&&e("#menu-quick-search-results>li.quick-search-active").length>0&&(window.location.href=e("#menu-quick-search-results>li.quick-search-active>a").attr("href"))}),e(".navbar-toggle").on("click",function(){e("nav.navbar").toggleClass("open"),e("nav.navbar").hasClass("open")?e(this).find("i").attr("class","fa fa-times"):e(this).find("i").attr("class","fa fa-bars")}),e("#minify-menu").on("click",function(){e(this).parents(".main-layout").find(".columns").toggleClass("minified"),e(this).toggleClass("minified"),e.setCookie("minified-menu",e(this).hasClass("minified"));var a=e(".logo img"),t=a.attr("src"),i=a.data("mini");a.attr("src",i),a.data("mini",t)}),e.ajaxPrefilter(function(a,t,i){a.url!==window.location.href&&(e("#ajax-loading").addClass("active"),i.complete(function(a){e("#ajax-loading").removeClass("active")}))}),e(document).keyup(function(a){"Escape"===a.key&&(e('[data-dismiss="modal"]').length&&e('[data-dismiss="modal"]').each(function(){e(this).click()}),e(".overlay").removeClass("active"))}),e(document).on("shown.bs.modal","#default_modal",function(a){e(this).data("bs.modal").options.backdrop="static"}),e(document).on("click",'[data-toggle="dropdown"]',function(){e(this).parent().hasClass("open")?e(this).siblings("ul").slideDown():e(this).siblings("ul").slideUp()}),e(document).on("click",function(a){0===e(a.target).parents(".sp-listview-dropdown-wrapper").length&&e(".sp-listview-dropdown-wrapper").find("ul").slideUp()});e(window).scroll(function(){var a,t;a=e(".layout-right>.sp-main-actions-wrapper"),t=e(".layout-left>nav"),e(window).scrollTop()>60?(a.addClass("sp-main-actions-fixed"),t.addClass("fixed")):(a.removeClass("sp-main-actions-fixed"),t.removeClass("fixed"))}),e(".toggle-as-admin").on("click",function(a){a.preventDefault(),e.ajax({url:"/users/display-admin",method:"POST",async:!1,cache:!1}).done(function(a){0==a.error&&e.reloadPage()})});var a=window.location.href.split("#");e('[data-toggle="tab"]').on("click",function(){var t=window.location.href;t&&(t=(t=(t=(t=t.split("?"))[0]).split("#"))[0]);var i=a[0],s=e(this).attr("href");window.history.pushState("","",i),sessionStorage.setItem("tab-"+e.hashCode(t),s)}),void 0!==a[1]&&e('[href="#'+a[1]+'"]').length>0&&e('[href="#'+a[1]+'"]').click(),e(document).on("click",".accordion-header",function(){e(this).hasClass("open")?(e(this).removeClass("open"),e(e(this).data("target")).slideUp()):(e(this).addClass("open"),e(e(this).data("target")).slideDown())}),e(document).on("click",'[data-action="email_reply"]',function(a){a.stopPropagation(),a.preventDefault(),e.showAjaxLoader();var t=e(this);e.ajax({url:t.data("url"),method:"POST",data:{email_id:t.data("email-id")},cache:!1}).done(function(a){if(e.hideAjaxLoader(),0==a.error){var t=e("#modal-container").clone(!0,!0).appendTo(e("body"));t.html(a.html),t.find(".modal").modal("show"),initializeCkeditor(t.find("form"))}else e.growl.error({title:a.title?a.title:"",message:a.message?a.message:translations.selection_error})})}),e(document).on("click",'[data-action="send_email_reply"]',function(a){a.stopPropagation(),a.preventDefault(),e.showAjaxLoader();var t=e(this);e.ajax({url:t.data("url"),method:"POST",data:t.parents("form").serialize(),cache:!1}).done(function(a){e.hideAjaxLoader(),0==a.error?(e.growl.notice({title:a.title?a.title:"",message:a.message}),e.reloadPage()):e.growl.error({title:a.title?a.title:"",message:a.message?a.message:translations.selection_error})})}),e(document).on("click","table.datatables td .image-holder .add-new-item",function(a){a.preventDefault(),e(this).parent().find(".dropzone").click()}),e(document).on("click","table.datatables td .image-holder .sp-image-select",function(a){a.preventDefault(),e.showAjaxLoader();var t=e(this);e.post(e(this).data("selected_url"),{image_id:t.data("doc_id"),parent_id:t.data("parent_id"),entity_type_code:t.data("entity_type_code"),parent_attribute_id:t.data("parent_attribute_id")},function(a){e.hideAjaxLoader(),0==a.error?(t.parents(".sortable-items").find(".sp-image-select.hidden").removeClass("hidden"),t.addClass("hidden")):e.growl.error({title:translations.error_message,message:a.message})},"json")}),e("body").on("shown.bs.modal","#default_modal",function(a){var t=e(this);if(e(this).data("parameters")){var i=e(this).data("parameters").split(";");e.each(i,function(a,i){var s=i.split("=");t.find('[name="'+s[0]+'"]').length&&(t.find('[name="'+s[0]+'"]').is("select")?t.find('[name="'+s[0]+'"]').select2("destroy").append(e("<option/>",{value:s[1],text:s[1]})).val(s[1]).attr("readonly","readonly"):t.find('[name="'+s[0]+'"]').val(s[1]).trigger("change").attr("readonly","readonly"))})}})});
