function setCookie(e,t,a){void 0===a&&(a=30);var r=new Date;r.setTime(r.getTime()+24*a*60*60*1e3);var n="expires="+r.toUTCString();document.cookie=e+"="+t+";"+n+";path=/"}function getCookie(e){for(var t=e+"=",a=document.cookie.split(";"),r=0;r<a.length;r++){for(var n=a[r];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""}function refreshList(e,t){return setTimeout(function(){jQuery.showAjaxLoader(),e.DataTable().ajax.reload(function(){jQuery.hideAjaxLoader()})},100),e.find('[data-type="bchackbox"]').length&&e.find('[data-type="bchackbox"]').bootstrapSwitch(),!1}function refreshParentListAfterModalSave(e,t){return e.data("type")&&jQuery("body").find('[data-table="'+e.data("type")+'"]').each(function(){refreshList(jQuery(this),t)}),!1}function serealizeSelects(e){var t=[];return e.each(function(){t.push(jQuery(this).val())}),t[0]}function setSingleValueForLookup(e,t){return jQuery.post("/autocomplete/get_value_by_id",{template:e.data("template"),id:t,attribute_id:e.data("id")},function(t){if(0==t.error){var a=new Option(t.value,t.id,!0,!0);e.append(a).trigger("change"),e.data("select2")&&(e.trigger({type:"select2:select",params:{data:t.id}}),e.select2("close"))}else jQuery.growl.error({title:translations.error_message,message:t.message})},"json"),!1}function modalFormAfterSave(e,t){var a=e.data("parent-form-group");return setSingleValueForLookup(jQuery("body").find('[data-form-group="'+a+'"]').find("select"),t.entity.id),!1}function validateImport(e,t,a,r){var n=e.parents("form");return n.find('[name="path"]').val(a.path),jQuery.post(e.data("validate-url"),{path:a.path},function(e){0==e.error?(n.find(".sp-matching-container").html(e.html).show(),n.find(".sp-dropzone-container").hide(),1==e.attributeMatched&&n.find(".btn-primary").show()):(t.removeFile(r),jQuery.growl.error({title:translations.error_message,message:e.message}))},"json"),!1}function prepareUrl(e){return"/"+(e=e.split("/"))[1]+"/"+e[2]}function resetFrom(e){return e[0].reset(),e.formValidation("resetForm",!0),e.formValidation("disableSubmitButtons",!1),!0}function resetFromBasic(e){return e.find('input[type="text"]').val(""),e.find("select").val(""),e.find("input:checkbox").removeAttr("checked"),e.find('[data-action="select2"]').trigger("change"),e.find(".sp-range-slider").each(function(){jQuery(this).slider("values",[jQuery(this).data("initial-from-val"),jQuery(this).data("initial-to-val")]).trigger("slidechange"),e.find("#slider-range-amount").text(jQuery(this).slider("values",0)+" - "+jQuery(this).slider("values",1))}),e.find('[data-type="bchackbox"]').bootstrapSwitch("state",!1),!0}var selectList={};function toggleSelectItem(e,t){e.children("i").toggleClass("fa-square").toggleClass("fa-check-square"),e.closest("tr").toggleClass("sp-row-active");var a=e.data("select-id"),r=e.data("type");if(e.children("i").hasClass("fa-square")&&selectList[t]&&selectList[t][r]){selectList[t][r]=jQuery.grep(selectList[t][r],function(e){return e!=a}),0==selectList[t][r].length&&delete selectList[t][r];var n=0;jQuery.each(selectList[t],function(e,t){n++}),n||delete selectList[t]}else e.children("i").hasClass("fa-check-square")&&(selectList[t]||(selectList[t]={}),selectList[t][r]||(selectList[t][r]=[]),selectList[t][r].push(a));selectList[t]?jQuery("#"+t).parents(".sp-block").find(".sp-listview-dropdown-control").removeClass("hidden"):jQuery("#"+t).parents(".sp-block").find(".sp-listview-dropdown-control").addClass("hidden");var i=sessionStorage.getItem("tab");void 0!==i&&i||!window.sessionStorage||(i=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),sessionStorage.setItem("tab",i));var o=9999;return jQuery("body").find('[name="id"]').length>0&&(o=jQuery("body").find('[name="id"]').val()),sessionStorage.setItem(i+"_multi_"+o,JSON.stringify(selectList)),!1}function initializeSelectedItmes(){var e=sessionStorage.getItem("tab");void 0!==e&&e||!window.sessionStorage||(e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),sessionStorage.setItem("tab",e));var t=9999;return jQuery("body").find('[name="id"]').length>0&&(t=jQuery("body").find('[name="id"]').val()),selectList=(selectList=sessionStorage.getItem(e+"_multi_"+t))?jQuery.parseJSON(selectList):{},!1}function toggleHeader(e,t){if(0==t){let t=jQuery("#"+e).find(".sp-list-checkbox-all .fa-check-square");t.length>0&&t.removeClass("fa-check-square").addClass("fa-square")}else{let t=jQuery("#"+e).find(".sp-list-checkbox-all .fa-square");t.length>0&&t.removeClass("fa-square").addClass("fa-check-square")}}function toggleAllItems(e,t){return 0==t?jQuery("#"+e).find(".sp-list-checkbox > .fa-check-square").each(function(t){toggleSelectItem(jQuery(this).parent(),e)}):jQuery("#"+e).find(".sp-list-checkbox > .fa-square").each(function(t){toggleSelectItem(jQuery(this).parent(),e)}),!1}function checkifneedscrolling(e){return e.find(".dataTables_wrapper").length>0&&e.find(".dataTables_wrapper").each(function(e){jQuery(this).find("table").width()-jQuery(this).width()<10?(jQuery(this).css({overflow:"hidden"}),jQuery(this).find(".sp-filter-holder").prop("scrollLeft",0),jQuery(this).find(".sp-table-header").prop("scrollLeft",0),jQuery(this).prop("scrollLeft",0)):jQuery(this).css({"overflow-x":"auto"})}),!1}function fixTableHeader(e,t){}function showHideDropzone(e){return jQuery(".images-wrapper").children().length>=e?jQuery(".dropzone").hide():jQuery(".dropzone").show(),!1}function massRemoveSelected(e,t){return toggleHeader(e.parents(".dataTables_wrapper").attr("id"),0),toggleAllItems(e.parents(".dataTables_wrapper").attr("id"),0),!0}function goToCloned(e,t){return t.entity&&t.entity.id&&(window.location.href="/page/"+t.entity.attribute_set_code+"/form/"+t.entity.id),!1}function setSelectedGalleryItem(e,t){return jQuery.post(e.data("selected_url"),{image_id:t,parent_id:jQuery("body").find('[name="id"]').val(),entity_type_code:e.data("entity_type_code"),parent_attribute_id:e.data("parent_attribute_id")},function(a){0==a.error?(e.find(".sp-gallery-item").removeClass("sp-primary"),e.find('[data-action="set-gallery-item-primary"]').removeClass("hidden"),e.find('[data-gallery-id="'+t+'"]').addClass("sp-primary"),e.find('[data-gallery-id="'+t+'"]').find('[data-action="set-gallery-item-primary"]').addClass("hidden")):jQuery.growl.error({title:translations.error_message,message:a.message})},"json"),!1}function removeGalleryItem(e,t,a){return e.parents(".sp-gallery-item").remove(),0===t.find(".sp-gallery-item").length&&(t.find('[data-action="toggle-hidden"]').toggleClass("hidden"),t.find('[data-action="toggle-library-dropzone"]').length>0&&t.find('[data-action="toggle-library-dropzone"]').toggleClass("hidden"),t.find('[data-action="download-files"]').length>0&&t.find('[data-action="download-files"]').toggleClass("hidden"),t.find('[data-action="remove-all-items"]').length>0&&t.find('[data-action="remove-all-items"]').toggleClass("hidden")),e.parents(".dataTables_wrapper").length>0&&refreshList(e.parents(".dataTables_wrapper").find(".datatables"),null),!1}function initializeDropzone(elem){Dropzone.autoDiscover=!1;var sp_block=elem.parents(".sp-block"),options={url:elem.data("url"),paramName:"file",maxFilesize:1e10,maxFiles:elem.data("limit"),acceptedFiles:elem.data("acceptedfiles"),dictDefaultMessage:translations.dropzone,init:function(){var drop=this;this.on("success",function(file,result){if(1==result.error)jQuery.growl.error({title:translations.error_message,message:result.message}),drop.removeFile(file);else{var wrapper;wrapper=sp_block.find(".store-file-field").length>0?elem.parents(".store-file-field"):jQuery('[name="'+result.attributeCode+'"]').parents(".form-group");var table=null;if(sp_block.find(".datatables").length&&(table=sp_block.find(".dataTables_wrapper").find(".datatables"),refreshList(table,result)),wrapper&&(sp_block.find(".store-file-field").length>0?wrapper.find(".file-store-holder").val(result.path):wrapper.find('[name="'+result.attributeCode+'"]').val(result.path),wrapper.find(".options").removeClass("hidden"),wrapper.find('[data-action="toggle-dropzone"]').removeClass("hidden"),wrapper.find('[data-action="remove-image"]').removeClass("hidden"),wrapper.find(".sp-dropzone-container").find(".dropzone-wrapper").addClass("hidden"),wrapper.find(".sp-dropzone-container").find(".image-holder").remove()),wrapper&&(1==result.is_image?wrapper.find(".sp-dropzone-container").append('<div class="image-holder" data-action="toggle-hidden"><img src="'+result.web_path+'"/></div>'):wrapper.find(".sp-dropzone-container").append('<div class="image-holder" data-action="toggle-hidden"><span class="sp-document sp-icon-'+result.ext+'"><a target="_blank" href="'+result.web_path+'">'+result.web_path+"</a></span></div>")),sp_block.find(".sp-document-list").length){var doc_list_wrapper=sp_block.find(".sp-document-list");doc_list_wrapper.append('<input type="hidden" name="document_list['+result.entity.attribute_set_code+'][]" value="'+result.entity.id+'"/>')}if(sp_block.find(".sp-gallery")&&(sp_block.find(".sp-gallery").append(result.html),sp_block.find('[data-action="toggle-library-dropzone"]').removeClass("hidden")),elem.data("callback")){var functions=elem.data("callback");"string"==typeof functions&&(functions=[functions]),jQuery.each(functions,function(key,f){eval("typeof "+f+" === 'function'")&&window[f](elem,drop,result,file)})}}})}};return elem.dropzone(options),sp_block.find(".sortable-gallery").length>0&&sp_block.find(".sortable-gallery").sortable({update:function(e,t){var a=[];jQuery.each(sp_block.find('[name="image_sort_id[]"]'),function(e){a.push(jQuery(this).val())}),jQuery.post(sp_block.data("sortable_url"),{data:a,parent_id:jQuery("body").find('[name="id"]').val(),entity_type_code:sp_block.data("entity_type_code"),parent_attribute_id:sp_block.data("parent_attribute_id")},function(e){0==e.error||jQuery.growl.error({title:translations.error_message,message:e.message})},"json")}}),!1}function refreshPage(e,t){return window.location.reload(),!1}function bindStandardMassActions(button){var table=button.parents(".sp-block").find(".dataTables_wrapper");return selectList[table.attr("id")]||button.hasClass("allow-all")?(button.data("confirm")?jQuery.confirm({title:translations.please_confirm,content:translations.yes_i_am_sure,buttons:{confirm:{text:translations.yes_i_am_sure,btnClass:"sp-btn btn-primary btn-blue btn",keys:["enter"],action:function(){jQuery.post(button.data("url"),{items:selectList[table.attr("id")],parent_entity_id:jQuery("[name='id']").length?jQuery("[name='id']").val():null},function(result){if(0==result.error){if(result.message&&jQuery.growl.notice({title:result.title,message:result.message}),button.data("callback")){var functions=button.data("callback");jQuery.each(functions,function(key,f){eval("typeof "+f+" === 'function'")&&window[f](table.find(".datatables"),result)})}if(result.html){var clone=jQuery("#modal-container").clone(!0,!0).appendTo(jQuery("#page-content > div"));clone.html(result.html);var modal=clone.find(".modal");modal.modal("show");var form=modal.find('[data-validate="true"]');form.initializeValidation()}result.file&&window.open(result.file,"_blank")}else jQuery.growl.error({title:translations.error_message,message:result.message})},"json")}},cancel:{text:translations.cancel,btnClass:"sp-btn btn-default btn-red btn",action:function(){}}}}):jQuery.post(button.data("url"),{items:selectList[table.attr("id")],parent_entity_id:jQuery("[name='id']").length?jQuery("[name='id']").val():null},function(result){if(0==result.error){if(result.message&&jQuery.growl.notice({title:result.title,message:result.message}),button.data("callback")){var functions=button.data("callback");jQuery.each(functions,function(key,f){eval("typeof "+f+" === 'function'")&&window[f](table.find(".datatables"),result)})}if(result.html){var clone=jQuery("#modal-container").clone(!0,!0).appendTo(jQuery("#page-content > div"));clone.html(result.html);var modal=clone.find(".modal");modal.modal("show");var form=modal.find('[data-validate="true"]');form.initializeValidation()}}else jQuery.growl.error({title:translations.error_message,message:result.message})},"json"),jQuery(this).parents(".options").removeClass("open"),!1):(jQuery.growl.error({title:translations.error_message,message:translations.no_items_selected}),!1)}jQuery(document).ready(function(){jQuery(window).on("load",function(){jQuery(".main-content").show()})}),jQuery(document).ready(function(){function toggleSaveButtons(e){return e?jQuery(".sp-main-actions-wrapper").find('[type="submit"][data-url=""]').show():jQuery(".sp-main-actions-wrapper").find('[type="submit"][data-url=""]').hide(),!1}function toggleViewEditMode(e,t){e.parents("form");return"edit"==t?(e.addClass("sp-edit-mode"),e.find('input[data-type="text"]').not('[data-readonly="force"]').removeAttr("readonly"),e.find('input[data-type="integer"]').not('[data-readonly="force"]').removeAttr("readonly"),e.find('input[data-type="decimal"]').not('[data-readonly="force"]').removeAttr("readonly"),e.find('input[data-type="timepicker"]').not('[data-readonly="force"]').each(function(e){initializeTimepicker(jQuery(this),!1),jQuery(this).removeAttr("readonly")}),e.find('input[data-type="daterange"]').not('[data-readonly="force"]').each(function(e){initializeDaterange(jQuery(this),!1),jQuery(this).removeAttr("readonly"),jQuery(this).siblings('[data-action="clear-date"]').removeClass("hidden")}),e.find('input[data-type="datesingle"]').not('[data-readonly="force"]').each(function(e){initializeDatesingle(jQuery(this),!1),jQuery(this).removeAttr("readonly"),jQuery(this).siblings('[data-action="clear-date"]').removeClass("hidden")}),e.find('input[data-type="datetimesingle"]').not('[data-readonly="force"]').each(function(e){initializeDateTimesingle(jQuery(this),!1),jQuery(this).removeAttr("readonly"),jQuery(this).siblings('[data-action="clear-date"]').removeClass("hidden")}),e.find('textarea[data-type="textarea"]').not('[data-readonly="force"]').removeAttr("readonly"),e.find('textarea[data-type="ckeditor"]').not('[data-readonly="force"]').each(function(e){jQuery(this).removeAttr("readonly"),CKEDITOR.instances[jQuery(this).attr("name")].setReadOnly(!1)}),e.find('[data-type="bchackbox"]').not('[data-readonly="force"]').bootstrapSwitch("readonly",!1),e.find('[data-type="lookup"]').not('[data-readonly="force"]').each(function(e){jQuery(this).removeAttr("disabled")}),e.find('[data-type="multiselect"]').not('[data-readonly="force"]').each(function(e){jQuery(this).removeAttr("disabled")}),e.find(".dropzone-wrapper").length>0&&e.find(".dropzone-wrapper").each(function(t){jQuery(this).siblings(".image-holder").length>0?jQuery(this).siblings(".image-holder").find(".image-holder-options").removeClass("hidden"):e.find('[data-action="toggle-library-dropzone"]').length>0?(e.find('[data-action="toggle-library-dropzone"]').removeClass("hidden"),e.find('[data-action="download-files"]').removeClass("hidden"),e.find('[data-action="remove-all-items"]').removeClass("hidden"),e.find(".sp-gallery-item").each(function(e){jQuery(this).find('[data-action="standard_action"]').removeClass("hidden"),jQuery(this).find('[data-action="rotate-image"]').removeClass("hidden"),jQuery(this).hasClass("sp-primary")||jQuery(this).find('[data-action="set-gallery-item-primary"]').removeClass("hidden")})):jQuery(this).removeClass("hidden")}),e.find('[data-checkbox-list="deselect_all"]').length>0&&e.find('[data-checkbox-list="deselect_all"]').removeClass("disabled"),e.find('[data-checkbox-list="select_all"]').length>0&&e.find('[data-checkbox-list="select_all"]').removeClass("disabled"),e.find('[data-action="checkbox-value"]').length>0&&e.find('[data-action="checkbox-value"]').each(function(e){jQuery(this).removeAttr("disabled")}),toggleSaveButtons(!0)):(e.removeClass("sp-edit-mode"),e.find('input[data-type="text"]').not('[data-readonly="force"]').attr("readonly","readonly"),e.find('input[data-type="integer"]').not('[data-readonly="force"]').attr("readonly","readonly"),e.find('input[data-type="decimal"]').not('[data-readonly="force"]').attr("readonly","readonly"),e.find('input[data-type="daterange"]').not('[data-readonly="force"]').each(function(e){removeDatepicker(jQuery(this)),jQuery(this).attr("readonly","readonly"),jQuery(this).siblings('[data-action="clear-date"]').addClass("hidden")}),e.find('input[data-type="datesingle"]').not('[data-readonly="force"]').each(function(e){removeDatepicker(jQuery(this)),jQuery(this).attr("readonly","readonly"),jQuery(this).siblings('[data-action="clear-date"]').addClass("hidden")}),e.find('input[data-type="datetimesingle"]').not('[data-readonly="force"]').each(function(e){removeDatepicker(jQuery(this)),jQuery(this).attr("readonly","readonly"),jQuery(this).siblings('[data-action="clear-date"]').addClass("hidden")}),e.find('input[data-type="timepicker"]').not('[data-readonly="force"]').each(function(e){jQuery(this).attr("readonly","readonly")}),e.find('textarea[data-type="textarea"]').not('[data-readonly="force"]').attr("readonly","readonly"),e.find('textarea[data-type="ckeditor"]').not('[data-readonly="force"]').each(function(e){jQuery(this).attr("readonly","readonly"),CKEDITOR.instances[jQuery(this).attr("name")].setReadOnly(!0)}),e.find('[data-type="bchackbox"]').not('[data-readonly="force"]').bootstrapSwitch("readonly",!0),e.find('[data-type="lookup"]').not('[data-readonly="force"]').each(function(e){jQuery(this).attr("disabled","disabled")}),e.find('[data-type="multiselect"]').not('[data-readonly="force"]').each(function(e){jQuery(this).attr("disabled","disabled")}),e.find(".dropzone-wrapper").length>0&&e.find(".dropzone-wrapper").each(function(t){jQuery(this).siblings(".image-holder").length>0?jQuery(this).siblings(".image-holder").find(".image-holder-options").addClass("hidden"):e.find('[data-action="toggle-library-dropzone"]').length>0?(e.find('[data-action="toggle-library-dropzone"]').addClass("hidden"),e.find('[data-action="download-files"]').addClass("hidden"),e.find('[data-action="remove-all-items"]').addClass("hidden"),e.find(".sp-gallery-item").each(function(e){jQuery(this).find('[data-action="standard_action"]').addClass("hidden"),jQuery(this).find('[data-action="rotate-image"]').addClass("hidden"),jQuery(this).hasClass("sp-primary")||jQuery(this).find('[data-action="set-gallery-item-primary"]').addClass("hidden")})):jQuery(this).addClass("hidden")}),e.find('[data-checkbox-list="deselect_all"]').length>0&&e.find('[data-checkbox-list="deselect_all"]').addClass("disabled"),e.find('[data-checkbox-list="select_all"]').length>0&&e.find('[data-checkbox-list="select_all"]').addClass("disabled"),e.find('[data-action="checkbox-value"]').length>0&&e.find('[data-action="checkbox-value"]').each(function(e){jQuery(this).attr("disabled",!0)}),0==jQuery("body").find(".sp-edit-mode").length&&toggleSaveButtons(!1)),!1}function onWindowResize(){}if(jQuery("body").on("click",'[data-action="copy_to_clipboard"]',function(e){e.stopImmediatePropagation(),$.copyToClipboard($(this).text())}),jQuery("body").on("click",'[data-type="decimal"]:not([readonly])',function(e){"0,00"==jQuery(this).val()&&jQuery(this).val("")}),jQuery("body").on("focusout",'[data-type="decimal"]:not([readonly])',function(e){""==jQuery(this).val()&&jQuery(this).val("0,00")}),jQuery("body").on("click",'[data-type="integer"]:not([readonly])',function(e){"0"==jQuery(this).val()&&jQuery(this).val("")}),jQuery("body").on("focusout",'[data-type="integer"]:not([readonly])',function(e){""==jQuery(this).val()&&jQuery(this).val("0")}),initializeSelectedItmes(),jQuery("body").find(".dropzone").length&&jQuery("body").find(".dropzone").each(function(e){initializeDropzone(jQuery(this))}),jQuery("body").find(".sp-color-picker").length&&jQuery("body").find(".sp-color-picker").each(function(e){jQuery(this).colorpicker()}),jQuery("body").on("click",'[data-action="set-gallery-item-primary"]',function(e){var t=jQuery(this).parents(".sp-gallery-item");setSelectedGalleryItem(t.parents(".sp-block"),t.data("gallery-id"))}),jQuery('[data-page-subtype="view"]').length&&toggleSaveButtons(!1),jQuery("body").on("click",'[data-action="add-block-modal-front"]',function(e){jQuery.post(jQuery(this).data("url"),{is_front:!0},function(e){if(0==e.error){var t=jQuery("#modal-container").clone(!0,!0).appendTo(jQuery("#page-content > div"));t.html(e.html);var a=t.find(".modal");a.modal("show"),a.find('[data-validate="true"]').initializeValidation()}else jQuery.growl.error({title:translations.error_message,message:e.message})},"json")}),jQuery("body").on("click",'[data-action="edit-block-modal-front"]',function(e){jQuery.post(jQuery(this).data("url"),{is_front:!0},function(e){if(0==e.error){var t=jQuery("#modal-container").clone(!0,!0).appendTo(jQuery("#page-content > div"));t.html(e.html);var a=t.find(".modal");a.modal("show"),a.find('[data-validate="true"]').initializeValidation()}else jQuery.growl.error({title:translations.error_message,message:e.message})},"json")}),jQuery("body").on("click",'[data-action="remove-block-front"]',function(e){var t=jQuery(this);jQuery.confirm({title:translations.please_confirm,content:translations.yes_i_am_sure,buttons:{confirm:{text:translations.yes_i_am_sure,btnClass:"sp-btn btn-primary btn-blue btn",keys:["enter"],action:function(){jQuery.post(t.data("url"),{},function(e){0==e.error?window.location.reload(!0):jQuery.growl.error({title:translations.error_message,message:e.message})},"json")}},cancel:{text:translations.cancel,btnClass:"sp-btn btn-default btn-red btn",action:function(){}}}})}),jQuery("body").on("click",'[data-action="back"]',function(e){e.preventDefault(),goBackWithRefresh(e)}),jQuery(".main-content").find(".datatables").length>0&&jQuery(".main-content").find(".datatables").each(function(e){jQuery("#"+jQuery(this).attr("id")).createDatatable()}),jQuery("body").on("click",'[data-action="export_xls"]',function(e){e.stopPropagation();var t=jQuery(this).parents(".panel").find(".dataTables_wrapper");jQuery.post(jQuery(this).data("url"),{data:table_state[t.find(".datatables").attr("id")],items:selectList[t.attr("id")]},function(e){if(0==e.error){var t=jQuery("#modal-container").clone(!0,!0).appendTo(jQuery("#page-content > div"));t.html(e.html);var a=t.find(".modal");a.modal("show"),a.find('[data-validate="true"]').initializeValidation()}else jQuery.growl.error({title:translations.error_message,message:e.message})},"json")}),jQuery("body").on("click",'[data-action="import_xls"]',function(e){e.stopPropagation(),jQuery.post(jQuery(this).data("url"),{},function(e){if(0==e.error){var t=jQuery("#modal-container").clone(!0,!0).appendTo(jQuery("#page-content > div"));t.html(e.html);var a=t.find(".modal");a.modal("show");var r=a.find('[data-validate="true"]');r.initializeValidation(),initializeDropzone(r.find(".dropzone"))}else jQuery.growl.error({title:translations.error_message,message:e.message})},"json")}),jQuery("body").on("click",'[data-action="import_xls_template"]',function(e){e.stopPropagation();var t=jQuery(this).parents(".panel").find(".dataTables_wrapper").find(".datatables");jQuery.post(jQuery(this).data("url"),{data:table_state[t.attr("id")]},function(e){0==e.error?window.open(e.filepath,"_blank"):jQuery.growl.error({title:translations.error_message,message:e.message})},"json")}),jQuery('[data-action="toggle_search"]').click(function(){jQuery("#top_search").toggleClass("hidden"),jQuery("#top_search").siblings(".sp-top-search-wrapper").toggleClass("hidden")}),jQuery('[data-action="clear_top_search"]').click(function(){jQuery("#quicksearch").find('[name="query"]').val("")}),jQuery(".sp-fixed-header").length>0){var main_table=jQuery(".sp-fixed-header").find(".dataTable"),filter_holder=main_table.find(".sp-filter-holder"),table_header=main_table.find(".sp-table-header");jQuery(window).scroll(function(){fixTableHeader(filter_holder,table_header)}),fixTableHeader(filter_holder,table_header)}jQuery(window).on("resize",function(){checkifneedscrolling(jQuery("body"))}),checkifneedscrolling(jQuery("body")),jQuery('[data-tooltip="true"]')>0&&jQuery('[data-tooltip="true"]').tooltip(),jQuery('[data-validate="true"]')&&jQuery('[data-validate="true"]').initializeValidation(),jQuery("body").on("dblclick",'[data-action="standard_row_action"]',function(){jQuery(this).data("url")&&(window.location.href=jQuery(this).data("url"))}),jQuery('[data-action="standard_mass_action"]').bind("click",function(){bindStandardMassActions(jQuery(this))}),jQuery("body").on("click",'[data-action="standard_action"]',function(e){e.stopPropagation();var elem=jQuery(this),id=elem.data("id");id||(id=jQuery("body").find('[data-validate="true"]').find('[name="id"]').val());var sp_block=elem.parents(".sp-block");elem.data("confirm")?jQuery.confirm({title:translations.please_confirm,content:translations.yes_i_am_sure,buttons:{confirm:{text:translations.yes_i_am_sure,btnClass:"sp-btn btn-primary btn-blue btn",keys:["enter"],action:function(){jQuery.post(elem.data("url"),{id:id},function(result){if(0==result.error){if(jQuery.growl.notice({title:result.title,message:result.message}),elem.data("callback")){var functions=elem.data("callback");"string"==typeof functions&&(functions=[functions]),jQuery.each(functions,function(key,f){eval("typeof "+f+" === 'function'")&&window[f](elem,sp_block,result)})}}else jQuery.growl.error({title:translations.error_message,message:result.message})},"json")}},cancel:{text:translations.cancel,btnClass:"sp-btn btn-default btn-red btn",action:function(){}}}}):jQuery.post(elem.data("url"),{id:id},function(result){if(0==result.error){if(jQuery.growl.notice({title:result.title,message:result.message}),elem.data("callback")){var functions=elem.data("callback");"string"==typeof functions&&(functions=[functions]),jQuery.each(functions,function(key,f){eval("typeof "+f+" === 'function'")&&window[f](elem,sp_block,result)})}}else jQuery.growl.error({title:translations.error_message,message:result.message})},"json")}),jQuery("body").on("click",'[data-action="button_list_filtered"]',function(e){e.preventDefault(),e.stopPropagation();var t=jQuery(this);t.attr("disabled","disabled");var a=jQuery("body").find(".dataTable"),r=a.data("view-id");if(!a)return $.growl.error({title:result.title?result.title:"",message:result.message?result.message:translations.error_message}),!1;var n=table_state[a.attr("id")];$("#ajax-loading").addClass("active"),jQuery.post(t.data("url"),{data:n.send_data,custom_data:n.custom_data,list_view_id:r},function(e){if($("#ajax-loading").removeClass("active"),t.removeAttr("disabled"),0==e.error)if(jQuery.growl.notice({title:e.title,message:e.message}),e.file)window.open(e.file,"_blank");else if(e.html){var a=jQuery("#modal-container").clone(!0,!0).appendTo(jQuery("#page-content > div"));a.html(e.html);var r=a.find(".modal");r.modal("show"),r.find('[data-validate="true"]').initializeValidation()}else window.location.reload(!0);else jQuery.growl.error({title:translations.error_message,message:e.message})},"json")}),jQuery("body").on("click",'[data-action="button_default"]',function(e){e.preventDefault(),e.stopPropagation();var t=jQuery(this);t.attr("disabled","disabled");var a=t.data("id");a||(a=jQuery("body").find('[data-validate="true"]').find('[name="id"]').val()),jQuery.confirm({title:translations.please_confirm,content:translations.yes_i_am_sure,buttons:{confirm:{text:translations.yes_i_am_sure,btnClass:"sp-btn btn-primary btn-blue btn",keys:["enter"],action:function(){$("#ajax-loading").addClass("active"),$.ajax({url:t.data("url"),method:"POST",data:{id:a},cache:!1}).done(function(e){$("#ajax-loading").removeClass("active"),0==e.error?(t.removeAttr("disabled"),jQuery.growl.notice({title:e.title,message:e.message}),e.file?window.open(e.file,"_blank"):window.location.reload(!0)):($.growl.error({title:e.title?e.title:"",message:e.message?e.message:translations.selection_error}),window.location.reload(!0))})}},cancel:{text:translations.cancel,btnClass:"sp-btn btn-default btn-red btn",action:function(){t.removeAttr("disabled")}}}})}),jQuery("body").on("click",'[data-action="standard_grid_action"]',function(e){e.stopPropagation();var elem=jQuery(this),table=elem.parents(".dataTables_wrapper").find(".datatables"),id=elem.data("id");1==elem.data("confirm")||"true"==elem.data("confirm")?jQuery.confirm({title:translations.please_confirm,content:translations.yes_i_am_sure,buttons:{confirm:{text:translations.yes_i_am_sure,btnClass:"sp-btn btn-primary btn-blue btn",keys:["enter"],action:function(){jQuery.post(elem.data("url"),{id:id,parent_entity_id:jQuery("[name='id']").length?jQuery("[name='id']").val():null},function(result){if(0==result.error){if(result.message&&jQuery.growl.notice({title:result.title,message:result.message}),result.html){var clone=jQuery("#modal-container").clone(!0,!0).appendTo(jQuery("#page-content > div"));clone.html(result.html);var modal=clone.find(".modal");modal.modal("show");var form=modal.find('[data-validate="true"]');form.initializeValidation()}else refreshList(table,result),jQuery("body").find(".sp-preview-container").find('[name="id"]').length>0&&jQuery("body").find(".sp-preview-container").find('[name="id"]').val()==id&&jQuery("body").find(".sp-preview-container").html("");if(elem.data("callback")){var functions=elem.data("callback");"string"==typeof functions&&(functions=[functions]),jQuery.each(functions,function(key,f){eval("typeof "+f+" === 'function'")&&window[f](table,result)})}}else jQuery.growl.error({title:translations.error_message,message:result.message})},"json")}},cancel:{text:translations.cancel,btnClass:"sp-btn btn-default btn-red btn",action:function(){}}}}):jQuery.post(elem.data("url"),{id:id,parent_entity_id:jQuery("[name='id']").length?jQuery("[name='id']").val():null},function(result){if(0==result.error)if(null!=result.redirect_url)jQuery.redirectToUrl(result.redirect_url);else{if(result.message&&jQuery.growl.notice({title:result.title,message:result.message}),result.html){var clone=jQuery("#modal-container").clone(!0,!0).appendTo(jQuery("#page-content > div"));clone.html(result.html);var modal=clone.find(".modal");modal.modal("show");var form=modal.find('[data-validate="true"]');form.initializeValidation()}else refreshList(table,result);if(elem.data("callback")){var functions=elem.data("callback");"string"==typeof functions&&(functions=[functions]),jQuery.each(functions,function(key,f){eval("typeof "+f+" === 'function'")&&window[f](table.find(".datatables"),result)})}}else jQuery.growl.error({title:translations.error_message,message:result.message})},"json")}),jQuery("body").on("click",'[data-action="ecommerce_health_check_is_custom"]',function(e){e.stopPropagation();var elem=jQuery(this),table=elem.parents(".dataTables_wrapper").find(".datatables"),id=elem.parents("tr").find('[data-code="id"]').text().trim(),tableName=elem.parents("tr").find('[data-code="table_name"]').text().trim();null==id||null==table?jQuery.growl.error({title:translations.error_message,message:translations.missing+" id, table"}):1!=elem.data("confirm")&&"true"!=elem.data("confirm")||jQuery.confirm({title:translations.please_confirm,content:translations.yes_i_am_sure,buttons:{confirm:{text:translations.yes_i_am_sure,btnClass:"sp-btn btn-primary btn-blue btn",keys:["enter"],action:function(){jQuery.post(elem.data("url"),{id:id,table:tableName},function(result){if(0==result.error){if(jQuery.growl.notice({title:result.title,message:result.message}),refreshList(table,result),jQuery("body").find(".sp-preview-container").find('[name="id"]').length>0&&jQuery("body").find(".sp-preview-container").find('[name="id"]').val()==id&&jQuery("body").find(".sp-preview-container").html(""),elem.data("callback")){var functions=elem.data("callback");"string"==typeof functions&&(functions=[functions]),jQuery.each(functions,function(key,f){eval("typeof "+f+" === 'function'")&&window[f](table.find(".datatables"),result)})}}else jQuery.growl.error({title:translations.error_message,message:result.message})},"json")}},cancel:{text:translations.cancel,btnClass:"sp-btn btn-default btn-red btn",action:function(){}}}})}),jQuery("body").on("click",'[data-action-type="inline_edit"]',function(e){e.stopPropagation();var t=jQuery(this).parents(".sp-list-view-block").find(".datatables");t.hasClass("sp-list-editable")?(t.removeClass("sp-list-editable"),refreshList(t,null)):(t.addClass("sp-list-editable"),refreshList(t,null))});var saveRow=function(e,t){if(jQuery(t.relatedTarget).closest("tr").index()!=jQuery(t.currentTarget).closest("tr").index()){var a=e.parents("tr");if(jQuery(a).hasClass("sp-row-edited")){e.parents(".dataTables_wrapper").find(".datatables"),e.data("id");var r={},n=a.find(".sp-save-row").data("url");r.id=a.data("row-id"),jQuery(jQuery(e.parents("tr").find(".form-control"))).each(function(){jQuery(this).data("json"),r[jQuery(this).attr("name")]=jQuery(this).val()}),jQuery(a).find(".sp-save-row").removeClass("hidden"),jQuery.post(n,r,function(e){if(0==e.error){var t=e.entity;jQuery(a).find("td").each(function(){var e=jQuery(this);e.data("attribute")&&e.html(t[e.data("attribute")])}),jQuery(a).find(".sp-save-row").trigger("row_edited",t),0==e.error&&jQuery(a).find("td").each(function(){var e=jQuery(this);e.data("attribute")&&e.html(t[e.data("attribute")])}),jQuery(a).removeClass("sp-row-edited")}else jQuery.growl.error({title:translations.error_message,message:e.message});jQuery(a).find(".sp-save-row").addClass("hidden")},"json")}}};if(jQuery("table.datatables").on("change","input, select, textarea",function(e){var t=jQuery(this).closest("tr");t.addClass("sp-row-edited"),jQuery(this).trigger("row_value_changed"),jQuery(this).parents("table").data("editing-row",t.index()),saveRow(jQuery(this),e)}),jQuery("table.datatables").on("switchChange.bootstrapSwitch",'[data-type="bchackbox"]',function(e,t){var a=jQuery(this).closest("tr");a.addClass("sp-row-edited"),jQuery(this).trigger("row_value_changed"),jQuery(this).parents("table").data("editing-row",a.index()),t?jQuery(this).closest("td").find('[data-action="checkbox-value"]').val(1):jQuery(this).closest("td").find('[data-action="checkbox-value"]').val(0),saveRow(jQuery(this).closest("td").find('[data-action="checkbox-value"]'),e)}),jQuery("table.datatables").on("blur",".form-control,.sp-select2-cell",function(e){e.stopPropagation();var t=jQuery(this);saveRow(t,e)}),jQuery("body").on("click",'[data-action="standard_add_modal_form"]',function(e){e.stopPropagation();var t=jQuery(this).prop("disabled",!0);standardAddModalForm(jQuery(this).data("url"),t)}),jQuery(".sp-main-actions-wrapper").on("click",'[data-action="return"]',function(e){jQuery('[data-validate="true"]').find('[data-action="return"]').trigger("click")}),jQuery(".sp-main-actions-wrapper").on("click",'[data-action="continue"]',function(e){jQuery('[data-validate="true"]').find('[data-action="continue"]').trigger("click")}),jQuery("#page-content").on("click",".dropdown-toggle",function(e){e.stopPropagation(),jQuery(this).dropdown("toggle")}),jQuery("ul.dropdown-menu [data-toggle=dropdown]").on("click",function(e){e.preventDefault(),e.stopPropagation(),jQuery(this).parent().siblings().removeClass("open"),jQuery(this).parent().toggleClass("open")}),jQuery("body").on("click",".sp-datatable-left-button",function(e){e.stopPropagation()}),jQuery("body").find('[data-form-group="file"]').length){var panel=jQuery("body").find('[data-form-group="file"]').find(".panel");panel.find(".panel-heading").remove(),panel.removeClass("panel-midnightblue").removeClass("panel"),panel.find(".panel-body").removeClass("panel-body").removeClass("collapse").removeClass("in")}jQuery(".datatables").on("keypress",".yadcf-filter",function(e){if(13==e.which)return jQuery('[data-action="filter-submit"]').trigger("click"),!1}),jQuery("body").on("click",'[data-action="standard_preview"] .dropdown-menu a',function(e){return e.stopPropagation(),window.location.href=jQuery(this).attr("href"),!1}),jQuery("body").on("click",'[data-action="advanced_search"]',function(e){e.preventDefault();var t=jQuery(this).parents(".sp-block").find(".sp-search-wrapper");return jQuery(this).hasClass("sp-active")?(jQuery(this).removeClass("sp-active"),t.removeClass("sp-search-wrapper-active")):(jQuery(this).addClass("sp-active"),t.addClass("sp-search-wrapper-active")),refreshList(jQuery(this).parents(".sp-block").find(".dataTables_wrapper").find(".datatables"),null),!1}),jQuery("body").on("click",'[data-action="advanced_search_use"]',function(e){return e.preventDefault(),refreshList(jQuery(this).parents(".sp-block").find(".dataTables_wrapper").find(".datatables"),null),!1}),jQuery("body").on("click",'[data-action="advanced_search_reset"]',function(e){e.preventDefault();var t=jQuery('[data-action="advanced_search_reset"]').parents(".sp-advanced-search");return t.find('[data-type="lookup"]').each(function(e){jQuery(this).val(null).trigger("change")}),t.find("input").val("").trigger("change"),t.find("select").val("").trigger("change"),jQuery(this).parents(".sp-block").find('[data-action="filter-reset"]').trigger("click"),!1}),jQuery("body").on("click",".sp-list-checkbox",function(e){return e.stopPropagation(),toggleSelectItem(jQuery(this),jQuery(this).parents(".dataTables_wrapper").attr("id")),!1}),jQuery("body").on("click",".sp-list-checkbox-all",function(e){return e.stopPropagation(),jQuery(this).children("i").hasClass("fa-square")?toggleAllItems(jQuery(this).parents(".dataTables_wrapper").attr("id"),1):toggleAllItems(jQuery(this).parents(".dataTables_wrapper").attr("id"),0),jQuery(this).children("i").toggleClass("fa-square").toggleClass("fa-check-square"),!1}),jQuery("body").on("click",'[data-action="standard_preview"]',function(e){if(jQuery(this).hasClass("sp-row-active"))return!1;jQuery("body").find('[data-action="standard_preview"]').removeClass("sp-row-active"),jQuery(this).addClass("sp-row-active");var preview_wrapper=jQuery('[data-wrapper="preview_sidebar"]'),main_wrapper=preview_wrapper.siblings(".main-content"),button=jQuery(this).prop("disabled",!0);jQuery.post(jQuery(this).data("url"),{id:jQuery(this).data("id")},function(result){if(0==result.error){if(main_wrapper.removeClass("col-md-12").addClass("col-md-8"),preview_wrapper.html(result.html).removeClass("hidden"),onWindowResize(),preview_wrapper.initializeForm(),preview_wrapper.find(".form-group-wrapper").find(".col-sm-12").removeClass("col-sm-12"),preview_wrapper.find('[data-form-group="file"]').length){var panel=preview_wrapper.find('[data-form-group="file"]').find(".panel");panel.find(".panel-heading").remove(),panel.removeClass("panel-midnightblue").removeClass("panel"),panel.find(".panel-body").removeClass("panel-body").removeClass("collapse").removeClass("in")}var form=preview_wrapper.find("form"),entity_type=form.data("type"),func=entity_type+"_standard_preview";eval("typeof "+func+" === 'function'")&&window[func](form)}else jQuery.growl.error({title:translations.error_message,message:result.message});button.prop("disabled",!1)},"json")}),jQuery("body").on("click",'[data-action="close_preview"]',function(e){jQuery("body").find('[data-action="standard_preview"]').removeClass("sp-row-active");var t=jQuery('[data-wrapper="preview_sidebar"]');return t.siblings(".main-content").removeClass("col-md-8").addClass("col-md-12"),t.html("").addClass("hidden"),onWindowResize(),!1}),jQuery("body").on("click",'[data-action="modal_preview"]',function(e){var t=jQuery(this).prop("disabled",!0);jQuery.post(jQuery(this).data("url"),{},function(e){if(0==e.error){var a=jQuery("#modal-container").clone(!0,!0).appendTo(jQuery("footer"));a.html(e.html);var r=a.find(".modal");r.modal("show"),r.find('[data-validate="true"]').initializeValidation()}else jQuery.growl.error({title:translations.error_message,message:e.message});t.prop("disabled",!1)},"json")}),jQuery("body").on("click",'[data-action="modal_add"]',function(e){e.preventDefault(),e.stopPropagation();var t=jQuery(this);jQuery.post(jQuery(this).data("url"),{},function(e){if(0==e.error){var a=jQuery("#modal-container").clone(!0,!0).appendTo(jQuery("#page-content > div"));a.html(e.html);var r=a.find(".modal");r.modal("show");var n=r.find('[data-validate="true"]');n.initializeValidation(),n.forceBoostrapXs(),n.find('[name="pid"]').length>0&&t.data("pid")&&n.find('[name="pid"]').val(t.data("pid")),n.find('[name="ptype"]').length>0&&t.data("ptype")&&n.find('[name="ptype"]').val(t.data("ptype")),setTimeout(function(){n.find(".form-control:not([name='id']):first").focus().focus()},500),r.find(".datatables").length>0&&(r.find(".datatables").each(function(e){jQuery("#"+jQuery(this).attr("id")).createDatatable()}),r.find('[data-action="standard_mass_action"]').length>0&&r.find('[data-action="standard_mass_action"]').each(function(e){jQuery(this).bind("click",function(){bindStandardMassActions(jQuery(this))})})),$.initializeNotesCkeditor()}else jQuery.growl.error({title:translations.error_message,message:e.message})},"json")}),jQuery("body").on("click",'[data-action="standard_view"]',function(e){window.location.href=jQuery(this).data("url")}),jQuery("body").on("click",'[data-action="toggle-dropzone"]',function(e){return jQuery(this).parents(".form-group").find('[data-action="toggle-hidden"]').toggleClass("hidden"),!1}),jQuery("body").on("click",'[data-action="toggle-library-dropzone"]',function(e){return jQuery(this).closest(".sp-block").find('[data-action="toggle-hidden"]').toggleClass("hidden"),!1}),jQuery("body").on("click",'[data-action="remove-single-document"]',function(e){return jQuery(this).closest(".sp-block").find(".store-file-field").length>0?(jQuery(this).closest(".store-file-field").find('[data-action="toggle-hidden"]').toggleClass("hidden"),jQuery(this).closest(".store-file-field").find('[data-input="filepath"]').val("")):(jQuery(this).closest(".sp-block").find('[data-action="toggle-hidden"]').toggleClass("hidden"),jQuery(this).closest(".sp-block").find('[data-input="filepath"]').val("")),!1}),jQuery("body").on("click",'[data-action="remove-all-items"]',function(e){var t=jQuery(this),a=t.parents(".sp-block"),r=[];return a.find(".sp-gallery-item").each(function(e){r.push(jQuery(this).data("gallery-id"))}),jQuery.confirm({title:translations.please_confirm,content:translations.yes_i_am_sure,buttons:{confirm:{text:translations.yes_i_am_sure,btnClass:"sp-btn btn-primary btn-blue btn",keys:["enter"],action:function(){jQuery.post(t.data("url"),{entity_type_code:t.data("entity_type_code"),ids:r},function(e){!1===e.error?(a.find(".sp-gallery-item").remove(),a.find('[data-action="toggle-hidden"]').toggleClass("hidden"),a.find('[data-action="toggle-library-dropzone"]').toggleClass("hidden"),a.find('[data-action="remove-all-items"]').toggleClass("hidden"),a.find('[data-action="download-files"]').toggleClass("hidden"),jQuery.growl.notice({title:e.title,message:e.message})):jQuery.growl.error({title:translations.error_message,message:e.message})},"json")}},cancel:{text:translations.cancel,btnClass:"sp-btn btn-default btn-red btn",action:function(){}}}}),!1}),jQuery("body").on("click",'[data-action="rotate-image"]',function(e){var t=jQuery(this).parents(".sp-gallery-item");return jQuery.post(jQuery(this).data("url"),{entity_type_code:jQuery(this).data("entity_type_code"),id:jQuery(this).data("id"),direction:jQuery(this).data("direction")},function(e){0==e.error?(t.replaceWith(e.html),jQuery.growl.notice({title:e.title,message:e.message})):jQuery.growl.error({title:translations.error_message,message:e.message})},"json"),!1}),$(document).on("keyup",'.sp-gallery-item-metadata [name="image_alt"]',$.debounce(function(e){var t=jQuery(this).val();jQuery.post(jQuery(this).closest(".sp-gallery-item-metadata").find('[data-action="set-image-alt"]').data("url"),{entity_type_code:jQuery(this).closest(".sp-gallery-item-metadata").find('[data-action="set-image-alt"]').data("entity_type_code"),id:jQuery(this).closest(".sp-gallery-item-metadata").find('[data-action="set-image-alt"]').data("id"),value:t},function(e){0==e.error?jQuery.growl.notice({title:e.title,message:e.message}):jQuery.growl.error({title:translations.error_message,message:e.message})},"json")},1e3)),$(document).on("keyup",'.sp-gallery-item-metadata [name="image_title"]',$.debounce(function(e){var t=jQuery(this).val();jQuery.post(jQuery(this).closest(".sp-gallery-item-metadata").find('[data-action="set-image-title"]').data("url"),{entity_type_code:jQuery(this).closest(".sp-gallery-item-metadata").find('[data-action="set-image-title"]').data("entity_type_code"),id:jQuery(this).closest(".sp-gallery-item-metadata").find('[data-action="set-image-title"]').data("id"),value:t},function(e){0==e.error?jQuery.growl.notice({title:e.title,message:e.message}):jQuery.growl.error({title:translations.error_message,message:e.message})},"json")},1e3)),jQuery("body").on("click",'[data-action="remove-image"]',function(e){var t=jQuery(this).parents(".form-group");return t.find('[data-input="filepath"]').val(""),t.find(".image-holder").remove(),t.find(".dropzone-wrapper").removeClass("hidden"),!1}),jQuery("body").on("click",'[data-action="download-files"]',function(e){var t=jQuery(this);return jQuery.post(t.data("url"),{entity_type_code:t.data("entity_type_code"),parent_attribute_id:t.data("parent_attribute_id"),parent_id:t.data("parent_id"),related_entity_type:t.data("related_entity_type")},function(e){!1===e.error?window.open(e.filepath,"_blank"):jQuery.growl.error({title:translations.error_message,message:e.message})},"json"),!1}),jQuery("body").on("hidden.bs.modal",".modal",function(){$(this).data("bs.modal",null),$(this).parent().remove()}),jQuery("body").on("change",'[data-related-action="reload-list"]',function(e){var t=jQuery(this).data("related-code");jQuery.post(jQuery(this).data("related-url"),{code:jQuery(this).data("code"),val:jQuery(this).val(),related_code:t,related_val:jQuery('[name="'+t+'"]').val()},function(e){0==e.error?jQuery('[name="'+t+'"]').html(e.html):jQuery.growl.error({title:translations.error_message,message:e.message})},"json")});var popover_options={placement:function(e,t){if(jQuery(t).data("placement"))return jQuery(t).data("placement");var a=jQuery(t).offset();return a.left>515?"left":a.left<515?"right":a.top<110?"bottom":"top"},trigger:"hover",container:"body"};jQuery('[rel="popover"]').popover(popover_options),$("#back-to-top").click(function(){return $("body,html").animate({scrollTop:0},500),!1}),$("a.panel-collapse").click(function(){return $(this).children().toggleClass("fa-chevron-down fa-chevron-up"),$(this).closest(".panel-heading").next().slideToggle({duration:200}),$(this).closest(".panel-heading").toggleClass("rounded-bottom"),!1}),jQuery('[data-action="login-form"]').length>0&&jQuery('[data-action="login-submit"]').bind("click",function(e){if(e.preventDefault(),!jQuery('[data-action="login-form"]').find('[name="_username"]').val()||!jQuery('[data-action="login-form"]').find('[name="_password"]').val())return jQuery.growl.error({title:translations.error_message,message:translations.login_error}),!1;jQuery(".panel-primary").animate({height:0},600,function(){jQuery(this).hide(),jQuery(".sp-verticalcenter").animate({marginTop:"30px"},500,function(){jQuery('[data-action="login-form"]').submit()})})}),jQuery('[data-action="request-form"]').length>0&&jQuery('[data-action="request-submit"]').bind("click",function(e){if(e.preventDefault(),!jQuery('[data-action="request-form"]').find('[name="username"]').val())return jQuery.growl.error({title:translations.error_message,message:translations.login_error}),!1;jQuery('[data-action="request-form"]').submit()}),jQuery('[data-action="reset-form"]').length>0&&jQuery('[data-action="reset-submit"]').bind("click",function(e){if(e.preventDefault(),!jQuery('[data-action="reset-form"]').find("#fos_user_resetting_form_plainPassword_first").val()||!jQuery('[data-action="reset-form"]').find("#fos_user_resetting_form_plainPassword_second").val())return jQuery.growl.error({title:translations.error_message,message:translations.login_error}),!1;jQuery('[data-action="reset-form"]').submit()});var location=prepareUrl(window.location.pathname);if(jQuery(".navbar-nav").find('a[href^="'+location+'/"]').length>0){var selected_url=jQuery(".navbar-nav").find('a[href^="'+location+'/"]');selected_url.parents("li").addClass("active")}jQuery(document).on("click",'ul.navbar-nav [data-toggle="dropdown"]',function(){jQuery(this).parent().siblings(".active").removeClass("active"),jQuery(this).parent().toggleClass("active")}),jQuery("body").on("click",'[data-action="dismiss-modal"]',function(e){e.preventDefault(),e.stopPropagation(),jQuery(this).parents(".modal").modal("hide")}),jQuery("body").on("click",'[data-toggle="dropdown-export"]',function(e){jQuery(this).siblings('[data-menu="dropdown-export"]').toggle()}),jQuery(".sp-listview-dropdown span.menu-item").on("click",function(e){jQuery(this).parents(".sp-listview-dropdown-wrapper").removeClass("open")}),jQuery("body").on("click",'[data-action="default_form_button"]',function(e){e.preventDefault(),e.stopPropagation();var t=jQuery(this),a=jQuery('[data-validate="true"]').find('[name="id"]').val();jQuery.confirm({title:translations.please_confirm,content:translations.yes_i_am_sure,buttons:{confirm:{text:translations.yes_i_am_sure,btnClass:"sp-btn btn-primary btn-blue btn",keys:["enter"],action:function(){t.attr("disabled","disabled"),jQuery.post(t.data("url"),{id:a},function(e){if(0==e.error)if(t.removeAttr("disabled"),e.html){var a=$("#modal-container").clone(!0,!0).appendTo($("body"));a.html(e.html),a.find(".modal").modal("show"),$(".modal").find('[data-validate="true"]').initializeValidation()}else window.location.reload(!0);else t.removeAttr("disabled"),jQuery.growl.error({title:translations.error_message,message:e.message})},"json")}},cancel:{text:translations.cancel,btnClass:"sp-btn btn-default btn-red btn",action:function(){t.removeAttr("disabled")}}}})})}),Array.prototype.contains=function(e){for(i in this)if(this[i]==e)return!0;return!1},jQuery(document).ready(function(){jQuery("body").on("switchChange.bootstrapSwitch","#repeat_event_checkbox",function(e,t){1==t?(jQuery("body").find("#repeat_options_holder").show(),jQuery("body").find("#repeat_interval_group :input").prop("disabled",!1),jQuery("body").find("#ending_on_date :input").prop("disabled",!1)):(jQuery("body").find("#repeat_options_holder").hide(),jQuery("body").find("#repeat_interval_group :input").prop("disabled",!0),jQuery("body").find("#ending_on_date :input").prop("disabled",!0),jQuery("body").find("#ending_after_number :input").prop("disabled",!0))}),jQuery("body").on("change","#ending_condition",function(){"on"==jQuery(this).val()?(jQuery("body").find("#ending_after_number").hide(),jQuery("body").find("#ending_after_number :input").prop("disabled",!0),jQuery("body").find("#ending_on_date").show(),jQuery("body").find("#ending_on_date :input").prop("disabled",!1)):(jQuery("body").find("#ending_after_number").show(),jQuery("body").find("#ending_after_number :input").prop("disabled",!1),jQuery("body").find("#ending_on_date").hide(),jQuery("body").find("#ending_on_date :input").prop("disabled",!0))}),jQuery("body").on("change","#repeat_type",function(){jQuery("body").find("#repeat_interval_group").show(),jQuery("body").find("#repeat_interval_group :input").prop("disabled",!1),jQuery("body").find("#repeat_on_group").hide(),jQuery("body").find("#repeat_by_group").hide(),"daily"==jQuery(this).val()?jQuery("body").find("#repeat_interval_label").html("Days"):"weekly"==jQuery(this).val()?(jQuery("body").find("#repeat_interval_label").html("Weeks"),jQuery("body").find("#repeat_on_group").show()):"monthly"==jQuery(this).val()?(jQuery("body").find("#repeat_interval_label").html("Months"),jQuery("body").find("#repeat_by_group").show()):"yearly"==jQuery(this).val()?jQuery("body").find("#repeat_interval_label").html("Years"):(jQuery("body").find("#repeat_interval_group").hide(),jQuery("body").find("#repeat_interval_group :input").prop("disabled",!0))})});
